(window.webpackJsonp=window.webpackJsonp||[]).push([[679],{1077:function(t,e,i){},1203:function(t,e,i){"use strict";var n=i(296),r=(i(161),i(67),i(475),i(807)),o=i(0),s=i(855),a=i(597),h=i(825),c={fill:"rgba(64,158,255,0.2)",stroke:{color:"rgba(64,158,255,0.7)",width:2,lineDash:[10,10]},circle:{radius:5,stroke:{width:2,color:"#409eff"}}},u={name:"MyMapMeasure",inject:["myMap"],components:{MapDraw:s.a},props:{type:{type:String,default:"line",validator:function(t){return["line","area"].includes(t)}},disabled:Boolean,theme:{type:String,default:"light",validator:function(t){return["light","dark"].includes(t)}},startTip:{type:String,default:"单击确定起点"},endTip:{type:String,default:"单击继续，双击结束"},brush:{type:[Object,Function],default:function(){return c}},effect:[Object,Function]},computed:{drawType:function(){return{line:"LineString",area:"Polygon"}[this.type]}},data:function(){return{helpTipPosition:null,helpTip:this.startTip,measureTip:null,measureTipPosition:null,measureTipOffset:[0,-15],changeListener:null,measures:[],value:0}},watch:{disabled:function(t){t?this.$refs.draw.finish():this.$refs.draw.draw()}},methods:{init:function(t){this.myMap.map.on("pointermove",this.handlePointerMove),this.disabled||t.draw()},formatLength:function(t){var e=this.value=Object(a.c)(t,{projection:this.myMap.projection});return e>100?Math.round(e/1e3*100)/100+" km":Math.round(100*e)/100+" m"},formatArea:function(t){var e=this.value=Object(a.a)(t,{projection:this.myMap.projection});return e>1e4?Math.round(e/1e6*100)/100+" km<sup>2</sup>":Math.round(100*e)/100+" m<sup>2</sup>"},handlePointerMove:function(t){this.helpTipPosition=t.coordinate},handleDrawStart:function(t){var e=this;this.value=0;var i,n=t.feature.getGeometry(),r=t.coordinate;this.changeListener=n.on("change",(function(t){var n=t.target;"line"===e.type?(i=e.formatLength(n),r=n.getLastCoordinate()):"area"===e.type&&(i=e.formatArea(n),r=n.getInteriorPoint().getCoordinates()),e.helpTip=e.endTip,e.$nextTick((function(){e.measureTipPosition=r,e.measureTip=i}))}))},handleDelete:function(t,e){this.$refs.draw.removeFeature(t.feature),this.measures.splice(e,1)},handleDrawEnd:function(t){var e=this,i=t.feature;this.changeListener&&Object(h.b)(this.changeListener),this.measures.push({feature:i,position:this.measureTipPosition,content:this.measureTip}),this.$nextTick((function(){e.helpTip=e.startTip,e.helpTipPosition=null})),setTimeout((function(){e.measureTipPosition=null}),0),this.$emit("end",this.value)},clear:function(){this.$refs.draw&&this.$refs.draw.clear()}},beforeDestroy:function(){this.$refs.draw&&this.$refs.draw.finish(),this.myMap.map&&this.myMap.map.un("pointermove",this.handlePointerMove)}};o.default.use(r.a);var l=u,d=i(39),p=Object(d.a)(l,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("MapDraw",{ref:"draw",attrs:{brush:t.brush,effect:t.effect,type:t.drawType,manual:""},on:{ready:t.init,drawstart:t.handleDrawStart,drawend:t.handleDrawEnd}}),t._v(" "),t._l(t.measures,(function(e,n){return i("my-map-html",{key:n,staticClass:"my-map-measure__tip",class:"is-"+t.theme,attrs:{positioning:"bottom-center",position:e.position,offset:[0,-7]}},[i("span",{domProps:{innerHTML:t._s(e.content)}}),t._v(" "),i("i",{staticClass:"my-map-measure__delete el-icon-delete",on:{click:function(i){return t.handleDelete(e,n)}}})])})),t._v(" "),t.helpTipPosition&&!t.disabled?i("my-map-html",{ref:"helpTooltip",staticClass:"my-map-measure__help",class:"is-"+t.theme,attrs:{offset:[15,0],positioning:"center-left",position:t.helpTipPosition}},[t._v("\n    "+t._s(t.helpTip)+"\n  ")]):t._e(),t._v(" "),t.measureTipPosition?i("my-map-html",{staticClass:"my-map-measure__tip",class:"is-"+t.theme,attrs:{position:t.measureTipPosition,offset:[0,-15],positioning:"bottom-center"}},[i("span",{domProps:{innerHTML:t._s(t.measureTip)}})]):t._e()],2)}),[],!1,null,null,null).exports;i(1077),e.a=Object(n.a)(p)},2490:function(t,e,i){"use strict";i.r(e);var n=i(1203),r=i(361),o=i(0);o.default.use(r.a),o.default.use(n.a);var s={},a=i(39),h=Object(a.a)(s,(function(){var t=this.$createElement,e=this._self._c||t;return e("my-map",[e("my-map-measure",{attrs:{type:"area"}})],1)}),[],!1,null,null,null);e.default=h.exports},296:function(t,e,i){"use strict";i.d(e,"a",(function(){return n}));i(65),"My".toLowerCase();function n(t){return t.install=function(e){return"undefined"!=typeof window&&i(301).default(t),e.component(t.name,t)},t}},297:function(t,e,i){"use strict";i(306);var n={version:"4.0.0-99",debug:!1,appName:null,routePrefix:null,router:{mode:"hash",base:"/"},autoRoutes:!0,vuex:{strict:!1},keys:{code:"code",data:"data",message:"msg",total:"total",list:"list",page:"page",limit:"limit",pages:"pages"},statusCode:{success:0,notLogin:401,authorize:403,error:500},axios:{headers:{"Content-Type":"application/json;charset=UTF-8"},timeout:0,withCredentials:!0,responseType:"json",maxContentLength:-1},svg:{viewBox:"0 0 1024 1024",width:"1em",height:"1em",fill:"currentColor"},access:{},mock:{timeout:"50-200"},scale:{width:1920,height:1080,disabled:!0,lock:!0},analysis:!1,microApp:{prefetch:!1,singular:!0,sandbox:!0}};e.a=n},301:function(t,e,i){"use strict";i.r(e);i(160),i(65);var n=i(297),r=!1,o=[],s=null;n.a.analysis&&function(){if(!r){var t="c4e5f73318b5cb0c389e3d9a05f831cc",e=window._hmt;if(!e||e&&e.id!==t){var i=document.createElement("script");i.src="https://hm.baidu.com/hm.js?".concat(t);var n=document.getElementsByTagName("script")[0];n&&n.parentNode.insertBefore(i,n)}r=!0}}(),e.default=function(t){var e;n.a.analysis&&(e=t.name,o.push(e),clearTimeout(s),s=setTimeout((function(){if(window._hmt&&e){var t=window.location.host,i=window.location.href;window._hmt.push(["_trackEvent",t,o.join(","),n.a.version,i]),o=[]}}),3e3))}},356:function(t,e,i){"use strict";i.d(e,"a",(function(){return Q}));i(162),i(67);var n=i(295),r=i(41),o=i(359),s=i(443),a=i(450),h=i(355),c=i(453),u=i(436),l=i(337),d=i(442),p=(i(160),i(65),i(7),i(94),i(23)),f=i(47),g=i(109),y=i(110),m=i(107),_=i(108),v=i(420),b=i(431),O="METER",C="KILOMETER",w="DEGREE",j="INCH",P="FOOT",x="ISERVER";function T(t,e,i){var n=t*e*(1/.0254)*function(t){var e;if(t===O)e=1;else if(t===w)e=2*Math.PI*6378137/360;else if(t===C)e=.001;else if(t===j)e=1/.025399999918;else{if(t!==P)return e;e=.3048}return e}(i);return n=1/n}function E(t,e,i){var n=t*e*(1/.0254)*this.getMeterPerMapUnit(i);return n=1/n}var F=function(t){Object(m.a)(i,t);var e=Object(_.a)(i);function i(t){var n;if(Object(p.a)(this,i),void 0===(t=t||{}).url)return Object(g.a)(n);t.format=t.format?t.format:"png";var r=t.url+"/tileImage."+t.format+"?";t.serverType=t.serverType||x,n=e.call(this,{attributions:t.attributions,cacheSize:t.cacheSize,crossOrigin:t.crossOrigin,logo:t.logo,opaque:t.opaque,projection:t.projection,reprojectionErrorThreshold:t.reprojectionErrorThreshold,state:t.state,tileClass:t.tileClass,tileGrid:t.tileGrid,tileLoadFunction:t.tileLoadFunction,tilePixelRatio:t.tilePixelRatio,tileUrlFunction:function(e,n,r){o.tileGrid||(o.extent?(o.tileGrid=i.createTileGrid(t.extent),o.resolutions&&(o.tileGrid.resolutions=o.resolutions)):("EPSG:3857"===r.getCode()&&(o.tileGrid=i.createTileGrid([-20037508.3427892,-20037508.3427892,20037508.3427892,20037508.3427892]),o.extent=[-20037508.3427892,-20037508.3427892,20037508.3427892,20037508.3427892]),"EPSG:4326"===r.getCode()&&(o.tileGrid=i.createTileGrid([-180,-90,180,90]),o.extent=[-180,-90,180,90])));o.origin=o.tileGrid.getOrigin(0);var s=e[0],h=e[1],c=-e[2]-1,u=o.tileGrid.getResolution(s),l=r.getUnits();"degrees"===l&&(l=w);"m"===l&&(l=O);var d=T(u,96,l),p=Object(v.c)(o.tileGrid.getTileSize(s,o.tmpSize)),f=a.call(o)+encodeURI("&x="+h+"&y="+c+"&width="+p[0]+"&height="+p[1]+"&scale="+d);o.tileProxy&&(f=o.tileProxy+encodeURIComponent(f));o.cacheEnabled||(f+="&_t="+(new Date).getTime());return f},url:t.url,urls:t.urls,wrapX:void 0!==t.wrapX&&t.wrapX,cacheEnabled:t.cacheEnabled,layersID:t.layersID}),t.tileProxy&&(n.tileProxy=t.tileProxy),n.options=t,n._url=t.url,n.tileSetsIndex=-1,n.tempIndex=-1;var o=Object(y.a)(n);function s(){var e={};return e.redirect=void 0!==t.redirect&&t.redirect,e.transparent=void 0===t.transparent||t.transparent,e.cacheEnabled=!(!1===t.cacheEnabled),this.cacheEnabled=e.cacheEnabled,e._cache=e.cacheEnabled,this.origin&&(e.origin=JSON.stringify({x:this.origin[0],y:this.origin[1]})),t.prjCoordSys&&(e.prjCoordSys=JSON.stringify(t.prjCoordSys)),t.layersID&&(e.layersID=t.layersID.toString()),t.overlapDisplayed?e.overlapDisplayed=!0:(e.overlapDisplayed=!1,t.overlapDisplayedOptions&&(e.overlapDisplayedOptions=this.overlapDisplayedOptions.toString())),t.cacheEnabled&&t.tileversion&&(e.tileversion=t.tileversion.toString()),e}function a(){return this._paramsChanged&&(this._layerUrl=h.call(this),this._paramsChanged=!1),this._layerUrl||h.call(this)}function h(){return this._layerUrl=r+encodeURI(c.call(this)),this._layerUrl}function c(){this.requestParams=this.requestParams||s.call(this);var t=[];for(var e in this.requestParams)t.push(e+"="+this.requestParams[e]);return t.join("&")}return n}return Object(f.a)(i,[{key:"setTileSetsInfo",value:function(t){this.tileSets=t,Array.isArray(this.tileSets)&&(this.tileSets=t[0]),this.tileSets&&(this.dispatchEvent({type:"tilesetsinfoloaded",value:{tileVersions:this.tileSets.tileVersions}}),this.changeTilesVersion())}},{key:"lastTilesVersion",value:function(){this.tempIndex=this.tileSetsIndex-1,this.changeTilesVersion()}},{key:"nextTilesVersion",value:function(){this.tempIndex=this.tileSetsIndex+1,this.changeTilesVersion()}},{key:"changeTilesVersion",value:function(){var t=this;if(null!=t.tileSets&&!(t.tempIndex===t.tileSetsIndex||this.tempIndex<0)){var e=t.tileSets.tileVersions;if(e&&t.tempIndex<e.length&&t.tempIndex>=0){var i=e[t.tempIndex].name;t.mergeTileVersionParam(i)&&(t.tileSetsIndex=t.tempIndex,t.dispatchEvent({type:"tileversionschanged",value:{tileVersion:e[t.tempIndex]}}))}}}},{key:"updateCurrentTileSetsIndex",value:function(t){this.tempIndex=t}},{key:"mergeTileVersionParam",value:function(t){return!!t&&(this.requestParams.tileversion=t,this._paramsChanged=!0,this.refresh(),!0)}}],[{key:"optionsFromMapJSON",value:function(t,e){var i={};i.url=t,i.crossOrigin="anonymous";var n=[e.bounds.left,e.bounds.bottom,e.bounds.right,e.bounds.top],r=function(){var t,i=n[2]-n[0],r=n[3]-n[1],o=i>=r?i:r;t=o===i?o/e.viewer.width:o/e.viewer.height;var s=[],a=O;e.coordUnit===w&&(a=w);if(e.visibleScalesEnabled&&e.visibleScales&&e.visibleScales.length>0)for(var h=0;h<e.visibleScales.length;h++)s.push(E(e.visibleScales[h],96,a));else for(var c=0;c<17;c++)s.push(t/Math.pow(2,c));return s.sort((function(t,e){return e-t}))}();return i.tileGrid=new l.a({extent:n,resolutions:r}),i}},{key:"createTileGrid",value:function(t,e,i,n,r){var o=Object(b.a)({extent:t,maxZoom:e,minZoom:i,tileSize:n});return new l.a({extent:t,minZoom:i,origin:r,resolutions:o.getResolutions(),tileSize:o.getTileSize()})}}]),i}(u.a),S=i(321),M=i(340),G=i(357),I=(i(40),i(68),i(451)),L=i.n(I),R=new M.b({code:"baidu",extent:[-20037726.37,-12474104.17,20037726.37,12474104.17],units:"m"});Object(M.d)(R),Object(M.c)("EPSG:4326",R,L.a.ll2bmerc,L.a.bmerc2ll),Object(M.c)("EPSG:3857",R,L.a.smerc2bmerc,L.a.bmerc2smerc);for(var k=new Array(19),N=0;N<19;++N)k[N]=Math.pow(2,18-N);var A=function(t){return new o.a({source:new h.a({projection:"baidu",maxZoom:18,tileUrlFunction:function(e){var i=e[1],n=-e[2]-1,r=e[0];i<0&&(i="M"+-i),n<0&&(n="M"+-n);var o=Math.ceil(5*Math.random());return t.url.replace(/{x}/g,i).replace(/{y}/g,n).replace(/{z}/g,r).replace(/{n}/g,o)},tileGrid:new l.a({resolutions:k,origin:[0,0]})})})},D="http://webrd03.is.autonavi.com/appmaptile?style=8&x={x}&y={y}&z={z}&lang=zh_cn",V="http://online{n}.map.bdimg.com/tile/?qt=vtile&x={x}&y={y}&z={z}&styles=pl&scaler=1&udt=20190718",B="http://10.8.6.103/PGIS_S_TileMapServer/Maps/BJSL/EzMap?Service=getImage&Type=RGB&ZoomOffset=0",U="http://53.1.238.17/iserver/services/map-pgisvec/rest/maps/pgisvecv1",Y="http://68.26.21.71/images/GetImage.do?method=showImageRedisBytable&jinyi_admin:MA_PGISSLDT&version=v1";function $(){for(var t=[],e=0;e<20;e++){var i=e<7?[64,64]:[107.5,28];t.push(i)}return t}function H(){for(var t=[],e=0;e<20;e++){var i=2.0000081722216954/Math.pow(2,e);t.push(i)}return t}function X(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"EPSG:4326",e=256,i=Object(M.i)(t),n=i.getExtent(),r=Object(S.E)(n)/e,o=[],s=[],a=0;a<=20;a++)o[a]=a,s[a]=r/Math.pow(2,a);return new d.b({origin:Object(S.C)(n),resolutions:s,matrixIds:o})}function z(t){var e=t.layers.map((function(t){return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"vec_c";return new o.a({source:new h.a({url:"http://t{0-7}.tianditu.com/DataServer?T="+t+"&x={x}&y={y}&l={z}&tk=464554f64aa4f4e90e0321c17a57a331"})})}(t)}));return new s.a({layers:e})}function q(t){var e=X(),i=t.url;return new o.a({source:new c.a({url:i,tileGrid:e}),wrapX:!1})}function W(t){var e=t.url,i=X();return new o.a({source:new c.a({url:"",crossOrigin:"Anonymous",tileGrid:i,tileLoadFunction:function(t,i){var n=Object(G.c)(i),r={Row:n.TileRow,Col:n.TileCol,Zoom:n.TileMatrix,V:"1.0.0"};t.getImage().src="".concat(e,"&").concat(Object(G.d)(r))}}),wrapX:!1})}function K(t){if("function"==typeof t.url){var e=t.url,i=X();return new o.a({source:new c.a({url:"",crossOrigin:"Anonymous",tileGrid:i,tileLoadFunction:function(t,i){var n=Object(G.c)(i);t.getImage().src=e(n)}}),wrapX:!1})}return W(t)}function Z(t){return new o.a({source:new F({url:t.url}),projection:t.projection||"EPSG:4326"})}function J(t){var e=t.url;return new o.a({projection:t.projection||"EPSG:4326",url:"".concat(e,"&l={z}&x={y}&y={x}"),tileGrid:new l.a({origin:t.origins||$(),resolutions:t.resolutions||H()})})}function Q(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if("function"==typeof t)return t({TileLayer:o.a,LayerGroup:s.a,OSM:a.a,XYZ:h.a,WMTS:c.a,TileImage:u.a,TileGrid:l.a,WMTSGrid:d.b,getWidth:S.E,getTopLeft:S.C,getProj:M.i});var i="object"===Object(r.a)(t)?Object(n.a)({},t):{type:t},p=i.type;switch(delete i.type,p){case"OSM":return new o.a(Object(n.a)(Object(n.a)({},e),{},{source:new a.a(i)}));case"XYZ":return new o.a(Object(n.a)(Object(n.a)({},e),{},{source:new h.a(i)}));case"Amap":return new o.a(Object(n.a)(Object(n.a)({},e),{},{source:new h.a(Object(n.a)({url:D},i))}));case"Baidu":return A(Object(n.a)({url:V},i));case"TDT":return z(Object(n.a)({layers:["vec_c","vec_w","cva_w","ibo_w"]},i));case"Founder":return q(Object(n.a)({url:"http://127.0.0.1:3000/proxy"},i));case"Ez":return W(Object(n.a)({url:B},i));case"Super":return Z(Object(n.a)({url:U},i));case"Fc":return J(Object(n.a)({url:Y},i));case"WMTS":return K(i)}}},357:function(t,e,i){"use strict";i.d(e,"c",(function(){return s})),i.d(e,"d",(function(){return a})),i.d(e,"a",(function(){return h})),i.d(e,"b",(function(){return c}));i(91),i(160),i(65),i(428),i(40),i(94),i(401),i(68),i(440),i(364);var n=i(438),r=i.n(n),o=/^(http|https):\/\/[\w.:]*\//;function s(t,e,i){var n,r={};t=(t||location.search).replace(/^[^]*\?/,""),e=e||"&",i=i||"=";for(var o=new RegExp("(?:^|\\"+e+")([^\\"+i+"\\"+e+"]+)(?:\\"+i+"([^\\"+e+"]*))?","g");null!==(n=o.exec(t));)n[1]!==t&&(r[decodeURIComponent(n[1])]=decodeURIComponent(n[2]||""));return r}function a(t){var e=[];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.push([i,encodeURIComponent(t[i])].join("="));return e.join("&")}function h(t){var e=t.match(o);return e?e[0]:""}function c(t,e){var i=[],n=h(t),o=r()(t.replace(n,""),i).exec(e.split("?")[0].replace(n,"")),s={};return o&&o.length>0&&i.forEach((function(t,e){s[t.name]=o[e+1]})),s}},360:function(t,e,i){},361:function(t,e,i){"use strict";var n=i(296),r=(i(162),i(19),i(344),i(91),i(160),i(67),i(300),i(393),i(341),i(92),i(295)),o=i(69),s=i(452),a=i(437),h=i(429),c=i(430),u=i(398),l=i(427),d=i(418),p=i(356),f=i(320),g={name:"MyMap",provide:function(){return{myMap:this}},props:{zoom:{type:Number,default:10},minZoom:{type:Number,default:1},maxZoom:{type:Number,default:20},center:{type:Array,default:function(){return[113.261999,23.130592]}},adapter:{type:[String,Object,Function],default:"Baidu"},projection:{type:String,default:"EPSG:4326"},width:{type:String,default:"100%"},height:{type:String,default:"400px"},dragPan:{type:Boolean,default:!0},mouseWheelZoom:{type:Boolean,default:!0},mapOptions:Object,viewOptions:Object,invert:Boolean,filter:Object},render:function(){var t=arguments[0];return t("div",{class:this.classes,style:this.styles},[this.$slots.default])},data:function(){return{cursor:null,viewWidth:0,viewHeight:0}},computed:{classes:function(){return{"my-map":!0,"my-map--invert":this.invert}},styles:function(){return{width:this.width,height:this.height,cursor:this.cursor?"pointer":""}},filterStyle:function(){return this.filter?Object.entries(this.filter).map((function(t){var e=Object(o.a)(t,2),i=e[0],n=e[1];return"hue-rotate"===i?"".concat(i,"(").concat(n,"deg)"):"".concat(i,"(").concat(n,")")})).join(" "):null}},watch:{dragPan:function(t){this.setActive(h.a,t)},mouseWheelZoom:function(t){this.setActive(c.a,t)},filterStyle:function(){this.setCanvasFilter()}},methods:{setActive:function(t,e){if(this.map){var i=this.map.getInteractions().getArray().find((function(e){return e instanceof t}));i&&i.setActive(e)}},init:function(){var t=this.$props,e=t.center,i=t.projection,n=t.zoom,o=t.minZoom,l=t.maxZoom,d=Object(p.a)(this.adapter);d.__MY_LAYER__=!0;var g=new a.a(Object(r.a)(Object(r.a)({},this.viewOptions||{}),{},{projection:i,center:e,zoom:n,minZoom:o,maxZoom:l}));this.map=new s.a(Object(r.a)(Object(r.a)({},this.mapOptions||{}),{},{layers:[].concat(d),view:g,target:this.$el,controls:[],interactions:[new h.a,new c.a,new u.b({handleEvent:this.handleEvent})]})),this.setActive(h.a,this.dragPan),this.setActive(c.a,this.mouseWheelZoom),this.bindMapEvents(),this.$emit("ready",this.map,this),Object(f.addResizeListener)(this.$el,this.setViewSize),this.setCanvasFilter()},dispose:function(){this.map&&(this.map.disposeInternal(),this.unbindMapEvents(),Object(f.removeResizeListener)(this.$el,this.setViewSize))},getFeatureAtPixel:function(t){return this.map?this.map.forEachFeatureAtPixel(t,(function(t){return t})):null},setCursor:function(t){var e=this.getFeatureVM(t);this.cursor=e&&(e.cursor||e.$listeners.click)},clickTrigger:function(t,e){if(t){var i=this.getFeatureVM(t);i&&i.$emit("click",e,t)}},getLayer:function(){return this.map?this.map.getLayers().getArray().find((function(t){return t.__MY_LAYER__})):null},getFeatureVM:function(t){if(t){var e=(t.get("features")||[])[0]||t;return e.__vm__||e.get("__vm__")}},enterAndLeaveTrigger:function(t,e){if(!this.featureAtPixel&&t){this.$emit("mouseenter",e,t);var i=this.getFeatureVM(t);i&&i.$emit("mouseenter",e,t)}if(this.featureAtPixel&&!t){this.$emit("mouseleave",e,this.featureAtPixel);var n=this.getFeatureVM(this.featureAtPixel);n&&n.$emit("mouseleave",e,this.featureAtPixel)}if(this.featureAtPixel&&t&&this.featureAtPixel!==t){this.$emit("mouseleave",e,this.featureAtPixel),this.$emit("mouseenter",e,t);var r=this.getFeatureVM(this.featureAtPixel);r&&r.$emit("mouseleave",e,this.featureAtPixel);var o=this.getFeatureVM(t);o&&o.$emit("mouseenter",e,t)}this.featureAtPixel=t},handleEvent:function(t){var e=t.type,i=this.getFeatureAtPixel(t.pixel);switch(e){case"pointermove":this.setCursor(i),this.enterAndLeaveTrigger(i,t);break;case"click":this.clickTrigger(i,t)}return!0},bindMapEvents:function(){var t=this;this.map&&(Object.entries(this.$listeners).forEach((function(e){var i=Object(o.a)(e,2),n=i[0],r=i[1];return t.map.on(n,r)})),this.map.on())},unbindMapEvents:function(){var t=this;this.map&&Object.entries(this.$listeners).forEach((function(e){var i=Object(o.a)(e,2),n=i[0],r=i[1];return t.map.un(n,r)}))},resize:function(){this.map.updateSize()},moveTo:function(t){this.map&&this.map.getView().animate({center:t,duration:200})},zoomTo:function(t){this.map&&this.map.getView().animate({zoom:Number.parseInt(t),duration:200})},zoomIn:function(){if(this.map){var t=this.map.getView();this.zoomTo(t.getZoom()+1)}},zoomOut:function(){if(this.map){var t=this.map.getView();this.zoomTo(t.getZoom()-1)}},mapReady:function(t){this.map?t&&t(this.map,this):this.$once("ready",t)},createVectorLayer:function(){if(this.map&&!this.vectorLayer){var t=new d.a;return this.vectorLayer=new l.a({source:t,zIndex:1}),this.map.addLayer(this.vectorLayer),this.vectorLayer}},addFeature:function(t){if(this.map){this.vectorLayer||this.createVectorLayer();var e=this.vectorLayer.getSource(),i=[].concat(t);e.addFeatures(i)}},removeFeature:function(t){if(this.vectorLayer){var e=this.vectorLayer.getSource();[].concat(t).forEach((function(t){return e.removeFeature(t)}))}},getMetersPerUnit:function(){return this.map?this.map.getView().getProjection().getMetersPerUnit():0},setViewSize:function(){var t=this.$el.getBoundingClientRect();this.viewWidth=t.width||0,this.viewHeight=t.height||0,this.map&&this.map.updateSize(),this.$emit("viewSizeChange",t)},setCanvasFilter:function(){if(this.map){var t=this.map.getViewport();t&&(t.style.filter=this.filterStyle)}}},mounted:function(){this.init()},beforeDestroy:function(){this.dispose()}};i(449),i(360),e.a=Object(n.a)(g)},388:function(t,e,i){"use strict";i(91),i(161),i(341),i(165),i(92);var n=i(69),r=i(41),o=i(522),s=i(521),a=function(){function t(t){var e=t||{};this.font_=e.font,this.rotation_=e.rotation,this.rotateWithView_=e.rotateWithView,this.scale_=e.scale,this.text_=e.text,this.textAlign_=e.textAlign,this.textBaseline_=e.textBaseline,this.fill_=void 0!==e.fill?e.fill:new o.a({color:"#333"}),this.maxAngle_=void 0!==e.maxAngle?e.maxAngle:Math.PI/4,this.placement_=void 0!==e.placement?e.placement:s.a.POINT,this.overflow_=!!e.overflow,this.stroke_=void 0!==e.stroke?e.stroke:null,this.offsetX_=void 0!==e.offsetX?e.offsetX:0,this.offsetY_=void 0!==e.offsetY?e.offsetY:0,this.backgroundFill_=e.backgroundFill?e.backgroundFill:null,this.backgroundStroke_=e.backgroundStroke?e.backgroundStroke:null,this.padding_=void 0===e.padding?null:e.padding}return t.prototype.clone=function(){return new t({font:this.getFont(),placement:this.getPlacement(),maxAngle:this.getMaxAngle(),overflow:this.getOverflow(),rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:this.getScale(),text:this.getText(),textAlign:this.getTextAlign(),textBaseline:this.getTextBaseline(),fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,offsetX:this.getOffsetX(),offsetY:this.getOffsetY(),backgroundFill:this.getBackgroundFill()?this.getBackgroundFill().clone():void 0,backgroundStroke:this.getBackgroundStroke()?this.getBackgroundStroke().clone():void 0,padding:this.getPadding()})},t.prototype.getOverflow=function(){return this.overflow_},t.prototype.getFont=function(){return this.font_},t.prototype.getMaxAngle=function(){return this.maxAngle_},t.prototype.getPlacement=function(){return this.placement_},t.prototype.getOffsetX=function(){return this.offsetX_},t.prototype.getOffsetY=function(){return this.offsetY_},t.prototype.getFill=function(){return this.fill_},t.prototype.getRotateWithView=function(){return this.rotateWithView_},t.prototype.getRotation=function(){return this.rotation_},t.prototype.getScale=function(){return this.scale_},t.prototype.getStroke=function(){return this.stroke_},t.prototype.getText=function(){return this.text_},t.prototype.getTextAlign=function(){return this.textAlign_},t.prototype.getTextBaseline=function(){return this.textBaseline_},t.prototype.getBackgroundFill=function(){return this.backgroundFill_},t.prototype.getBackgroundStroke=function(){return this.backgroundStroke_},t.prototype.getPadding=function(){return this.padding_},t.prototype.setOverflow=function(t){this.overflow_=t},t.prototype.setFont=function(t){this.font_=t},t.prototype.setMaxAngle=function(t){this.maxAngle_=t},t.prototype.setOffsetX=function(t){this.offsetX_=t},t.prototype.setOffsetY=function(t){this.offsetY_=t},t.prototype.setPlacement=function(t){this.placement_=t},t.prototype.setRotateWithView=function(t){this.rotateWithView_=t},t.prototype.setFill=function(t){this.fill_=t},t.prototype.setRotation=function(t){this.rotation_=t},t.prototype.setScale=function(t){this.scale_=t},t.prototype.setStroke=function(t){this.stroke_=t},t.prototype.setText=function(t){this.text_=t},t.prototype.setTextAlign=function(t){this.textAlign_=t},t.prototype.setTextBaseline=function(t){this.textBaseline_=t},t.prototype.setBackgroundFill=function(t){this.backgroundFill_=t},t.prototype.setBackgroundStroke=function(t){this.backgroundStroke_=t},t.prototype.setPadding=function(t){this.padding_=t},t}(),h=i(1011),c=i(1012),u=i(1670),l=i(1013),d=i(757),p={fill:o.a,text:a,stroke:h.a,circle:c.a,icon:u.a,regularShape:l.a,backgroundFill:o.a,backgroundStroke:h.a},f=[c.a,u.a,l.a];function g(t){return"object"===Object(r.a)(t)}function y(t,e,i){var n,r;if(null!=i)return t?["fill","backgroundFill"].includes(e)?(r=g(n=i)?n:{color:n},new o.a(r)):"text"===e?g(i)?m(i,t):i:m(i,t):i}function m(t,e){var i={};return Object.entries(t).forEach((function(t){var e=Object(n.a)(t,2),r=e[0],o=e[1],s=p[r];"font"===r&&(o="".concat(o," sans-serif")),i[f.includes(s)?"image":r]=y(s,r,o)})),new(e||d.c)(i)}e.a=m},397:function(t,e,i){"use strict";var n,r=i(400),o=i(403),s=i(386),a=i(407),h=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),c=function(t){function e(e){var i=t.call(this)||this;if(i.id_=void 0,i.geometryName_="geometry",i.style_=null,i.styleFunction_=void 0,i.geometryChangeKey_=null,i.addEventListener(Object(a.b)(i.geometryName_),i.handleGeometryChanged_),e)if("function"==typeof e.getSimplifiedGeometry){var n=e;i.setGeometry(n)}else{var r=e;i.setProperties(r)}return i}return h(e,t),e.prototype.clone=function(){var t=new e(this.getProperties());t.setGeometryName(this.getGeometryName());var i=this.getGeometry();i&&t.setGeometry(i.clone());var n=this.getStyle();return n&&t.setStyle(n),t},e.prototype.getGeometry=function(){return this.get(this.geometryName_)},e.prototype.getId=function(){return this.id_},e.prototype.getGeometryName=function(){return this.geometryName_},e.prototype.getStyle=function(){return this.style_},e.prototype.getStyleFunction=function(){return this.styleFunction_},e.prototype.handleGeometryChange_=function(){this.changed()},e.prototype.handleGeometryChanged_=function(){this.geometryChangeKey_&&(Object(o.c)(this.geometryChangeKey_),this.geometryChangeKey_=null);var t=this.getGeometry();t&&(this.geometryChangeKey_=Object(o.a)(t,s.a.CHANGE,this.handleGeometryChange_,this)),this.changed()},e.prototype.setGeometry=function(t){this.set(this.geometryName_,t)},e.prototype.setStyle=function(t){this.style_=t,this.styleFunction_=t?function(t){if("function"==typeof t)return t;var e;Array.isArray(t)?e=t:(Object(r.a)("function"==typeof t.getZIndex,41),e=[t]);return function(){return e}}(t):void 0,this.changed()},e.prototype.setId=function(t){this.id_=t,this.changed()},e.prototype.setGeometryName=function(t){this.removeEventListener(Object(a.b)(this.geometryName_),this.handleGeometryChanged_),this.geometryName_=t,this.addEventListener(Object(a.b)(this.geometryName_),this.handleGeometryChanged_),this.handleGeometryChanged_()},e}(a.a);e.a=c},475:function(t,e,i){"use strict";var n=i(1),r=i(114),o=i(44),s=i(16),a=i(15),h=i(116),c=i(52),u=i(51),l=i(17),d=u("splice"),p=l("splice",{ACCESSORS:!0,0:0,1:2}),f=Math.max,g=Math.min;n({target:"Array",proto:!0,forced:!d||!p},{splice:function(t,e){var i,n,u,l,d,p,y=a(this),m=s(y.length),_=r(t,m),v=arguments.length;if(0===v?i=n=0:1===v?(i=0,n=m-_):(i=v-2,n=g(f(o(e),0),m-_)),m+i-n>9007199254740991)throw TypeError("Maximum allowed length exceeded");for(u=h(y,n),l=0;l<n;l++)(d=_+l)in y&&c(u,l,y[d]);if(u.length=n,i<n){for(l=_;l<m-n;l++)p=l+i,(d=l+n)in y?y[p]=y[d]:delete y[p];for(l=m;l>m-n+i;l--)delete y[l-1]}else if(i>n)for(l=m-n;l>_;l--)p=l+i-1,(d=l+n-1)in y?y[p]=y[d]:delete y[p];for(l=0;l<i;l++)y[l+_]=arguments[l+2];return y.length=m-n+i,u}})},484:function(t,e,i){"use strict";var n,r=i(392),o=i(321),s=i(514),a=i(389),h=i(458),c=i(520),u=i(464),l=i(481),d=i(508),p=i(531),f=i(646),g=i(645),y=i(515),m=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),_=function(t){function e(e,i){var n=t.call(this)||this;return n.flatMidpoint_=null,n.flatMidpointRevision_=-1,n.maxDelta_=-1,n.maxDeltaRevision_=-1,void 0===i||Array.isArray(e[0])?n.setCoordinates(e,i):n.setFlatCoordinates(i,e),n}return m(e,t),e.prototype.appendCoordinate=function(t){this.flatCoordinates?Object(r.c)(this.flatCoordinates,t):this.flatCoordinates=t.slice(),this.changed()},e.prototype.clone=function(){return new e(this.flatCoordinates.slice(),this.layout)},e.prototype.closestPointXY=function(t,e,i,n){return n<Object(o.e)(this.getExtent(),t,e)?n:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(Object(c.e)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),Object(c.d)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!1,t,e,i,n))},e.prototype.forEachSegment=function(t){return Object(g.a)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)},e.prototype.getCoordinateAtM=function(t,e){if(this.layout!=s.a.XYM&&this.layout!=s.a.XYZM)return null;var i=void 0!==e&&e;return Object(d.b)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,i)},e.prototype.getCoordinates=function(){return Object(l.a)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},e.prototype.getCoordinateAt=function(t,e){return Object(d.a)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,e)},e.prototype.getLength=function(){return Object(f.a)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},e.prototype.getFlatMidpoint=function(){return this.flatMidpointRevision_!=this.getRevision()&&(this.flatMidpoint_=this.getCoordinateAt(.5,this.flatMidpoint_),this.flatMidpointRevision_=this.getRevision()),this.flatMidpoint_},e.prototype.getSimplifiedGeometryInternal=function(t){var i=[];return i.length=Object(y.a)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,i,0),new e(i,s.a.XY)},e.prototype.getType=function(){return a.a.LINE_STRING},e.prototype.intersectsExtent=function(t){return Object(p.a)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)},e.prototype.setCoordinates=function(t,e){this.setLayout(e,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=Object(u.b)(this.flatCoordinates,0,t,this.stride),this.changed()},e}(h.a);e.a=_},508:function(t,e,i){"use strict";i.d(e,"a",(function(){return o})),i.d(e,"b",(function(){return s})),i.d(e,"c",(function(){return a}));var n=i(392),r=i(416);function o(t,e,i,o,s,a){var h=NaN,c=NaN,u=(i-e)/o;if(1===u)h=t[e],c=t[e+1];else if(2==u)h=(1-s)*t[e]+s*t[e+o],c=(1-s)*t[e+1]+s*t[e+o+1];else if(0!==u){for(var l=t[e],d=t[e+1],p=0,f=[0],g=e+o;g<i;g+=o){var y=t[g],m=t[g+1];p+=Math.sqrt((y-l)*(y-l)+(m-d)*(m-d)),f.push(p),l=y,d=m}var _=s*p,v=Object(n.a)(f,_);if(v<0){var b=(_-f[-v-2])/(f[-v-1]-f[-v-2]),O=e+(-v-2)*o;h=Object(r.c)(t[O],t[O+o],b),c=Object(r.c)(t[O+1],t[O+o+1],b)}else h=t[e+v*o],c=t[e+v*o+1]}return a?(a[0]=h,a[1]=c,a):[h,c]}function s(t,e,i,n,o,s){if(i==e)return null;var a;if(o<t[e+n-1])return s?((a=t.slice(e,e+n))[n-1]=o,a):null;if(t[i-1]<o)return s?((a=t.slice(i-n,i))[n-1]=o,a):null;if(o==t[e+n-1])return t.slice(e,e+n);for(var h=e/n,c=i/n;h<c;){var u=h+c>>1;o<t[(u+1)*n-1]?c=u:h=u+1}var l=t[h*n-1];if(o==l)return t.slice((h-1)*n,(h-1)*n+n);var d=(o-l)/(t[(h+1)*n-1]-l);a=[];for(var p=0;p<n-1;++p)a.push(Object(r.c)(t[(h-1)*n+p],t[h*n+p],d));return a.push(o),a}function a(t,e,i,n,r,o,a){if(a)return s(t,e,i[i.length-1],n,r,o);var h;if(r<t[n-1])return o?((h=t.slice(0,n))[n-1]=r,h):null;if(t[t.length-1]<r)return o?((h=t.slice(t.length-n))[n-1]=r,h):null;for(var c=0,u=i.length;c<u;++c){var l=i[c];if(e!=l){if(r<t[e+n-1])return null;if(r<=t[l-1])return s(t,e,l,n,r,!1);e=l}}return null}},590:function(t,e,i){"use strict";var n,r=i(392),o=i(321),s=i(389),a=i(457),h=i(458),c=i(464),u=i(481),l=i(416),d=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),p=function(t){function e(e,i){var n=t.call(this)||this;return i&&!Array.isArray(e[0])?n.setFlatCoordinates(i,e):n.setCoordinates(e,i),n}return d(e,t),e.prototype.appendPoint=function(t){this.flatCoordinates?Object(r.c)(this.flatCoordinates,t.getFlatCoordinates()):this.flatCoordinates=t.getFlatCoordinates().slice(),this.changed()},e.prototype.clone=function(){return new e(this.flatCoordinates.slice(),this.layout)},e.prototype.closestPointXY=function(t,e,i,n){if(n<Object(o.e)(this.getExtent(),t,e))return n;for(var r=this.flatCoordinates,s=this.stride,a=0,h=r.length;a<h;a+=s){var c=Object(l.f)(t,e,r[a],r[a+1]);if(c<n){n=c;for(var u=0;u<s;++u)i[u]=r[a+u];i.length=s}}return n},e.prototype.getCoordinates=function(){return Object(u.a)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},e.prototype.getPoint=function(t){var e=this.flatCoordinates?this.flatCoordinates.length/this.stride:0;return t<0||e<=t?null:new a.a(this.flatCoordinates.slice(t*this.stride,(t+1)*this.stride),this.layout)},e.prototype.getPoints=function(){for(var t=this.flatCoordinates,e=this.layout,i=this.stride,n=[],r=0,o=t.length;r<o;r+=i){var s=new a.a(t.slice(r,r+i),e);n.push(s)}return n},e.prototype.getType=function(){return s.a.MULTI_POINT},e.prototype.intersectsExtent=function(t){for(var e=this.flatCoordinates,i=this.stride,n=0,r=e.length;n<r;n+=i){var s=e[n],a=e[n+1];if(Object(o.h)(t,s,a))return!0}return!1},e.prototype.setCoordinates=function(t,e){this.setLayout(e,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=Object(c.b)(this.flatCoordinates,0,t,this.stride),this.changed()},e}(h.a);e.a=p},598:function(t,e,i){"use strict";e.a={BOTTOM_LEFT:"bottom-left",BOTTOM_CENTER:"bottom-center",BOTTOM_RIGHT:"bottom-right",CENTER_LEFT:"center-left",CENTER_CENTER:"center-center",CENTER_RIGHT:"center-right",TOP_LEFT:"top-left",TOP_CENTER:"top-center",TOP_RIGHT:"top-right"}},609:function(t,e,i){"use strict";var n,r=i(667),o=i(407),s=i(598),a=i(575),h=i(513),c=i(403),u=i(321),l=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),d="element",p="map",f="offset",g="position",y="positioning",m=function(t){function e(e){var i=t.call(this)||this;i.options=e,i.id=e.id,i.insertFirst=void 0===e.insertFirst||e.insertFirst,i.stopEvent=void 0===e.stopEvent||e.stopEvent,i.element=document.createElement("div"),i.element.className=void 0!==e.className?e.className:"ol-overlay-container "+a.d,i.element.style.position="absolute";var n=e.autoPan;return n&&"object"!=typeof n&&(n={animation:e.autoPanAnimation,margin:e.autoPanMargin}),i.autoPan=n||!1,i.rendered={transform_:"",visible:!0},i.mapPostrenderListenerKey=null,i.addEventListener(Object(o.b)(d),i.handleElementChanged),i.addEventListener(Object(o.b)(p),i.handleMapChanged),i.addEventListener(Object(o.b)(f),i.handleOffsetChanged),i.addEventListener(Object(o.b)(g),i.handlePositionChanged),i.addEventListener(Object(o.b)(y),i.handlePositioningChanged),void 0!==e.element&&i.setElement(e.element),i.setOffset(void 0!==e.offset?e.offset:[0,0]),i.setPositioning(void 0!==e.positioning?e.positioning:s.a.TOP_LEFT),void 0!==e.position&&i.setPosition(e.position),i}return l(e,t),e.prototype.getElement=function(){return this.get(d)},e.prototype.getId=function(){return this.id},e.prototype.getMap=function(){return this.get(p)},e.prototype.getOffset=function(){return this.get(f)},e.prototype.getPosition=function(){return this.get(g)},e.prototype.getPositioning=function(){return this.get(y)},e.prototype.handleElementChanged=function(){Object(h.d)(this.element);var t=this.getElement();t&&this.element.appendChild(t)},e.prototype.handleMapChanged=function(){this.mapPostrenderListenerKey&&(Object(h.e)(this.element),Object(c.c)(this.mapPostrenderListenerKey),this.mapPostrenderListenerKey=null);var t=this.getMap();if(t){this.mapPostrenderListenerKey=Object(c.a)(t,r.a.POSTRENDER,this.render,this),this.updatePixelPosition();var e=this.stopEvent?t.getOverlayContainerStopEvent():t.getOverlayContainer();this.insertFirst?e.insertBefore(this.element,e.childNodes[0]||null):e.appendChild(this.element),this.performAutoPan()}},e.prototype.render=function(){this.updatePixelPosition()},e.prototype.handleOffsetChanged=function(){this.updatePixelPosition()},e.prototype.handlePositionChanged=function(){this.updatePixelPosition(),this.performAutoPan()},e.prototype.handlePositioningChanged=function(){this.updatePixelPosition()},e.prototype.setElement=function(t){this.set(d,t)},e.prototype.setMap=function(t){this.set(p,t)},e.prototype.setOffset=function(t){this.set(f,t)},e.prototype.setPosition=function(t){this.set(g,t)},e.prototype.performAutoPan=function(){this.autoPan&&this.panIntoView(this.autoPan)},e.prototype.panIntoView=function(t){var e=this.getMap();if(e&&e.getTargetElement()&&this.get(g)){var i=this.getRect(e.getTargetElement(),e.getSize()),n=this.getElement(),r=this.getRect(n,[Object(h.c)(n),Object(h.b)(n)]),o=void 0===t.margin?20:t.margin;if(!Object(u.g)(i,r)){var s=r[0]-i[0],a=i[2]-r[2],c=r[1]-i[1],l=i[3]-r[3],d=[0,0];if(s<0?d[0]=s-o:a<0&&(d[0]=Math.abs(a)+o),c<0?d[1]=c-o:l<0&&(d[1]=Math.abs(l)+o),0!==d[0]||0!==d[1]){var p=e.getView().getCenterInternal(),f=e.getPixelFromCoordinateInternal(p),y=[f[0]+d[0],f[1]+d[1]],m=t.animation||{};e.getView().animateInternal({center:e.getCoordinateFromPixelInternal(y),duration:m.duration,easing:m.easing})}}}},e.prototype.getRect=function(t,e){var i=t.getBoundingClientRect(),n=i.left+window.pageXOffset,r=i.top+window.pageYOffset;return[n,r,n+e[0],r+e[1]]},e.prototype.setPositioning=function(t){this.set(y,t)},e.prototype.setVisible=function(t){this.rendered.visible!==t&&(this.element.style.display=t?"":"none",this.rendered.visible=t)},e.prototype.updatePixelPosition=function(){var t=this.getMap(),e=this.getPosition();if(t&&t.isRendered()&&e){var i=t.getPixelFromCoordinate(e),n=t.getSize();this.updateRenderedPosition(i,n)}else this.setVisible(!1)},e.prototype.updateRenderedPosition=function(t,e){var i=this.element.style,n=this.getOffset(),r=this.getPositioning();this.setVisible(!0);var o=Math.round(t[0]+n[0])+"px",a=Math.round(t[1]+n[1])+"px",h="0%",c="0%";r==s.a.BOTTOM_RIGHT||r==s.a.CENTER_RIGHT||r==s.a.TOP_RIGHT?h="-100%":r!=s.a.BOTTOM_CENTER&&r!=s.a.CENTER_CENTER&&r!=s.a.TOP_CENTER||(h="-50%"),r==s.a.BOTTOM_LEFT||r==s.a.BOTTOM_CENTER||r==s.a.BOTTOM_RIGHT?c="-100%":r!=s.a.CENTER_LEFT&&r!=s.a.CENTER_CENTER&&r!=s.a.CENTER_RIGHT||(c="-50%");var u="translate("+h+", "+c+") translate("+o+", "+a+")";this.rendered.transform_!=u&&(this.rendered.transform_=u,i.transform=u,i.msTransform=u)},e.prototype.getOptions=function(){return this.options},e}(o.a);e.a=m},659:function(t,e,i){"use strict";i(67),i(300);var n=i(295),r=i(609);e.a={name:"MyMapHtml",inject:["myMap"],props:{id:[Number,String],offset:{type:Array,default:function(){return[0,0]}},position:Array,positioning:{type:String,default:"center-center"},stopEvent:{type:Boolean,default:!0},insertFirst:Boolean,autoPan:{type:Boolean,default:!1},autoPanAnimation:{type:Object,default:function(){return{}}},autoPanMargin:{type:Number,default:20},visible:{type:Boolean,default:!0}},render:function(){var t=arguments[0];return t("div",{class:"my-map-html",style:this.styles,on:Object(n.a)({},this.$listeners)},[this.$slots.default])},computed:{styles:function(){return{cursor:this.$listeners.click?"pointer":""}}},watch:{$props:{deep:!0,handler:function(){try{this.dispose(),this.init()}catch(t){}}}},methods:{init:function(){if(this.$el){var t=Object(n.a)(Object(n.a)({},this.$props),{},{element:this.$el});this.overlay=new r.a(t),this.myMap.map.addOverlay(this.overlay),this.setPosition(this.position)}},setPosition:function(t){this.overlay&&this.overlay.setPosition(this.visible?t:null)},dispose:function(){this.overlay&&this.myMap&&this.myMap.map&&this.myMap.map.removeOverlay(this.overlay)}},mounted:function(){this.myMap.mapReady(this.init)},beforeDestroy:function(){this.dispose()}}},673:function(t,e,i){"use strict";var n,r=i(392),o=i(321),s=i(514),a=i(389),h=i(484),c=i(458),u=i(520),l=i(464),d=i(481),p=i(508),f=i(531),g=i(515),y=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),m=function(t){function e(e,i,n){var o=t.call(this)||this;if(o.ends_=[],o.maxDelta_=-1,o.maxDeltaRevision_=-1,Array.isArray(e[0]))o.setCoordinates(e,i);else if(void 0!==i&&n)o.setFlatCoordinates(i,e),o.ends_=n;else{for(var s=o.getLayout(),a=e,h=[],c=[],u=0,l=a.length;u<l;++u){var d=a[u];0===u&&(s=d.getLayout()),Object(r.c)(h,d.getFlatCoordinates()),c.push(h.length)}o.setFlatCoordinates(s,h),o.ends_=c}return o}return y(e,t),e.prototype.appendLineString=function(t){this.flatCoordinates?Object(r.c)(this.flatCoordinates,t.getFlatCoordinates().slice()):this.flatCoordinates=t.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()},e.prototype.clone=function(){return new e(this.flatCoordinates.slice(),this.layout,this.ends_.slice())},e.prototype.closestPointXY=function(t,e,i,n){return n<Object(o.e)(this.getExtent(),t,e)?n:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(Object(u.a)(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),Object(u.b)(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!1,t,e,i,n))},e.prototype.getCoordinateAtM=function(t,e,i){if(this.layout!=s.a.XYM&&this.layout!=s.a.XYZM||0===this.flatCoordinates.length)return null;var n=void 0!==e&&e,r=void 0!==i&&i;return Object(p.c)(this.flatCoordinates,0,this.ends_,this.stride,t,n,r)},e.prototype.getCoordinates=function(){return Object(d.b)(this.flatCoordinates,0,this.ends_,this.stride)},e.prototype.getEnds=function(){return this.ends_},e.prototype.getLineString=function(t){return t<0||this.ends_.length<=t?null:new h.a(this.flatCoordinates.slice(0===t?0:this.ends_[t-1],this.ends_[t]),this.layout)},e.prototype.getLineStrings=function(){for(var t=this.flatCoordinates,e=this.ends_,i=this.layout,n=[],r=0,o=0,s=e.length;o<s;++o){var a=e[o],c=new h.a(t.slice(r,a),i);n.push(c),r=a}return n},e.prototype.getFlatMidpoints=function(){for(var t=[],e=this.flatCoordinates,i=0,n=this.ends_,o=this.stride,s=0,a=n.length;s<a;++s){var h=n[s],c=Object(p.a)(e,i,h,o,.5);Object(r.c)(t,c),i=h}return t},e.prototype.getSimplifiedGeometryInternal=function(t){var i=[],n=[];return i.length=Object(g.b)(this.flatCoordinates,0,this.ends_,this.stride,t,i,0,n),new e(i,s.a.XY,n)},e.prototype.getType=function(){return a.a.MULTI_LINE_STRING},e.prototype.intersectsExtent=function(t){return Object(f.b)(this.flatCoordinates,0,this.ends_,this.stride,t)},e.prototype.setCoordinates=function(t,e){this.setLayout(e,t,2),this.flatCoordinates||(this.flatCoordinates=[]);var i=Object(l.c)(this.flatCoordinates,0,t,this.stride,this.ends_);this.flatCoordinates.length=0===i.length?0:i[i.length-1],this.changed()},e}(c.a);e.a=m},675:function(t,e,i){"use strict";var n=i(392),r=i(321),o=i(514),s=i(389),a=i(590),h=i(532),c=i(458),u=i(730);var l,d=i(520),p=i(695),f=i(464),g=i(481),y=i(753),m=i(531),_=i(767),v=i(515),b=(l=function(t,e){return(l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}l(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),O=function(t){function e(e,i,r){var o=t.call(this)||this;if(o.endss_=[],o.flatInteriorPointsRevision_=-1,o.flatInteriorPoints_=null,o.maxDelta_=-1,o.maxDeltaRevision_=-1,o.orientedRevision_=-1,o.orientedFlatCoordinates_=null,!r&&!Array.isArray(e[0])){for(var s=o.getLayout(),a=e,h=[],c=[],u=0,l=a.length;u<l;++u){var d=a[u];0===u&&(s=d.getLayout());for(var p=h.length,f=d.getEnds(),g=0,y=f.length;g<y;++g)f[g]+=p;Object(n.c)(h,d.getFlatCoordinates()),c.push(f)}i=s,e=h,r=c}return void 0!==i&&r?(o.setFlatCoordinates(i,e),o.endss_=r):o.setCoordinates(e,i),o}return b(e,t),e.prototype.appendPolygon=function(t){var e;if(this.flatCoordinates){var i=this.flatCoordinates.length;Object(n.c)(this.flatCoordinates,t.getFlatCoordinates());for(var r=0,o=(e=t.getEnds().slice()).length;r<o;++r)e[r]+=i}else this.flatCoordinates=t.getFlatCoordinates().slice(),e=t.getEnds().slice(),this.endss_.push();this.endss_.push(e),this.changed()},e.prototype.clone=function(){for(var t=this.endss_.length,i=new Array(t),n=0;n<t;++n)i[n]=this.endss_[n].slice();return new e(this.flatCoordinates.slice(),this.layout,i)},e.prototype.closestPointXY=function(t,e,i,n){return n<Object(r.e)(this.getExtent(),t,e)?n:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(Object(d.f)(this.flatCoordinates,0,this.endss_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),Object(d.c)(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,this.maxDelta_,!0,t,e,i,n))},e.prototype.containsXY=function(t,e){return Object(p.d)(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,t,e)},e.prototype.getArea=function(){return Object(u.c)(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride)},e.prototype.getCoordinates=function(t){var e;return void 0!==t?(e=this.getOrientedFlatCoordinates().slice(),Object(_.d)(e,0,this.endss_,this.stride,t)):e=this.flatCoordinates,Object(g.c)(e,0,this.endss_,this.stride)},e.prototype.getEndss=function(){return this.endss_},e.prototype.getFlatInteriorPoints=function(){if(this.flatInteriorPointsRevision_!=this.getRevision()){var t=function(t,e,i,n){for(var o=[],s=Object(r.j)(),a=0,h=i.length;a<h;++a){var c=i[a];s=Object(r.o)(t,e,c[0],n),o.push((s[0]+s[2])/2,(s[1]+s[3])/2),e=c[c.length-1]}return o}(this.flatCoordinates,0,this.endss_,this.stride);this.flatInteriorPoints_=Object(y.b)(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,t),this.flatInteriorPointsRevision_=this.getRevision()}return this.flatInteriorPoints_},e.prototype.getInteriorPoints=function(){return new a.a(this.getFlatInteriorPoints().slice(),o.a.XYM)},e.prototype.getOrientedFlatCoordinates=function(){if(this.orientedRevision_!=this.getRevision()){var t=this.flatCoordinates;Object(_.b)(t,0,this.endss_,this.stride)?this.orientedFlatCoordinates_=t:(this.orientedFlatCoordinates_=t.slice(),this.orientedFlatCoordinates_.length=Object(_.d)(this.orientedFlatCoordinates_,0,this.endss_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_},e.prototype.getSimplifiedGeometryInternal=function(t){var i=[],n=[];return i.length=Object(v.d)(this.flatCoordinates,0,this.endss_,this.stride,Math.sqrt(t),i,0,n),new e(i,o.a.XY,n)},e.prototype.getPolygon=function(t){if(t<0||this.endss_.length<=t)return null;var e;if(0===t)e=0;else{var i=this.endss_[t-1];e=i[i.length-1]}var n=this.endss_[t].slice(),r=n[n.length-1];if(0!==e)for(var o=0,s=n.length;o<s;++o)n[o]-=e;return new h.a(this.flatCoordinates.slice(e,r),this.layout,n)},e.prototype.getPolygons=function(){for(var t=this.layout,e=this.flatCoordinates,i=this.endss_,n=[],r=0,o=0,s=i.length;o<s;++o){var a=i[o].slice(),c=a[a.length-1];if(0!==r)for(var u=0,l=a.length;u<l;++u)a[u]-=r;var d=new h.a(e.slice(r,c),t,a);n.push(d),r=c}return n},e.prototype.getType=function(){return s.a.MULTI_POLYGON},e.prototype.intersectsExtent=function(t){return Object(m.d)(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,t)},e.prototype.setCoordinates=function(t,e){this.setLayout(e,t,3),this.flatCoordinates||(this.flatCoordinates=[]);var i=Object(f.d)(this.flatCoordinates,0,t,this.stride,this.endss_);if(0===i.length)this.flatCoordinates.length=0;else{var n=i[i.length-1];this.flatCoordinates.length=0===n.length?0:n[n.length-1]}this.changed()},e}(c.a);e.a=O},718:function(t,e,i){"use strict";var n,r=i(321),o=i(389),s=i(458),a=i(464),h=i(658),c=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),u=function(t){function e(e,i,n){var r=t.call(this)||this;if(void 0!==n&&void 0===i)r.setFlatCoordinates(n,e);else{var o=i||0;r.setCenterAndRadius(e,o,n)}return r}return c(e,t),e.prototype.clone=function(){return new e(this.flatCoordinates.slice(),void 0,this.layout)},e.prototype.closestPointXY=function(t,e,i,n){var r=this.flatCoordinates,o=t-r[0],s=e-r[1],a=o*o+s*s;if(a<n){if(0===a)for(var h=0;h<this.stride;++h)i[h]=r[h];else{var c=this.getRadius()/Math.sqrt(a);i[0]=r[0]+c*o,i[1]=r[1]+c*s;for(h=2;h<this.stride;++h)i[h]=r[h]}return i.length=this.stride,a}return n},e.prototype.containsXY=function(t,e){var i=this.flatCoordinates,n=t-i[0],r=e-i[1];return n*n+r*r<=this.getRadiusSquared_()},e.prototype.getCenter=function(){return this.flatCoordinates.slice(0,this.stride)},e.prototype.computeExtent=function(t){var e=this.flatCoordinates,i=e[this.stride]-e[0];return Object(r.k)(e[0]-i,e[1]-i,e[0]+i,e[1]+i,t)},e.prototype.getRadius=function(){return Math.sqrt(this.getRadiusSquared_())},e.prototype.getRadiusSquared_=function(){var t=this.flatCoordinates[this.stride]-this.flatCoordinates[0],e=this.flatCoordinates[this.stride+1]-this.flatCoordinates[1];return t*t+e*e},e.prototype.getType=function(){return o.a.CIRCLE},e.prototype.intersectsExtent=function(t){var e=this.getExtent();if(Object(r.F)(t,e)){var i=this.getCenter();return t[0]<=i[0]&&t[2]>=i[0]||(t[1]<=i[1]&&t[3]>=i[1]||Object(r.t)(t,this.intersectsCoordinate.bind(this)))}return!1},e.prototype.setCenter=function(t){var e=this.stride,i=this.flatCoordinates[e]-this.flatCoordinates[0],n=t.slice();n[e]=n[0]+i;for(var r=1;r<e;++r)n[e+r]=t[r];this.setFlatCoordinates(this.layout,n),this.changed()},e.prototype.setCenterAndRadius=function(t,e,i){this.setLayout(i,t,0),this.flatCoordinates||(this.flatCoordinates=[]);var n=this.flatCoordinates,r=Object(a.a)(n,0,t,this.stride);n[r++]=n[0]+e;for(var o=1,s=this.stride;o<s;++o)n[r++]=n[o];n.length=r,this.changed()},e.prototype.getCoordinates=function(){return null},e.prototype.setCoordinates=function(t,e){},e.prototype.setRadius=function(t){this.flatCoordinates[this.stride]=this.flatCoordinates[0]+t,this.changed()},e.prototype.rotate=function(t,e){var i=this.getCenter(),n=this.getStride();this.setCenter(Object(h.a)(i,0,i.length,n,t,e,i)),this.changed()},e.prototype.translate=function(t,e){var i=this.getCenter(),n=this.getStride();this.setCenter(Object(h.d)(i,0,i.length,n,t,e,i)),this.changed()},e}(s.a);u.prototype.transform,e.a=u},720:function(t,e,i){"use strict";var n=i(400),r=i(397),o=i(455),s=i(413),a=i(340),h=i(581),c=function(){function t(){this.dataProjection=null,this.defaultFeatureProjection=null}return t.prototype.getReadOptions=function(t,e){var i;if(e){var n=e.dataProjection?Object(a.i)(e.dataProjection):this.readProjection(t);e.extent&&n&&n.getUnits()===h.b.TILE_PIXELS&&(n=Object(a.i)(n)).setWorldExtent(e.extent),i={dataProjection:n,featureProjection:e.featureProjection}}return this.adaptOptions(i)},t.prototype.adaptOptions=function(t){return Object(o.a)({dataProjection:this.dataProjection,featureProjection:this.defaultFeatureProjection},t)},t.prototype.getType=function(){return Object(s.b)()},t.prototype.readFeature=function(t,e){return Object(s.b)()},t.prototype.readFeatures=function(t,e){return Object(s.b)()},t.prototype.readGeometry=function(t,e){return Object(s.b)()},t.prototype.readProjection=function(t){return Object(s.b)()},t.prototype.writeFeature=function(t,e){return Object(s.b)()},t.prototype.writeFeatures=function(t,e){return Object(s.b)()},t.prototype.writeGeometry=function(t,e){return Object(s.b)()},t}();function u(t,e,i){var n,r=i?Object(a.i)(i.featureProjection):null,o=i?Object(a.i)(i.dataProjection):null;if(n=r&&o&&!Object(a.f)(r,o)?(e?t.clone():t).transform(e?r:o,e?o:r):t,e&&i&&void 0!==i.decimals){var s=Math.pow(10,i.decimals);n===t&&(n=t.clone()),n.applyTransform((function(t){for(var e=0,i=t.length;e<i;++e)t[e]=Math.round(t[e]*s)/s;return t}))}return n}var l,d=i(755),p=(l=function(t,e){return(l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}l(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});function f(t){if("string"==typeof t){var e=JSON.parse(t);return e||null}return null!==t?t:null}var g=function(t){function e(){return t.call(this)||this}return p(e,t),e.prototype.getType=function(){return d.a.JSON},e.prototype.readFeature=function(t,e){return this.readFeatureFromObject(f(t),this.getReadOptions(t,e))},e.prototype.readFeatures=function(t,e){return this.readFeaturesFromObject(f(t),this.getReadOptions(t,e))},e.prototype.readFeatureFromObject=function(t,e){return Object(s.b)()},e.prototype.readFeaturesFromObject=function(t,e){return Object(s.b)()},e.prototype.readGeometry=function(t,e){return this.readGeometryFromObject(f(t),this.getReadOptions(t,e))},e.prototype.readGeometryFromObject=function(t,e){return Object(s.b)()},e.prototype.readProjection=function(t){return this.readProjectionFromObject(f(t))},e.prototype.readProjectionFromObject=function(t){return Object(s.b)()},e.prototype.writeFeature=function(t,e){return JSON.stringify(this.writeFeatureObject(t,e))},e.prototype.writeFeatureObject=function(t,e){return Object(s.b)()},e.prototype.writeFeatures=function(t,e){return JSON.stringify(this.writeFeaturesObject(t,e))},e.prototype.writeFeaturesObject=function(t,e){return Object(s.b)()},e.prototype.writeGeometry=function(t,e){return JSON.stringify(this.writeGeometryObject(t,e))},e.prototype.writeGeometryObject=function(t,e){return Object(s.b)()},e}(c),y=i(403),m=i(386),_=i(321),v=i(754),b=i(389),O=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();function C(t){for(var e=[],i=0,n=t.length;i<n;++i)e.push(t[i].clone());return e}var w=function(t){function e(e){var i=t.call(this)||this;return i.geometries_=e||null,i.changeEventsKeys_=[],i.listenGeometriesChange_(),i}return O(e,t),e.prototype.unlistenGeometriesChange_=function(){this.changeEventsKeys_.forEach(y.c),this.changeEventsKeys_.length=0},e.prototype.listenGeometriesChange_=function(){if(this.geometries_)for(var t=0,e=this.geometries_.length;t<e;++t)this.changeEventsKeys_.push(Object(y.a)(this.geometries_[t],m.a.CHANGE,this.changed,this))},e.prototype.clone=function(){var t=new e(null);return t.setGeometries(this.geometries_),t},e.prototype.closestPointXY=function(t,e,i,n){if(n<Object(_.e)(this.getExtent(),t,e))return n;for(var r=this.geometries_,o=0,s=r.length;o<s;++o)n=r[o].closestPointXY(t,e,i,n);return n},e.prototype.containsXY=function(t,e){for(var i=this.geometries_,n=0,r=i.length;n<r;++n)if(i[n].containsXY(t,e))return!0;return!1},e.prototype.computeExtent=function(t){Object(_.l)(t);for(var e=this.geometries_,i=0,n=e.length;i<n;++i)Object(_.q)(t,e[i].getExtent());return t},e.prototype.getGeometries=function(){return C(this.geometries_)},e.prototype.getGeometriesArray=function(){return this.geometries_},e.prototype.getGeometriesArrayRecursive=function(){for(var t=[],e=this.geometries_,i=0,n=e.length;i<n;++i)e[i].getType()===this.getType()?t=t.concat(e[i].getGeometriesArrayRecursive()):t.push(e[i]);return t},e.prototype.getSimplifiedGeometry=function(t){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),t<0||0!==this.simplifiedGeometryMaxMinSquaredTolerance&&t<this.simplifiedGeometryMaxMinSquaredTolerance)return this;for(var i=[],n=this.geometries_,r=!1,o=0,s=n.length;o<s;++o){var a=n[o],h=a.getSimplifiedGeometry(t);i.push(h),h!==a&&(r=!0)}if(r){var c=new e(null);return c.setGeometriesArray(i),c}return this.simplifiedGeometryMaxMinSquaredTolerance=t,this},e.prototype.getType=function(){return b.a.GEOMETRY_COLLECTION},e.prototype.intersectsExtent=function(t){for(var e=this.geometries_,i=0,n=e.length;i<n;++i)if(e[i].intersectsExtent(t))return!0;return!1},e.prototype.isEmpty=function(){return 0===this.geometries_.length},e.prototype.rotate=function(t,e){for(var i=this.geometries_,n=0,r=i.length;n<r;++n)i[n].rotate(t,e);this.changed()},e.prototype.scale=function(t,e,i){var n=i;n||(n=Object(_.x)(this.getExtent()));for(var r=this.geometries_,o=0,s=r.length;o<s;++o)r[o].scale(t,e,n);this.changed()},e.prototype.setGeometries=function(t){this.setGeometriesArray(C(t))},e.prototype.setGeometriesArray=function(t){this.unlistenGeometriesChange_(),this.geometries_=t,this.listenGeometriesChange_(),this.changed()},e.prototype.applyTransform=function(t){for(var e=this.geometries_,i=0,n=e.length;i<n;++i)e[i].applyTransform(t);this.changed()},e.prototype.translate=function(t,e){for(var i=this.geometries_,n=0,r=i.length;n<r;++n)i[n].translate(t,e);this.changed()},e.prototype.disposeInternal=function(){this.unlistenGeometriesChange_(),t.prototype.disposeInternal.call(this)},e}(v.a),j=i(484),P=i(673),x=i(590),T=i(675),E=i(457),F=i(532),S=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),M=function(t){function e(e){var i=this,n=e||{};return(i=t.call(this)||this).dataProjection=Object(a.i)(n.dataProjection?n.dataProjection:"EPSG:4326"),n.featureProjection&&(i.defaultFeatureProjection=Object(a.i)(n.featureProjection)),i.geometryName_=n.geometryName,i.extractGeometryName_=n.extractGeometryName,i}return S(e,t),e.prototype.readFeatureFromObject=function(t,e){var i=null,n=G((i="Feature"===t.type?t:{type:"Feature",geometry:t,properties:null}).geometry,e),o=new r.a;return this.geometryName_?o.setGeometryName(this.geometryName_):this.extractGeometryName_&&"geometry_name"in i!==void 0&&o.setGeometryName(i.geometry_name),o.setGeometry(n),"id"in i&&o.setId(i.id),i.properties&&o.setProperties(i.properties,!0),o},e.prototype.readFeaturesFromObject=function(t,e){var i=null;if("FeatureCollection"===t.type){i=[];for(var n=t.features,r=0,o=n.length;r<o;++r)i.push(this.readFeatureFromObject(n[r],e))}else i=[this.readFeatureFromObject(t,e)];return i},e.prototype.readGeometryFromObject=function(t,e){return G(t,e)},e.prototype.readProjectionFromObject=function(t){var e,i=t.crs;return i?"name"==i.type?e=Object(a.i)(i.properties.name):"EPSG"===i.type?e=Object(a.i)("EPSG:"+i.properties.code):Object(n.a)(!1,36):e=this.dataProjection,e},e.prototype.writeFeatureObject=function(t,e){e=this.adaptOptions(e);var i={type:"Feature",geometry:null,properties:null},n=t.getId();void 0!==n&&(i.id=n);var r=t.getGeometry();r&&(i.geometry=I(r,e));var s=t.getProperties();return delete s[t.getGeometryName()],Object(o.d)(s)||(i.properties=s),i},e.prototype.writeFeaturesObject=function(t,e){e=this.adaptOptions(e);for(var i=[],n=0,r=t.length;n<r;++n)i.push(this.writeFeatureObject(t[n],e));return{type:"FeatureCollection",features:i}},e.prototype.writeGeometryObject=function(t,e){return I(t,this.adaptOptions(e))},e}(g);function G(t,e){if(!t)return null;var i;switch(t.type){case b.a.POINT:i=function(t){return new E.a(t.coordinates)}(t);break;case b.a.LINE_STRING:i=function(t){return new j.a(t.coordinates)}(t);break;case b.a.POLYGON:i=function(t){return new F.a(t.coordinates)}(t);break;case b.a.MULTI_POINT:i=function(t){return new x.a(t.coordinates)}(t);break;case b.a.MULTI_LINE_STRING:i=function(t){return new P.a(t.coordinates)}(t);break;case b.a.MULTI_POLYGON:i=function(t){return new T.a(t.coordinates)}(t);break;case b.a.GEOMETRY_COLLECTION:i=function(t,e){var i=t.geometries.map((function(t){return G(t,e)}));return new w(i)}(t);break;default:throw new Error("Unsupported GeoJSON type: "+t.type)}return u(i,!1,e)}function I(t,e){var i,n=(t=u(t,!0,e)).getType();switch(n){case b.a.POINT:i=function(t,e){return{type:"Point",coordinates:t.getCoordinates()}}(t);break;case b.a.LINE_STRING:i=function(t,e){return{type:"LineString",coordinates:t.getCoordinates()}}(t);break;case b.a.POLYGON:i=function(t,e){var i;e&&(i=e.rightHanded);return{type:"Polygon",coordinates:t.getCoordinates(i)}}(t,e);break;case b.a.MULTI_POINT:i=function(t,e){return{type:"MultiPoint",coordinates:t.getCoordinates()}}(t);break;case b.a.MULTI_LINE_STRING:i=function(t,e){return{type:"MultiLineString",coordinates:t.getCoordinates()}}(t);break;case b.a.MULTI_POLYGON:i=function(t,e){var i;e&&(i=e.rightHanded);return{type:"MultiPolygon",coordinates:t.getCoordinates(i)}}(t,e);break;case b.a.GEOMETRY_COLLECTION:i=function(t,e){return{type:"GeometryCollection",geometries:t.getGeometriesArray().map((function(t){var i=Object(o.a)({},e);return delete i.featureProjection,I(t,i)}))}}(t,e);break;case b.a.CIRCLE:i={type:"GeometryCollection",geometries:[]};break;default:throw new Error("Unsupported geometry type: "+n)}return i}e.a=M},807:function(t,e,i){"use strict";var n=i(296),r=i(659);e.a=Object(n.a)(r.a)},827:function(t,e,i){"use strict";var n,r=i(386),o=i(397),s=i(657),a=i(826),h=i(407),c=i(573),u=i(577),l=i(585),d=(i(321),i(519)),p=i(718),f=i(389),g=i(484),y=i(673),m=i(590),_=i(675),v=i(457),b=i(532),O=i(398),C=i(824),w=i(427),j=i(418),P=i(757),x=i(340),T=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),E="Point",F="LineString",S="Polygon",M="Circle",G="drawstart",I="drawend",L="drawabort",R=function(t){function e(e,i){var n=t.call(this,e)||this;return n.feature=i,n}return T(e,t),e}(u.a),k=function(t){function e(e){var i=this,n=e;n.stopDown||(n.stopDown=d.a),(i=t.call(this,n)||this).shouldHandle_=!1,i.downPx_=null,i.downTimeout_,i.lastDragTime_,i.freehand_=!1,i.source_=e.source?e.source:null,i.features_=e.features?e.features:null,i.snapTolerance_=e.snapTolerance?e.snapTolerance:12,i.type_=e.type,i.mode_=function(t){var e;t===f.a.POINT||t===f.a.MULTI_POINT?e=E:t===f.a.LINE_STRING||t===f.a.MULTI_LINE_STRING?e=F:t===f.a.POLYGON||t===f.a.MULTI_POLYGON?e=S:t===f.a.CIRCLE&&(e=M);return e}(i.type_),i.stopClick_=!!e.stopClick,i.minPoints_=e.minPoints?e.minPoints:i.mode_===S?3:2,i.maxPoints_=e.maxPoints?e.maxPoints:1/0,i.finishCondition_=e.finishCondition?e.finishCondition:d.b;var r,o=e.geometryFunction;if(!o)if(i.type_===f.a.CIRCLE)o=function(t,e,i){var n=e||new p.a([NaN,NaN]),r=Object(x.g)(t[0],i),o=Object(c.h)(r,Object(x.g)(t[1],i));n.setCenterAndRadius(r,Math.sqrt(o));var s=Object(x.m)();return s&&n.transform(i,s),n};else{var s,a=i.mode_;a===E?s=v.a:a===F?s=g.a:a===S&&(s=b.a),o=function(t,e,i){var n=e;return n?a===S?t[0].length?n.setCoordinates([t[0].concat([t[0][0]])]):n.setCoordinates([]):n.setCoordinates(t):n=new s(t),n}}return i.geometryFunction_=o,i.dragVertexDelay_=void 0!==e.dragVertexDelay?e.dragVertexDelay:500,i.finishCoordinate_=null,i.sketchFeature_=null,i.sketchPoint_=null,i.sketchCoords_=null,i.sketchLine_=null,i.sketchLineCoords_=null,i.squaredClickTolerance_=e.clickTolerance?e.clickTolerance*e.clickTolerance:36,i.overlay_=new w.a({source:new j.a({useSpatialIndex:!1,wrapX:!!e.wrapX&&e.wrapX}),style:e.style?e.style:(r=Object(P.b)(),function(t,e){return r[t.getGeometry().getType()]}),updateWhileInteracting:!0}),i.geometryName_=e.geometryName,i.condition_=e.condition?e.condition:l.g,i.freehandCondition_,e.freehand?i.freehandCondition_=l.c:i.freehandCondition_=e.freehandCondition?e.freehandCondition:l.i,i.addEventListener(Object(h.b)(C.a.ACTIVE),i.updateState_),i}return T(e,t),e.prototype.setMap=function(e){t.prototype.setMap.call(this,e),this.updateState_()},e.prototype.getOverlay=function(){return this.overlay_},e.prototype.handleEvent=function(e){e.originalEvent.type===r.a.CONTEXTMENU&&e.preventDefault(),this.freehand_=this.mode_!==E&&this.freehandCondition_(e);var i=e.type===s.a.POINTERMOVE,n=!0;!this.freehand_&&this.lastDragTime_&&e.type===s.a.POINTERDRAG&&(Date.now()-this.lastDragTime_>=this.dragVertexDelay_?(this.downPx_=e.pixel,this.shouldHandle_=!this.freehand_,i=!0):this.lastDragTime_=void 0,this.shouldHandle_&&void 0!==this.downTimeout_&&(clearTimeout(this.downTimeout_),this.downTimeout_=void 0));return this.freehand_&&e.type===s.a.POINTERDRAG&&null!==this.sketchFeature_?(this.addToDrawing_(e.coordinate),n=!1):this.freehand_&&e.type===s.a.POINTERDOWN?n=!1:i?(n=e.type===s.a.POINTERMOVE)&&this.freehand_?n=this.handlePointerMove_(e):("mouse"==e.pointerEvent.pointerType||e.type===s.a.POINTERDRAG&&void 0===this.downTimeout_)&&this.handlePointerMove_(e):e.type===s.a.DBLCLICK&&(n=!1),t.prototype.handleEvent.call(this,e)&&n},e.prototype.handleDownEvent=function(t){return this.shouldHandle_=!this.freehand_,this.freehand_?(this.downPx_=t.pixel,this.finishCoordinate_||this.startDrawing_(t),!0):this.condition_(t)?(this.lastDragTime_=Date.now(),this.downTimeout_=setTimeout(function(){this.handlePointerMove_(new a.a(s.a.POINTERMOVE,t.map,t.pointerEvent,!1,t.frameState))}.bind(this),this.dragVertexDelay_),this.downPx_=t.pixel,!0):(this.lastDragTime_=void 0,!1)},e.prototype.handleUpEvent=function(t){var e=!0;this.downTimeout_&&(clearTimeout(this.downTimeout_),this.downTimeout_=void 0),this.handlePointerMove_(t);var i=this.mode_===M;return this.shouldHandle_?(this.finishCoordinate_?this.freehand_||i?this.finishDrawing():this.atFinish_(t)?this.finishCondition_(t)&&this.finishDrawing():this.addToDrawing_(t.coordinate):(this.startDrawing_(t),this.mode_===E&&this.finishDrawing()),e=!1):this.freehand_&&this.abortDrawing(),!e&&this.stopClick_&&t.stopPropagation(),e},e.prototype.handlePointerMove_=function(t){if(this.downPx_&&(!this.freehand_&&this.shouldHandle_||this.freehand_&&!this.shouldHandle_)){var e=this.downPx_,i=t.pixel,n=e[0]-i[0],r=e[1]-i[1],o=n*n+r*r;if(this.shouldHandle_=this.freehand_?o>this.squaredClickTolerance_:o<=this.squaredClickTolerance_,!this.shouldHandle_)return!0}return this.finishCoordinate_?this.modifyDrawing_(t):this.createOrUpdateSketchPoint_(t),!0},e.prototype.atFinish_=function(t){var e=!1;if(this.sketchFeature_){var i=!1,n=[this.finishCoordinate_];if(this.mode_===F)i=this.sketchCoords_.length>this.minPoints_;else if(this.mode_===S){var r=this.sketchCoords_;i=r[0].length>this.minPoints_,n=[r[0][0],r[0][r[0].length-2]]}if(i)for(var o=t.map,s=0,a=n.length;s<a;s++){var h=n[s],c=o.getPixelFromCoordinate(h),u=t.pixel,l=u[0]-c[0],d=u[1]-c[1],p=this.freehand_?1:this.snapTolerance_;if(e=Math.sqrt(l*l+d*d)<=p){this.finishCoordinate_=h;break}}}return e},e.prototype.createOrUpdateSketchPoint_=function(t){var e=t.coordinate.slice();this.sketchPoint_?this.sketchPoint_.getGeometry().setCoordinates(e):(this.sketchPoint_=new o.a(new v.a(e)),this.updateSketchFeatures_())},e.prototype.startDrawing_=function(t){var e=t.coordinate,i=t.map.getView().getProjection();this.finishCoordinate_=e,this.mode_===E?this.sketchCoords_=e.slice():this.mode_===S?(this.sketchCoords_=[[e.slice(),e.slice()]],this.sketchLineCoords_=this.sketchCoords_[0]):this.sketchCoords_=[e.slice(),e.slice()],this.sketchLineCoords_&&(this.sketchLine_=new o.a(new g.a(this.sketchLineCoords_)));var n=this.geometryFunction_(this.sketchCoords_,void 0,i);this.sketchFeature_=new o.a,this.geometryName_&&this.sketchFeature_.setGeometryName(this.geometryName_),this.sketchFeature_.setGeometry(n),this.updateSketchFeatures_(),this.dispatchEvent(new R(G,this.sketchFeature_))},e.prototype.modifyDrawing_=function(t){var e,i,n,r=t.coordinate,s=this.sketchFeature_.getGeometry(),a=t.map.getView().getProjection();(this.mode_===E?i=this.sketchCoords_:this.mode_===S?(i=(e=this.sketchCoords_[0])[e.length-1],this.atFinish_(t)&&(r=this.finishCoordinate_.slice())):i=(e=this.sketchCoords_)[e.length-1],i[0]=r[0],i[1]=r[1],this.geometryFunction_(this.sketchCoords_,s,a),this.sketchPoint_)&&this.sketchPoint_.getGeometry().setCoordinates(r);if(s.getType()==f.a.POLYGON&&this.mode_!==S){this.sketchLine_||(this.sketchLine_=new o.a);var h=s.getLinearRing(0);(n=this.sketchLine_.getGeometry())?(n.setFlatCoordinates(h.getLayout(),h.getFlatCoordinates()),n.changed()):(n=new g.a(h.getFlatCoordinates(),h.getLayout()),this.sketchLine_.setGeometry(n))}else this.sketchLineCoords_&&(n=this.sketchLine_.getGeometry()).setCoordinates(this.sketchLineCoords_);this.updateSketchFeatures_()},e.prototype.addToDrawing_=function(t){var e,i,n=this.sketchFeature_.getGeometry(),r=this.getMap().getView().getProjection();this.mode_===F?(this.finishCoordinate_=t.slice(),(i=this.sketchCoords_).length>=this.maxPoints_&&(this.freehand_?i.pop():e=!0),i.push(t.slice()),this.geometryFunction_(i,n,r)):this.mode_===S&&((i=this.sketchCoords_[0]).length>=this.maxPoints_&&(this.freehand_?i.pop():e=!0),i.push(t.slice()),e&&(this.finishCoordinate_=i[0]),this.geometryFunction_(this.sketchCoords_,n,r)),this.updateSketchFeatures_(),e&&this.finishDrawing()},e.prototype.removeLastPoint=function(){if(this.sketchFeature_){var t,e=this.sketchFeature_.getGeometry(),i=this.getMap().getView().getProjection();this.mode_===F?((t=this.sketchCoords_).splice(-2,1),this.geometryFunction_(t,e,i),t.length>=2&&(this.finishCoordinate_=t[t.length-2].slice())):this.mode_===S&&((t=this.sketchCoords_[0]).splice(-2,1),this.sketchLine_.getGeometry().setCoordinates(t),this.geometryFunction_(this.sketchCoords_,e,i)),0===t.length&&this.abortDrawing(),this.updateSketchFeatures_()}},e.prototype.finishDrawing=function(){var t=this.abortDrawing_();if(t){var e=this.sketchCoords_,i=t.getGeometry(),n=this.getMap().getView().getProjection();this.mode_===F?(e.pop(),this.geometryFunction_(e,i,n)):this.mode_===S&&(e[0].pop(),this.geometryFunction_(e,i,n),e=i.getCoordinates()),this.type_===f.a.MULTI_POINT?t.setGeometry(new m.a([e])):this.type_===f.a.MULTI_LINE_STRING?t.setGeometry(new y.a([e])):this.type_===f.a.MULTI_POLYGON&&t.setGeometry(new _.a([e])),this.dispatchEvent(new R(I,t)),this.features_&&this.features_.push(t),this.source_&&this.source_.addFeature(t)}},e.prototype.abortDrawing_=function(){this.finishCoordinate_=null;var t=this.sketchFeature_;return this.sketchFeature_=null,this.sketchPoint_=null,this.sketchLine_=null,this.overlay_.getSource().clear(!0),t},e.prototype.abortDrawing=function(){var t=this.abortDrawing_();t&&this.dispatchEvent(new R(L,t))},e.prototype.appendCoordinates=function(t){var e=this.mode_,i=[];e===F?i=this.sketchCoords_:e===S&&(i=this.sketchCoords_&&this.sketchCoords_.length?this.sketchCoords_[0]:[]);for(var n=i.pop(),r=0;r<t.length;r++)this.addToDrawing_(t[r]);this.addToDrawing_(n)},e.prototype.extend=function(t){var e=t.getGeometry();this.sketchFeature_=t,this.sketchCoords_=e.getCoordinates();var i=this.sketchCoords_[this.sketchCoords_.length-1];this.finishCoordinate_=i.slice(),this.sketchCoords_.push(i.slice()),this.updateSketchFeatures_(),this.dispatchEvent(new R(G,this.sketchFeature_))},e.prototype.updateSketchFeatures_=function(){var t=[];this.sketchFeature_&&t.push(this.sketchFeature_),this.sketchLine_&&t.push(this.sketchLine_),this.sketchPoint_&&t.push(this.sketchPoint_);var e=this.overlay_.getSource();e.clear(!0),e.addFeatures(t)},e.prototype.updateState_=function(){var t=this.getMap(),e=this.getActive();t&&e||this.abortDrawing(),this.overlay_.setMap(e?t:null)},e}(O.b);e.a=k},828:function(t,e,i){"use strict";var n,r=i(413),o=i(677),s=i(573),a=i(403),h=i(386),c=i(321),u=i(519),l=i(389),d=i(532),p=i(398),f=i(455),g=i(747),y=i(756),m=i(340),_=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});function v(t){return t.feature?t.feature:t.element?t.element:void 0}var b=[],O=function(t){function e(e){var i=this,n=e||{},r=n;return r.handleDownEvent||(r.handleDownEvent=u.b),r.stopDown||(r.stopDown=u.a),(i=t.call(this,r)||this).source_=n.source?n.source:null,i.vertex_=void 0===n.vertex||n.vertex,i.edge_=void 0===n.edge||n.edge,i.features_=n.features?n.features:null,i.featuresListenerKeys_=[],i.featureChangeListenerKeys_={},i.indexedFeaturesExtents_={},i.pendingFeatures_={},i.pixelTolerance_=void 0!==n.pixelTolerance?n.pixelTolerance:10,i.rBush_=new y.a,i.SEGMENT_WRITERS_={Point:i.writePointGeometry_.bind(i),LineString:i.writeLineStringGeometry_.bind(i),LinearRing:i.writeLineStringGeometry_.bind(i),Polygon:i.writePolygonGeometry_.bind(i),MultiPoint:i.writeMultiPointGeometry_.bind(i),MultiLineString:i.writeMultiLineStringGeometry_.bind(i),MultiPolygon:i.writeMultiPolygonGeometry_.bind(i),GeometryCollection:i.writeGeometryCollectionGeometry_.bind(i),Circle:i.writeCircleGeometry_.bind(i)},i}return _(e,t),e.prototype.addFeature=function(t,e){var i=void 0===e||e,n=Object(r.c)(t),o=t.getGeometry();if(o){var s=this.SEGMENT_WRITERS_[o.getType()];s&&(this.indexedFeaturesExtents_[n]=o.getExtent(Object(c.j)()),s(t,o))}i&&(this.featureChangeListenerKeys_[n]=Object(a.a)(t,h.a.CHANGE,this.handleFeatureChange_,this))},e.prototype.forEachFeatureAdd_=function(t){this.addFeature(t)},e.prototype.forEachFeatureRemove_=function(t){this.removeFeature(t)},e.prototype.getFeatures_=function(){var t;return this.features_?t=this.features_:this.source_&&(t=this.source_.getFeatures()),t},e.prototype.handleEvent=function(e){var i=this.snapTo(e.pixel,e.coordinate,e.map);return i.snapped&&(e.coordinate=i.vertex.slice(0,2),e.pixel=i.vertexPixel),t.prototype.handleEvent.call(this,e)},e.prototype.handleFeatureAdd_=function(t){var e=v(t);this.addFeature(e)},e.prototype.handleFeatureRemove_=function(t){var e=v(t);this.removeFeature(e)},e.prototype.handleFeatureChange_=function(t){var e=t.target;if(this.handlingDownUpSequence){var i=Object(r.c)(e);i in this.pendingFeatures_||(this.pendingFeatures_[i]=e)}else this.updateFeature_(e)},e.prototype.handleUpEvent=function(t){var e=Object(f.c)(this.pendingFeatures_);return e.length&&(e.forEach(this.updateFeature_.bind(this)),this.pendingFeatures_={}),!1},e.prototype.removeFeature=function(t,e){var i=void 0===e||e,n=Object(r.c)(t),o=this.indexedFeaturesExtents_[n];if(o){var s=this.rBush_,h=[];s.forEachInExtent(o,(function(e){t===e.feature&&h.push(e)}));for(var c=h.length-1;c>=0;--c)s.remove(h[c])}i&&(Object(a.c)(this.featureChangeListenerKeys_[n]),delete this.featureChangeListenerKeys_[n])},e.prototype.setMap=function(e){var i=this.getMap(),n=this.featuresListenerKeys_,r=this.getFeatures_();i&&(n.forEach(a.c),n.length=0,r.forEach(this.forEachFeatureRemove_.bind(this))),t.prototype.setMap.call(this,e),e&&(this.features_?n.push(Object(a.a)(this.features_,o.a.ADD,this.handleFeatureAdd_,this),Object(a.a)(this.features_,o.a.REMOVE,this.handleFeatureRemove_,this)):this.source_&&n.push(Object(a.a)(this.source_,g.a.ADDFEATURE,this.handleFeatureAdd_,this),Object(a.a)(this.source_,g.a.REMOVEFEATURE,this.handleFeatureRemove_,this)),r.forEach(this.forEachFeatureAdd_.bind(this)))},e.prototype.snapTo=function(t,e,i){var n=i.getCoordinateFromPixel([t[0]-this.pixelTolerance_,t[1]+this.pixelTolerance_]),r=i.getCoordinateFromPixel([t[0]+this.pixelTolerance_,t[1]-this.pixelTolerance_]),o=Object(c.b)([n,r]),a=this.rBush_.getInExtent(o);this.vertex_&&!this.edge_&&(a=a.filter((function(t){return t.feature.getGeometry().getType()!==l.a.CIRCLE})));var h=!1,u=null,d=null;if(0===a.length)return{snapped:h,vertex:u,vertexPixel:d};for(var p,f=i.getView().getProjection(),g=Object(m.g)(e,f),y=1/0,_=0;_<a.length;++_){var v=a[_];b[0]=Object(m.g)(v.segment[0],f),b[1]=Object(m.g)(v.segment[1],f);var O=Object(s.i)(g,b);O<y&&(p=v,y=O)}var C=p.segment;if(this.vertex_&&!this.edge_){var w=i.getPixelFromCoordinate(C[0]),j=i.getPixelFromCoordinate(C[1]),P=Object(s.h)(t,w),x=Object(s.h)(t,j);Math.sqrt(Math.min(P,x))<=this.pixelTolerance_&&(h=!0,u=P>x?C[1]:C[0],d=i.getPixelFromCoordinate(u))}else if(this.edge_){var T=p.feature.getGeometry().getType()===l.a.CIRCLE;if(T){var E=p.feature.getGeometry(),F=Object(m.m)();F&&(E=E.clone().transform(F,f)),u=Object(m.n)(Object(s.b)(g,E),f)}else b[0]=Object(m.g)(C[0],f),b[1]=Object(m.g)(C[1],f),u=Object(m.n)(Object(s.c)(g,b),f);if(d=i.getPixelFromCoordinate(u),Object(s.d)(t,d)<=this.pixelTolerance_&&(h=!0,this.vertex_&&!T)){w=i.getPixelFromCoordinate(C[0]),j=i.getPixelFromCoordinate(C[1]),P=Object(s.h)(d,w),x=Object(s.h)(d,j);Math.sqrt(Math.min(P,x))<=this.pixelTolerance_&&(u=P>x?C[1]:C[0],d=i.getPixelFromCoordinate(u))}}return h&&(d=[Math.round(d[0]),Math.round(d[1])]),{snapped:h,vertex:u,vertexPixel:d}},e.prototype.updateFeature_=function(t){this.removeFeature(t,!1),this.addFeature(t,!1)},e.prototype.writeCircleGeometry_=function(t,e){var i=this.getMap().getView().getProjection(),n=e,r=Object(m.m)();r&&(n=n.clone().transform(r,i));var o=Object(d.b)(n);r&&o.transform(i,r);for(var s=o.getCoordinates()[0],a=0,h=s.length-1;a<h;++a){var u=s.slice(a,a+2),l={feature:t,segment:u};this.rBush_.insert(Object(c.b)(u),l)}},e.prototype.writeGeometryCollectionGeometry_=function(t,e){for(var i=e.getGeometriesArray(),n=0;n<i.length;++n){var r=this.SEGMENT_WRITERS_[i[n].getType()];r&&r(t,i[n])}},e.prototype.writeLineStringGeometry_=function(t,e){for(var i=e.getCoordinates(),n=0,r=i.length-1;n<r;++n){var o=i.slice(n,n+2),s={feature:t,segment:o};this.rBush_.insert(Object(c.b)(o),s)}},e.prototype.writeMultiLineStringGeometry_=function(t,e){for(var i=e.getCoordinates(),n=0,r=i.length;n<r;++n)for(var o=i[n],s=0,a=o.length-1;s<a;++s){var h=o.slice(s,s+2),u={feature:t,segment:h};this.rBush_.insert(Object(c.b)(h),u)}},e.prototype.writeMultiPointGeometry_=function(t,e){for(var i=e.getCoordinates(),n=0,r=i.length;n<r;++n){var o=i[n],s={feature:t,segment:[o,o]};this.rBush_.insert(e.getExtent(),s)}},e.prototype.writeMultiPolygonGeometry_=function(t,e){for(var i=e.getCoordinates(),n=0,r=i.length;n<r;++n)for(var o=i[n],s=0,a=o.length;s<a;++s)for(var h=o[s],u=0,l=h.length-1;u<l;++u){var d=h.slice(u,u+2),p={feature:t,segment:d};this.rBush_.insert(Object(c.b)(d),p)}},e.prototype.writePointGeometry_=function(t,e){var i=e.getCoordinates(),n={feature:t,segment:[i,i]};this.rBush_.insert(e.getExtent(),n)},e.prototype.writePolygonGeometry_=function(t,e){for(var i=e.getCoordinates(),n=0,r=i.length;n<r;++n)for(var o=i[n],s=0,a=o.length-1;s<a;++s){var h=o.slice(s,s+2),u={feature:t,segment:h};this.rBush_.insert(Object(c.b)(h),u)}},e}(p.b);e.a=O},829:function(t,e,i){"use strict";var n,r=i(413),o=i(686),s=i(677),a=i(397),h=i(657),c=i(392),u=i(573),l=i(577),d=i(386),p=i(585),f=i(321),g=i(389),y=i(457),m=i(532),_=i(398),v=i(427),b=i(418),O=i(747),C=i(756),w=i(757),j=i(340),P=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),x=[0,0,0,0],T=[],E="modifystart",F="modifyend",S=function(t){function e(e,i,n){var r=t.call(this,e)||this;return r.features=i,r.mapBrowserEvent=n,r}return P(e,t),e}(l.a),M=function(t){function e(e){var i,n,r=t.call(this,e)||this;if(r.boundHandleFeatureChange_=r.handleFeatureChange_.bind(r),r.condition_=e.condition?e.condition:p.h,r.defaultDeleteCondition_=function(t){return Object(p.a)(t)&&Object(p.j)(t)},r.deleteCondition_=e.deleteCondition?e.deleteCondition:r.defaultDeleteCondition_,r.insertVertexCondition_=e.insertVertexCondition?e.insertVertexCondition:p.c,r.vertexFeature_=null,r.vertexSegments_=null,r.lastPixel_=[0,0],r.ignoreNextSingleClick_=!1,r.modified_=!1,r.rBush_=new C.a,r.pixelTolerance_=void 0!==e.pixelTolerance?e.pixelTolerance:10,r.snappedToVertex_=!1,r.changingFeature_=!1,r.dragSegments_=[],r.overlay_=new v.a({source:new b.a({useSpatialIndex:!1,wrapX:!!e.wrapX}),style:e.style?e.style:(i=Object(w.b)(),function(t,e){return i[g.a.POINT]}),updateWhileAnimating:!0,updateWhileInteracting:!0}),r.SEGMENT_WRITERS_={Point:r.writePointGeometry_.bind(r),LineString:r.writeLineStringGeometry_.bind(r),LinearRing:r.writeLineStringGeometry_.bind(r),Polygon:r.writePolygonGeometry_.bind(r),MultiPoint:r.writeMultiPointGeometry_.bind(r),MultiLineString:r.writeMultiLineStringGeometry_.bind(r),MultiPolygon:r.writeMultiPolygonGeometry_.bind(r),Circle:r.writeCircleGeometry_.bind(r),GeometryCollection:r.writeGeometryCollectionGeometry_.bind(r)},r.source_=null,e.source?(r.source_=e.source,n=new o.a(r.source_.getFeatures()),r.source_.addEventListener(O.a.ADDFEATURE,r.handleSourceAdd_.bind(r)),r.source_.addEventListener(O.a.REMOVEFEATURE,r.handleSourceRemove_.bind(r))):n=e.features,!n)throw new Error("The modify interaction requires features or a source");return r.features_=n,r.features_.forEach(r.addFeature_.bind(r)),r.features_.addEventListener(s.a.ADD,r.handleFeatureAdd_.bind(r)),r.features_.addEventListener(s.a.REMOVE,r.handleFeatureRemove_.bind(r)),r.lastPointerEvent_=null,r}return P(e,t),e.prototype.addFeature_=function(t){var e=t.getGeometry();if(e){var i=this.SEGMENT_WRITERS_[e.getType()];i&&i(t,e)}var n=this.getMap();n&&n.isRendered()&&this.getActive()&&this.handlePointerAtPixel_(this.lastPixel_,n),t.addEventListener(d.a.CHANGE,this.boundHandleFeatureChange_)},e.prototype.willModifyFeatures_=function(t){this.modified_||(this.modified_=!0,this.dispatchEvent(new S(E,this.features_,t)))},e.prototype.removeFeature_=function(t){this.removeFeatureSegmentData_(t),this.vertexFeature_&&0===this.features_.getLength()&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null),t.removeEventListener(d.a.CHANGE,this.boundHandleFeatureChange_)},e.prototype.removeFeatureSegmentData_=function(t){var e=this.rBush_,i=[];e.forEach((function(e){t===e.feature&&i.push(e)}));for(var n=i.length-1;n>=0;--n){for(var r=i[n],o=this.dragSegments_.length-1;o>=0;--o)this.dragSegments_[o][0]===r&&this.dragSegments_.splice(o,1);e.remove(r)}},e.prototype.setActive=function(e){this.vertexFeature_&&!e&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null),t.prototype.setActive.call(this,e)},e.prototype.setMap=function(e){this.overlay_.setMap(e),t.prototype.setMap.call(this,e)},e.prototype.getOverlay=function(){return this.overlay_},e.prototype.handleSourceAdd_=function(t){t.feature&&this.features_.push(t.feature)},e.prototype.handleSourceRemove_=function(t){t.feature&&this.features_.remove(t.feature)},e.prototype.handleFeatureAdd_=function(t){this.addFeature_(t.element)},e.prototype.handleFeatureChange_=function(t){if(!this.changingFeature_){var e=t.target;this.removeFeature_(e),this.addFeature_(e)}},e.prototype.handleFeatureRemove_=function(t){var e=t.element;this.removeFeature_(e)},e.prototype.writePointGeometry_=function(t,e){var i=e.getCoordinates(),n={feature:t,geometry:e,segment:[i,i]};this.rBush_.insert(e.getExtent(),n)},e.prototype.writeMultiPointGeometry_=function(t,e){for(var i=e.getCoordinates(),n=0,r=i.length;n<r;++n){var o=i[n],s={feature:t,geometry:e,depth:[n],index:n,segment:[o,o]};this.rBush_.insert(e.getExtent(),s)}},e.prototype.writeLineStringGeometry_=function(t,e){for(var i=e.getCoordinates(),n=0,r=i.length-1;n<r;++n){var o=i.slice(n,n+2),s={feature:t,geometry:e,index:n,segment:o};this.rBush_.insert(Object(f.b)(o),s)}},e.prototype.writeMultiLineStringGeometry_=function(t,e){for(var i=e.getCoordinates(),n=0,r=i.length;n<r;++n)for(var o=i[n],s=0,a=o.length-1;s<a;++s){var h=o.slice(s,s+2),c={feature:t,geometry:e,depth:[n],index:s,segment:h};this.rBush_.insert(Object(f.b)(h),c)}},e.prototype.writePolygonGeometry_=function(t,e){for(var i=e.getCoordinates(),n=0,r=i.length;n<r;++n)for(var o=i[n],s=0,a=o.length-1;s<a;++s){var h=o.slice(s,s+2),c={feature:t,geometry:e,depth:[n],index:s,segment:h};this.rBush_.insert(Object(f.b)(h),c)}},e.prototype.writeMultiPolygonGeometry_=function(t,e){for(var i=e.getCoordinates(),n=0,r=i.length;n<r;++n)for(var o=i[n],s=0,a=o.length;s<a;++s)for(var h=o[s],c=0,u=h.length-1;c<u;++c){var l=h.slice(c,c+2),d={feature:t,geometry:e,depth:[s,n],index:c,segment:l};this.rBush_.insert(Object(f.b)(l),d)}},e.prototype.writeCircleGeometry_=function(t,e){var i=e.getCenter(),n={feature:t,geometry:e,index:0,segment:[i,i]},r={feature:t,geometry:e,index:1,segment:[i,i]},o=[n,r];n.featureSegments=o,r.featureSegments=o,this.rBush_.insert(Object(f.m)(i),n);var s=e,a=Object(j.m)();if(a&&this.getMap()){var h=this.getMap().getView().getProjection();s=s.clone().transform(a,h),s=Object(m.b)(s).transform(h,a)}this.rBush_.insert(s.getExtent(),r)},e.prototype.writeGeometryCollectionGeometry_=function(t,e){for(var i=e.getGeometriesArray(),n=0;n<i.length;++n){var r=i[n];(0,this.SEGMENT_WRITERS_[r.getType()])(t,r)}},e.prototype.createOrUpdateVertexFeature_=function(t){var e=this.vertexFeature_;e?e.getGeometry().setCoordinates(t):(e=new a.a(new y.a(t)),this.vertexFeature_=e,this.overlay_.getSource().addFeature(e));return e},e.prototype.handleEvent=function(e){return!e.pointerEvent||(this.lastPointerEvent_=e,e.map.getView().getInteracting()||e.type!=h.a.POINTERMOVE||this.handlingDownUpSequence||this.handlePointerMove_(e),this.vertexFeature_&&this.deleteCondition_(e)&&(i=!(e.type!=h.a.SINGLECLICK||!this.ignoreNextSingleClick_)||this.removePoint()),e.type==h.a.SINGLECLICK&&(this.ignoreNextSingleClick_=!1),t.prototype.handleEvent.call(this,e)&&!i);var i},e.prototype.handleDragEvent=function(t){this.ignoreNextSingleClick_=!1,this.willModifyFeatures_(t);for(var e=t.coordinate,i=0,n=this.dragSegments_.length;i<n;++i){for(var r=this.dragSegments_[i],o=r[0],s=o.depth,a=o.geometry,h=void 0,c=o.segment,l=r[1];e.length<a.getStride();)e.push(c[l][e.length]);switch(a.getType()){case g.a.POINT:h=e,c[0]=e,c[1]=e;break;case g.a.MULTI_POINT:(h=a.getCoordinates())[o.index]=e,c[0]=e,c[1]=e;break;case g.a.LINE_STRING:(h=a.getCoordinates())[o.index+l]=e,c[l]=e;break;case g.a.MULTI_LINE_STRING:case g.a.POLYGON:(h=a.getCoordinates())[s[0]][o.index+l]=e,c[l]=e;break;case g.a.MULTI_POLYGON:(h=a.getCoordinates())[s[1]][s[0]][o.index+l]=e,c[l]=e;break;case g.a.CIRCLE:if(c[0]=e,c[1]=e,0===o.index)this.changingFeature_=!0,a.setCenter(e),this.changingFeature_=!1;else{this.changingFeature_=!0;var d=t.map.getView().getProjection(),p=Object(u.d)(Object(j.g)(a.getCenter(),d),Object(j.g)(e,d)),f=Object(j.m)();if(f){var y=a.clone().transform(f,d);y.setRadius(p),p=y.transform(d,f).getRadius()}a.setRadius(p),this.changingFeature_=!1}}h&&this.setGeometryCoordinates_(a,h)}this.createOrUpdateVertexFeature_(e)},e.prototype.handleDownEvent=function(t){if(!this.condition_(t))return!1;var e=t.coordinate;this.handlePointerAtPixel_(t.pixel,t.map,e),this.dragSegments_.length=0,this.modified_=!1;var i=this.vertexFeature_;if(i){var n=t.map.getView().getProjection(),o=[],s=i.getGeometry().getCoordinates(),a=Object(f.b)([s]),h=this.rBush_.getInExtent(a),c={};h.sort(G);for(var l=0,d=h.length;l<d;++l){var p=h[l],y=p.segment,m=Object(r.c)(p.feature),_=p.depth;if(_&&(m+="-"+_.join("-")),c[m]||(c[m]=new Array(2)),p.geometry.getType()!==g.a.CIRCLE||1!==p.index)if(!Object(u.e)(y[0],s)||c[m][0])if(!Object(u.e)(y[1],s)||c[m][1])Object(r.c)(y)in this.vertexSegments_&&!c[m][0]&&!c[m][1]&&this.insertVertexCondition_(t)&&o.push([p,s]);else{if((p.geometry.getType()===g.a.LINE_STRING||p.geometry.getType()===g.a.MULTI_LINE_STRING)&&c[m][0]&&0===c[m][0].index)continue;this.dragSegments_.push([p,1]),c[m][1]=p}else this.dragSegments_.push([p,0]),c[m][0]=p;else{var v=L(e,p,n);Object(u.e)(v,s)&&!c[m][0]&&(this.dragSegments_.push([p,0]),c[m][0]=p)}}o.length&&this.willModifyFeatures_(t);for(var b=o.length-1;b>=0;--b)this.insertVertex_.apply(this,o[b])}return!!this.vertexFeature_},e.prototype.handleUpEvent=function(t){for(var e=this.dragSegments_.length-1;e>=0;--e){var i=this.dragSegments_[e][0],n=i.geometry;if(n.getType()===g.a.CIRCLE){var r=n.getCenter(),o=i.featureSegments[0],s=i.featureSegments[1];o.segment[0]=r,o.segment[1]=r,s.segment[0]=r,s.segment[1]=r,this.rBush_.update(Object(f.m)(r),o);var a=n,h=Object(j.m)();if(h){var c=t.map.getView().getProjection();a=a.clone().transform(h,c),a=Object(m.b)(a).transform(c,h)}this.rBush_.update(a.getExtent(),s)}else this.rBush_.update(Object(f.b)(i.segment),i)}return this.modified_&&(this.dispatchEvent(new S(F,this.features_,t)),this.modified_=!1),!1},e.prototype.handlePointerMove_=function(t){this.lastPixel_=t.pixel,this.handlePointerAtPixel_(t.pixel,t.map,t.coordinate)},e.prototype.handlePointerAtPixel_=function(t,e,i){var n=i||e.getCoordinateFromPixel(t),o=e.getView().getProjection(),s=Object(j.h)(Object(f.m)(n,x),o),a=e.getView().getResolution()*this.pixelTolerance_,h=Object(j.o)(Object(f.c)(s,a,x),o),c=this.rBush_.getInExtent(h);if(c.length>0){c.sort((function(t,e){return I(n,t,o)-I(n,e,o)}));var l=c[0],d=l.segment,p=L(n,l,o),y=e.getPixelFromCoordinate(p),m=Object(u.d)(t,y);if(m<=this.pixelTolerance_){var _={};if(l.geometry.getType()===g.a.CIRCLE&&1===l.index)this.snappedToVertex_=!0,this.createOrUpdateVertexFeature_(p);else{var v=e.getPixelFromCoordinate(d[0]),b=e.getPixelFromCoordinate(d[1]),O=Object(u.h)(y,v),C=Object(u.h)(y,b);m=Math.sqrt(Math.min(O,C)),this.snappedToVertex_=m<=this.pixelTolerance_,this.snappedToVertex_&&(p=O>C?d[1]:d[0]),this.createOrUpdateVertexFeature_(p);for(var w=1,P=c.length;w<P;++w){var T=c[w].segment;if(!(Object(u.e)(d[0],T[0])&&Object(u.e)(d[1],T[1])||Object(u.e)(d[0],T[1])&&Object(u.e)(d[1],T[0])))break;_[Object(r.c)(T)]=!0}}return _[Object(r.c)(d)]=!0,void(this.vertexSegments_=_)}}this.vertexFeature_&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null)},e.prototype.insertVertex_=function(t,e){for(var i,n=t.segment,r=t.feature,o=t.geometry,s=t.depth,a=t.index;e.length<o.getStride();)e.push(0);switch(o.getType()){case g.a.MULTI_LINE_STRING:case g.a.POLYGON:(i=o.getCoordinates())[s[0]].splice(a+1,0,e);break;case g.a.MULTI_POLYGON:(i=o.getCoordinates())[s[1]][s[0]].splice(a+1,0,e);break;case g.a.LINE_STRING:(i=o.getCoordinates()).splice(a+1,0,e);break;default:return}this.setGeometryCoordinates_(o,i);var h=this.rBush_;h.remove(t),this.updateSegmentIndices_(o,a,s,1);var c={segment:[n[0],e],feature:r,geometry:o,depth:s,index:a};h.insert(Object(f.b)(c.segment),c),this.dragSegments_.push([c,1]);var u={segment:[e,n[1]],feature:r,geometry:o,depth:s,index:a+1};h.insert(Object(f.b)(u.segment),u),this.dragSegments_.push([u,0]),this.ignoreNextSingleClick_=!0},e.prototype.removePoint=function(){if(this.lastPointerEvent_&&this.lastPointerEvent_.type!=h.a.POINTERDRAG){var t=this.lastPointerEvent_;this.willModifyFeatures_(t);var e=this.removeVertex_();return this.dispatchEvent(new S(F,this.features_,t)),this.modified_=!1,e}return!1},e.prototype.removeVertex_=function(){var t,e,i,n,o,s,a,h,c,u,l,d=this.dragSegments_,p={},y=!1;for(o=d.length-1;o>=0;--o)u=(i=d[o])[0],l=Object(r.c)(u.feature),u.depth&&(l+="-"+u.depth.join("-")),l in p||(p[l]={}),0===i[1]?(p[l].right=u,p[l].index=u.index):1==i[1]&&(p[l].left=u,p[l].index=u.index+1);for(l in p){switch(c=p[l].right,a=p[l].left,(h=(s=p[l].index)-1)<0&&(h=0),t=e=(n=(u=void 0!==a?a:c).geometry).getCoordinates(),y=!1,n.getType()){case g.a.MULTI_LINE_STRING:e[u.depth[0]].length>2&&(e[u.depth[0]].splice(s,1),y=!0);break;case g.a.LINE_STRING:e.length>2&&(e.splice(s,1),y=!0);break;case g.a.MULTI_POLYGON:t=t[u.depth[1]];case g.a.POLYGON:(t=t[u.depth[0]]).length>4&&(s==t.length-1&&(s=0),t.splice(s,1),y=!0,0===s&&(t.pop(),t.push(t[0]),h=t.length-1))}if(y){this.setGeometryCoordinates_(n,e);var m=[];if(void 0!==a&&(this.rBush_.remove(a),m.push(a.segment[0])),void 0!==c&&(this.rBush_.remove(c),m.push(c.segment[1])),void 0!==a&&void 0!==c){var _={depth:u.depth,feature:u.feature,geometry:u.geometry,index:h,segment:m};this.rBush_.insert(Object(f.b)(_.segment),_)}this.updateSegmentIndices_(n,s,u.depth,-1),this.vertexFeature_&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null),d.length=0}}return y},e.prototype.setGeometryCoordinates_=function(t,e){this.changingFeature_=!0,t.setCoordinates(e),this.changingFeature_=!1},e.prototype.updateSegmentIndices_=function(t,e,i,n){this.rBush_.forEachInExtent(t.getExtent(),(function(r){r.geometry===t&&(void 0===i||void 0===r.depth||Object(c.b)(r.depth,i))&&r.index>e&&(r.index+=n)}))},e}(_.b);function G(t,e){return t.index-e.index}function I(t,e,i){var n=e.geometry;if(n.getType()===g.a.CIRCLE){var r=n;if(1===e.index){var o=Object(j.m)();o&&(r=r.clone().transform(o,i));var s=Object(u.h)(r.getCenter(),Object(j.g)(t,i)),a=Math.sqrt(s)-r.getRadius();return a*a}}var h=Object(j.g)(t,i);return T[0]=Object(j.g)(e.segment[0],i),T[1]=Object(j.g)(e.segment[1],i),Object(u.i)(h,T)}function L(t,e,i){var n=e.geometry;if(n.getType()===g.a.CIRCLE&&1===e.index){var r=n,o=Object(j.m)();return o&&(r=r.clone().transform(o,i)),Object(j.n)(r.getClosestPoint(Object(j.g)(t,i)),i)}var s=Object(j.g)(t,i);return T[0]=Object(j.g)(e.segment[0],i),T[1]=Object(j.g)(e.segment[1],i),Object(j.n)(Object(u.c)(s,T),i)}e.a=M},855:function(t,e,i){"use strict";var n=i(296),r=(i(162),i(161),i(67),i(295)),o=i(427),s=i(418),a=i(827),h=i(828),c=i(829),u=i(720),l=i(388),d={fill:"rgba(255, 255, 255, 0.5)",stroke:{color:"#409eff",width:2},circle:{radius:6,fill:"#409eff",stroke:{width:1,color:"#fff"}}},p={name:"MyMapDraw",inject:["myMap"],render:function(){return this.$slots.default},props:{type:{type:String,default:"LineString",validator:function(t){return["Point","LineString","Polygon","Circle"].includes(t)}},brush:{type:[Object,Function]},effect:{type:[Object,Function],default:function(){return d}},manual:Boolean,options:Object},watch:{type:function(){this.manual||(this.finish(),this.draw(),this.modify())}},methods:{getStyle:function(t){return t?"function"==typeof t?t():Object(l.a)(t):null},init:function(t){if(!this.layer){var e=new s.a,i=this.getStyle(this.effect);this.layer=new o.a({source:e,style:i}),t.addLayer(this.layer),this.manual||(this.draw(),this.modify()),this.$emit("ready",this)}},draw:function(t){var e=this;if(this.layer){var i=this.layer.getSource(),n=this.getStyle(this.brush),o=this.type,s=this.myMap.map,c=new a.a(Object(r.a)(Object(r.a)({},this.options),{},{type:o,source:i,style:n}));this.drawStartHandler=function(t){e.$emit("drawstart",t)},this.drawEndHandler=function(i){t&&t(i),e.$emit("drawend",i)},c.on("drawstart",this.drawStartHandler),c.on("drawend",this.drawEndHandler),this.drawInstance=c,this.snapInstance=new h.a({source:i}),s.addInteraction(c),s.addInteraction(this.snapInstance)}},modify:function(t){var e=this;if(this.layer){var i=this.myMap.map,n=this.layer.getSource(),o=this.getStyle(this.brush),s=new c.a(Object(r.a)(Object(r.a)({},this.options),{},{source:n,style:o}));this.modifyStartHandler=function(t){e.$emit("modifystart",t)},this.modifyEndHandler=function(i){t&&t(i),e.$emit("modifyend",i)},s.on("modifystart",this.modifyStartHandler),s.on("modifyend",this.modifyEndHandler),this.modifyInstance=s,i.addInteraction(this.modifyInstance)}},finish:function(){var t=this.myMap.map;if(t){var e=this.drawInstance,i=this.modifyInstance;e&&(e.un("drawstart",this.drawStartHandler),e.un("drawend",this.drawEndHandler),e.dispose(),t.removeInteraction(e),t.removeInteraction(this.snapInstance),this.drawInstance=null),i&&(i.un("modifystart",this.modifyStartHandler),i.un("modifyend",this.modifyEndHandler),i.dispose(),t.removeInteraction(i),this.modifyInstance=null)}},dispose:function(){this.finish(),this.myMap.map&&this.layer&&this.myMap.map.removeLayer(this.layer)},getFeatures:function(){return this.layer?this.layer.getSource().getFeatures():[]},clear:function(){this.layer&&this.layer.getSource().clear()},removeFeature:function(t){this.layer.getSource().removeFeature(t)},addFeature:function(t){var e=[].concat(t);this.layer.getSource().addFeatures(e)},toJSON:function(){var t=this.getFeatures();return(new u.a).writeFeatures(t)},fromJSON:function(t){var e=(new u.a).readFeatures(t);this.addFeature(e)},writeFeature:function(t){return(new u.a).writeFeature(t)},readFeature:function(t){return(new u.a).writeFeature(t)}},created:function(){this.myMap.mapReady(this.init)},beforeDestroy:function(){this.dispose()}};e.a=Object(n.a)(p)}}]);