(window.webpackJsonp=window.webpackJsonp||[]).push([[1111],{1245:function(n,e,t){"use strict";t.d(e,"a",(function(){return c})),t.d(e,"b",(function(){return l})),t.d(e,"d",(function(){return f})),t.d(e,"c",(function(){return h}));t(65),t(91),t(462),t(96),t(7),t(92);var i=t(295),r=t(23),a=t(47),o=t(709),u="__MY_WEB_MESSAGER__",d=function(){function n(e){var t=this;Object(r.a)(this,n);var a=this.options=Object(i.a)({target:window,bridge:null,origin:null,ready:null},e);this.target=a.target,this.handlers={},this.proxyBridgeHandler=this.bridgeHandler.bind(this),window.addEventListener("storage",this.proxyBridgeHandler),a.bridge?this.buildBridge().then((function(n){t.target=n.contentWindow,t.el=n,a.ready&&a.ready(t)})):a.ready&&a.ready(this)}return Object(a.a)(n,[{key:"on",value:function(n,e){var t=function(t){var i=t.data||{};i&&i.type===u&&i.data.type===n&&e(i.data.data,i.data.bridge)};this.handlers[n]||(this.handlers[n]=[]),this.handlers[n].push(t),window.addEventListener("message",t)}},{key:"off",value:function(n,e){var t=this;if(n&&e){var i=this.handlers[n]||[];i.forEach((function(n,t){e===n&&(i.splice(t,1),window.removeEventListener("message",n))}))}else if(n){(this.handlers[n]||[]).forEach((function(n){window.removeEventListener("message",n)})),delete this.handlers[n]}else Object.keys(this.handlers).forEach((function(n){t.off(n)}))}},{key:"fire",value:function(n,e){if(this.target){var t={type:u,data:{type:n,data:e,bridge:this.options.origin}};if(this.options.bridge){var i={type:u,data:t};this.target.postMessage(i,"*")}else this.target.postMessage(t,"*")}}},{key:"once",value:function(n,e){var t=arguments,i=this;this.on(n,(function(){e.apply(i,t),i.off(n,e)}))}},{key:"buildBridge",value:function(){var n=this;return new Promise((function(e,t){var i=document.createElement("iframe");i.style.display="none",i.setAttribute("src",n.options.bridge+"?t="+(new Date).getTime()),i.onload=function(){e(i)},i.onerror=function(n){t(n)},document.body.appendChild(i)}))}},{key:"pass",value:function(n){Object(o.d)(u,{message:n,__t__:(new Date).getTime()},o.a)}},{key:"bridgeHandler",value:function(n){if(n.key===u){var e=JSON.parse(n.newValue);if(e&&e.message){var t=e.message;(this.handlers[t.type]||[]).forEach((function(n){n({data:{type:u,data:t}})}))}}}},{key:"destroy",value:function(){this.off(),this.proxyBridgeHandler&&window.removeEventListener("storage",this.proxyBridgeHandler),this.el&&this.el.parentNode.removeChild(this.el)}}]),n}(),s=t(322);function c(n){var e=n.bridge,t=n.channel,i=n.data,r=n.origin;return new d({bridge:e,origin:r,ready:function(n){n.fire(t,i),setTimeout((function(){n.destroy()}),0)}})}function l(n,e){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=new d(t);return i.on(n,e),i}function f(n){var e,t,i=n.name,r=n.bridge,a=n.data,o=n.origin,u=n.callback,d=Object(s.h)(),f={uid:d,data:a};u&&(e=function(n){n.uid===d&&u(n.data)},t=l(i+d,(function(n){e(n),t.destroy()})));c({bridge:r,data:f,origin:o,channel:i})}function h(n){var e=n.name,t=n.origin,i=n.handler;return l(e,(function(n,r){var a=e+n.uid;i(n.data,(function(e){c({bridge:r,data:{uid:n.uid,data:e},origin:t,channel:a})}))}))}},299:function(n,e,t){},3090:function(n,e,t){"use strict";t.r(e);t(356),t(299);var i=t(317),r=t.n(i),a=t(0),o=t(1245),u={data:function(){return{results:[]}},methods:{callService:function(){var n=this;window.open("pages/provider.html").onload=function(){Object(o.d)({name:"ServiceName",bridge:"/my/bridge/index.html",origin:"/my/bridge/index.html",data:{id:(new Date).getTime()},callback:function(e){n.results.push(e)}})}}}};a.default.use(r.a);var d=u,s=t(39),c=Object(s.a)(d,(function(){var n=this,e=n.$createElement,t=n._self._c||e;return t("div",[t("el-button",{on:{click:n.callService}},[n._v("调用服务")]),n._v(" "),t("h3",[n._v("结果：")]),n._v(" "),n._l(n.results,(function(e,i){return t("p",{key:i},[n._v(n._s(e))])}))],2)}),[],!1,null,null,null);e.default=c.exports},322:function(n,e,t){"use strict";t.d(e,"f",(function(){return o})),t.d(e,"a",(function(){return u})),t.d(e,"e",(function(){return d})),t.d(e,"c",(function(){return s})),t.d(e,"g",(function(){return c})),t.d(e,"d",(function(){return l})),t.d(e,"h",(function(){return f})),t.d(e,"b",(function(){return h}));t(91),t(160),t(42),t(7),t(40),t(94),t(68),t(92);var i=t(357),r=(t(170),t(340),t(358)),a=window.requestAnimationFrame||window.webkitRequestAnimationFrame||function(n){return window.setTimeout(n,1e3/60)},o=a,u=window.cancelAnimationFrame||window.webkitRequestAnimationFrame||function(n){window.clearTimeout(n)};function d(n,e){return i(n,e)}function s(n){var e,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:20,i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:this;return function(){var a=[].slice.call(arguments);clearTimeout(e);var o=function(){e=null,i||n.apply(r,a)},u=!e&&i;e=setTimeout(o,t),u&&n.apply(r,a)}}function c(n){var e,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this,i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return function(){var r=arguments;e||(e=!0,a((function(){e=!1,n.apply(t,r)})),i&&n.apply(t,r))}}function l(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(n){var e=16*Math.random()|0;return("x"===n?e:3&e|8).toString(16)})).toUpperCase()}function f(){var n=Math.floor(1e3*Math.random());return[(new Date).getTime(),n].join("")}function h(n){return r(n)}},356:function(n,e,t){},709:function(n,e,t){"use strict";t.d(e,"b",(function(){return r})),t.d(e,"a",(function(){return a})),t.d(e,"d",(function(){return o})),t.d(e,"c",(function(){return u}));var i=t(41),r=window.sessionStorage||{},a=window.localStorage||{};function o(n,e){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:r,a="object"===Object(i.a)(e)?JSON.stringify(e):e;t.setItem(n,a)}function u(n){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:r,t=e.getItem(n);if(t){if("object"===Object(i.a)(t))return t;var a=/^({[\W\w]*})|(\[[\W\w]*])$/;return a.test(t)?JSON.parse(t):t}return null}}}]);