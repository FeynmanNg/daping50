(window.webpackJsonp=window.webpackJsonp||[]).push([[749],{296:function(t,e,i){"use strict";i.d(e,"a",(function(){return r}));i(65),"My".toLowerCase();function r(t){return t.install=function(e){return"undefined"!=typeof window&&i(307).default(t),e.component(t.name,t)},t}},298:function(t,e,i){"use strict";i(310);var r={version:"4.0.1",debug:!1,appName:null,routePrefix:null,router:{mode:"hash",base:"/"},autoRoutes:!0,vuex:{strict:!1},keys:{code:"code",data:"data",message:"msg",total:"total",list:"list",page:"page",limit:"limit",pages:"pages"},statusCode:{success:0,notLogin:401,authorize:403,error:500},axios:{headers:{"Content-Type":"application/json;charset=UTF-8"},timeout:0,withCredentials:!0,responseType:"json",maxContentLength:-1},svg:{viewBox:"0 0 1024 1024",width:"1em",height:"1em",fill:"currentColor"},access:{},mock:{timeout:"50-200"},scale:{width:1920,height:1080,disabled:!0,lock:!0},analysis:!1,microApp:{prefetch:!1,singular:!0,sandbox:!0}};e.a=r},307:function(t,e,i){"use strict";i.r(e);i(160),i(65);var r=i(298),n=!1,o=[],s=null;r.a.analysis&&function(){if(!n){var t="c4e5f73318b5cb0c389e3d9a05f831cc",e=window._hmt;if(!e||e&&e.id!==t){var i=document.createElement("script");i.src="https://hm.baidu.com/hm.js?".concat(t);var r=document.getElementsByTagName("script")[0];r&&r.parentNode.insertBefore(i,r)}n=!0}}(),e.default=function(t){var e;r.a.analysis&&(e=t.name,o.push(e),clearTimeout(s),s=setTimeout((function(){if(window._hmt&&e){var t=window.location.host,i=window.location.href;window._hmt.push(["_trackEvent",t,o.join(","),r.a.version,i]),o=[]}}),3e3))}},3142:function(t,e,i){"use strict";i.r(e);var r=i(983),n=i(400),o=i(0);o.default.use(n.a),o.default.use(r.a);var s={data:function(){return{brush:{fill:"rgba(255,223,64,0.5)",stroke:{color:"rgba(255,223,64)",width:3},circle:{radius:8,fill:"red",stroke:{width:2,color:"#fff"}}},effect:{fill:"rgba(90,200,33,0.5)",stroke:{color:"rgba(90,200,33)",width:3}}}}},a=i(39),h=Object(a.a)(s,(function(){var t=this.$createElement,e=this._self._c||t;return e("my-map",[e("my-map-draw",{attrs:{type:"Circle",brush:this.brush,effect:this.effect}})],1)}),[],!1,null,null,null);e.default=h.exports},370:function(t,e,i){"use strict";i.d(e,"c",(function(){return s})),i.d(e,"d",(function(){return a})),i.d(e,"a",(function(){return h})),i.d(e,"b",(function(){return c}));i(91),i(160),i(65),i(438),i(40),i(94),i(412),i(68),i(442),i(367);var r=i(436),n=i.n(r),o=/^(http|https):\/\/[\w.:]*\//;function s(t,e,i){var r,n={};t=(t||location.search).replace(/^[^]*\?/,""),e=e||"&",i=i||"=";for(var o=new RegExp("(?:^|\\"+e+")([^\\"+i+"\\"+e+"]+)(?:\\"+i+"([^\\"+e+"]*))?","g");null!==(r=o.exec(t));)r[1]!==t&&(n[decodeURIComponent(r[1])]=decodeURIComponent(r[2]||""));return n}function a(t){var e=[];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.push([i,encodeURIComponent(t[i])].join("="));return e.join("&")}function h(t){var e=t.match(o);return e?e[0]:""}function c(t,e){var i=[],r=h(t),o=n()(t.replace(r,""),i).exec(e.split("?")[0].replace(r,"")),s={};return o&&o.length>0&&i.forEach((function(t,e){s[t.name]=o[e+1]})),s}},396:function(t,e,i){"use strict";i.d(e,"a",(function(){return Q}));i(162),i(67);var r=i(295),n=i(41),o=i(397),s=i(482),a=i(484),h=i(395),c=i(488),u=i(478),l=i(344),d=i(481),p=(i(160),i(65),i(7),i(94),i(23)),f=i(47),g=i(113),_=i(114),y=i(110),m=i(111),v=i(469),b=i(475),O="METER",C="KILOMETER",w="DEGREE",j="INCH",x="FOOT",F="ISERVER";function P(t,e,i){var r=t*e*(1/.0254)*function(t){var e;if(t===O)e=1;else if(t===w)e=2*Math.PI*6378137/360;else if(t===C)e=.001;else if(t===j)e=1/.025399999918;else{if(t!==x)return e;e=.3048}return e}(i);return r=1/r}function E(t,e,i){var r=t*e*(1/.0254)*this.getMeterPerMapUnit(i);return r=1/r}var S=function(t){Object(y.a)(i,t);var e=Object(m.a)(i);function i(t){var r;if(Object(p.a)(this,i),void 0===(t=t||{}).url)return Object(g.a)(r);t.format=t.format?t.format:"png";var n=t.url+"/tileImage."+t.format+"?";t.serverType=t.serverType||F,r=e.call(this,{attributions:t.attributions,cacheSize:t.cacheSize,crossOrigin:t.crossOrigin,logo:t.logo,opaque:t.opaque,projection:t.projection,reprojectionErrorThreshold:t.reprojectionErrorThreshold,state:t.state,tileClass:t.tileClass,tileGrid:t.tileGrid,tileLoadFunction:t.tileLoadFunction,tilePixelRatio:t.tilePixelRatio,tileUrlFunction:function(e,r,n){o.tileGrid||(o.extent?(o.tileGrid=i.createTileGrid(t.extent),o.resolutions&&(o.tileGrid.resolutions=o.resolutions)):("EPSG:3857"===n.getCode()&&(o.tileGrid=i.createTileGrid([-20037508.3427892,-20037508.3427892,20037508.3427892,20037508.3427892]),o.extent=[-20037508.3427892,-20037508.3427892,20037508.3427892,20037508.3427892]),"EPSG:4326"===n.getCode()&&(o.tileGrid=i.createTileGrid([-180,-90,180,90]),o.extent=[-180,-90,180,90])));o.origin=o.tileGrid.getOrigin(0);var s=e[0],h=e[1],c=-e[2]-1,u=o.tileGrid.getResolution(s),l=n.getUnits();"degrees"===l&&(l=w);"m"===l&&(l=O);var d=P(u,96,l),p=Object(v.c)(o.tileGrid.getTileSize(s,o.tmpSize)),f=a.call(o)+encodeURI("&x="+h+"&y="+c+"&width="+p[0]+"&height="+p[1]+"&scale="+d);o.tileProxy&&(f=o.tileProxy+encodeURIComponent(f));o.cacheEnabled||(f+="&_t="+(new Date).getTime());return f},url:t.url,urls:t.urls,wrapX:void 0!==t.wrapX&&t.wrapX,cacheEnabled:t.cacheEnabled,layersID:t.layersID}),t.tileProxy&&(r.tileProxy=t.tileProxy),r.options=t,r._url=t.url,r.tileSetsIndex=-1,r.tempIndex=-1;var o=Object(_.a)(r);function s(){var e={};return e.redirect=void 0!==t.redirect&&t.redirect,e.transparent=void 0===t.transparent||t.transparent,e.cacheEnabled=!(!1===t.cacheEnabled),this.cacheEnabled=e.cacheEnabled,e._cache=e.cacheEnabled,this.origin&&(e.origin=JSON.stringify({x:this.origin[0],y:this.origin[1]})),t.prjCoordSys&&(e.prjCoordSys=JSON.stringify(t.prjCoordSys)),t.layersID&&(e.layersID=t.layersID.toString()),t.overlapDisplayed?e.overlapDisplayed=!0:(e.overlapDisplayed=!1,t.overlapDisplayedOptions&&(e.overlapDisplayedOptions=this.overlapDisplayedOptions.toString())),t.cacheEnabled&&t.tileversion&&(e.tileversion=t.tileversion.toString()),e}function a(){return this._paramsChanged&&(this._layerUrl=h.call(this),this._paramsChanged=!1),this._layerUrl||h.call(this)}function h(){return this._layerUrl=n+encodeURI(c.call(this)),this._layerUrl}function c(){this.requestParams=this.requestParams||s.call(this);var t=[];for(var e in this.requestParams)t.push(e+"="+this.requestParams[e]);return t.join("&")}return r}return Object(f.a)(i,[{key:"setTileSetsInfo",value:function(t){this.tileSets=t,Array.isArray(this.tileSets)&&(this.tileSets=t[0]),this.tileSets&&(this.dispatchEvent({type:"tilesetsinfoloaded",value:{tileVersions:this.tileSets.tileVersions}}),this.changeTilesVersion())}},{key:"lastTilesVersion",value:function(){this.tempIndex=this.tileSetsIndex-1,this.changeTilesVersion()}},{key:"nextTilesVersion",value:function(){this.tempIndex=this.tileSetsIndex+1,this.changeTilesVersion()}},{key:"changeTilesVersion",value:function(){var t=this;if(null!=t.tileSets&&!(t.tempIndex===t.tileSetsIndex||this.tempIndex<0)){var e=t.tileSets.tileVersions;if(e&&t.tempIndex<e.length&&t.tempIndex>=0){var i=e[t.tempIndex].name;t.mergeTileVersionParam(i)&&(t.tileSetsIndex=t.tempIndex,t.dispatchEvent({type:"tileversionschanged",value:{tileVersion:e[t.tempIndex]}}))}}}},{key:"updateCurrentTileSetsIndex",value:function(t){this.tempIndex=t}},{key:"mergeTileVersionParam",value:function(t){return!!t&&(this.requestParams.tileversion=t,this._paramsChanged=!0,this.refresh(),!0)}}],[{key:"optionsFromMapJSON",value:function(t,e){var i={};i.url=t,i.crossOrigin="anonymous";var r=[e.bounds.left,e.bounds.bottom,e.bounds.right,e.bounds.top],n=function(){var t,i=r[2]-r[0],n=r[3]-r[1],o=i>=n?i:n;t=o===i?o/e.viewer.width:o/e.viewer.height;var s=[],a=O;e.coordUnit===w&&(a=w);if(e.visibleScalesEnabled&&e.visibleScales&&e.visibleScales.length>0)for(var h=0;h<e.visibleScales.length;h++)s.push(E(e.visibleScales[h],96,a));else for(var c=0;c<17;c++)s.push(t/Math.pow(2,c));return s.sort((function(t,e){return e-t}))}();return i.tileGrid=new l.a({extent:r,resolutions:n}),i}},{key:"createTileGrid",value:function(t,e,i,r,n){var o=Object(b.a)({extent:t,maxZoom:e,minZoom:i,tileSize:r});return new l.a({extent:t,minZoom:i,origin:n,resolutions:o.getResolutions(),tileSize:o.getTileSize()})}}]),i}(u.a),T=i(325),G=i(346),I=i(370),k=(i(40),i(68),i(485)),M=i.n(k),L=new G.b({code:"baidu",extent:[-20037726.37,-12474104.17,20037726.37,12474104.17],units:"m"});Object(G.d)(L),Object(G.c)("EPSG:4326",L,M.a.ll2bmerc,M.a.bmerc2ll),Object(G.c)("EPSG:3857",L,M.a.smerc2bmerc,M.a.bmerc2smerc);for(var R=new Array(19),N=0;N<19;++N)R[N]=Math.pow(2,18-N);var A=function(t){return new o.a({source:new h.a({projection:"baidu",maxZoom:18,tileUrlFunction:function(e){var i=e[1],r=-e[2]-1,n=e[0];i<0&&(i="M"+-i),r<0&&(r="M"+-r);var o=Math.ceil(5*Math.random());return t.url.replace(/{x}/g,i).replace(/{y}/g,r).replace(/{z}/g,n).replace(/{n}/g,o)},tileGrid:new l.a({resolutions:R,origin:[0,0]})})})},D="http://webrd03.is.autonavi.com/appmaptile?style=8&x={x}&y={y}&z={z}&lang=zh_cn",V="http://online{n}.map.bdimg.com/tile/?qt=vtile&x={x}&y={y}&z={z}&styles=pl&scaler=1&udt=20190718",B="http://10.8.6.103/PGIS_S_TileMapServer/Maps/BJSL/EzMap?Service=getImage&Type=RGB&ZoomOffset=0",U="http://53.1.238.17/iserver/services/map-pgisvec/rest/maps/pgisvecv1",Y="http://68.26.21.71/images/GetImage.do?method=showImageRedisBytable&jinyi_admin:MA_PGISSLDT&version=v1";function X(){for(var t=[],e=0;e<20;e++){var i=e<7?[64,64]:[107.5,28];t.push(i)}return t}function z(){for(var t=[],e=0;e<20;e++){var i=2.0000081722216954/Math.pow(2,e);t.push(i)}return t}function q(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"EPSG:4326",e=256,i=Object(G.i)(t),r=i.getExtent(),n=Object(T.E)(r)/e,o=[],s=[],a=0;a<=20;a++)o[a]=a,s[a]=n/Math.pow(2,a);return new d.b({origin:Object(T.C)(r),resolutions:s,matrixIds:o})}function H(t){var e=t.layers.map((function(t){return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"vec_c";return new o.a({source:new h.a({url:"http://t{0-7}.tianditu.com/DataServer?T="+t+"&x={x}&y={y}&l={z}&tk=464554f64aa4f4e90e0321c17a57a331"})})}(t)}));return new s.a({layers:e})}function W(t){var e=q(),i=t.url;return new o.a({source:new c.a({url:i,tileGrid:e}),wrapX:!1})}function $(t){var e=t.url,i=q();return new o.a({source:new c.a({url:"",crossOrigin:"Anonymous",tileGrid:i,tileLoadFunction:function(t,i){var r=Object(I.c)(i),n={Row:r.TileRow,Col:r.TileCol,Zoom:r.TileMatrix,V:"1.0.0"};t.getImage().src="".concat(e,"&").concat(Object(I.d)(n))}}),wrapX:!1})}function Z(t){if("function"==typeof t.url){var e=t.url,i=q();return new o.a({source:new c.a({url:"",crossOrigin:"Anonymous",tileGrid:i,tileLoadFunction:function(t,i){var r=Object(I.c)(i);t.getImage().src=e(r)}}),wrapX:!1})}return $(t)}function K(t){return new o.a({source:new S({url:t.url}),projection:t.projection||"EPSG:4326"})}function J(t){var e=t.url;return new o.a({projection:t.projection||"EPSG:4326",url:"".concat(e,"&l={z}&x={y}&y={x}"),tileGrid:new l.a({origin:t.origins||X(),resolutions:t.resolutions||z()})})}function Q(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if("function"==typeof t)return t({TileLayer:o.a,LayerGroup:s.a,OSM:a.a,XYZ:h.a,WMTS:c.a,TileImage:u.a,TileGrid:l.a,WMTSGrid:d.b,getWidth:T.E,getTopLeft:T.C,getProj:G.i});var i="object"===Object(n.a)(t)?Object(r.a)({},t):{type:t},p=i.type;switch(delete i.type,p){case"OSM":return new o.a(Object(r.a)(Object(r.a)({},e),{},{source:new a.a(i)}));case"XYZ":return new o.a(Object(r.a)(Object(r.a)({},e),{},{source:new h.a(i)}));case"Amap":return new o.a(Object(r.a)(Object(r.a)({},e),{},{source:new h.a(Object(r.a)({url:D},i))}));case"Baidu":return A(Object(r.a)({url:V},i));case"TDT":return H(Object(r.a)({layers:["vec_c","vec_w","cva_w","ibo_w"]},i));case"Founder":return W(Object(r.a)({url:"http://127.0.0.1:3000/proxy"},i));case"Ez":return $(Object(r.a)({url:B},i));case"Super":return K(Object(r.a)({url:U},i));case"Fc":return J(Object(r.a)({url:Y},i));case"WMTS":return Z(i)}}},398:function(t,e,i){},400:function(t,e,i){"use strict";var r=i(296),n=(i(162),i(19),i(359),i(91),i(160),i(67),i(301),i(401),i(341),i(92),i(295)),o=i(69),s=i(486),a=i(479),h=i(473),c=i(474),u=i(426),l=i(470),d=i(464),p=i(396),f=i(316),g={name:"MyMap",provide:function(){return{myMap:this}},props:{zoom:{type:Number,default:10},minZoom:{type:Number,default:1},maxZoom:{type:Number,default:20},center:{type:Array,default:function(){return[113.261999,23.130592]}},adapter:{type:[String,Object,Function],default:"Baidu"},projection:{type:String,default:"EPSG:4326"},width:{type:String,default:"100%"},height:{type:String,default:"400px"},dragPan:{type:Boolean,default:!0},mouseWheelZoom:{type:Boolean,default:!0},mapOptions:Object,viewOptions:Object,invert:Boolean,filter:Object},render:function(){var t=arguments[0];return t("div",{class:this.classes,style:this.styles},[this.$slots.default])},data:function(){return{cursor:null,viewWidth:0,viewHeight:0}},computed:{classes:function(){return{"my-map":!0,"my-map--invert":this.invert}},styles:function(){return{width:this.width,height:this.height,cursor:this.cursor?"pointer":""}},filterStyle:function(){return this.filter?Object.entries(this.filter).map((function(t){var e=Object(o.a)(t,2),i=e[0],r=e[1];return"hue-rotate"===i?"".concat(i,"(").concat(r,"deg)"):"".concat(i,"(").concat(r,")")})).join(" "):null}},watch:{dragPan:function(t){this.setActive(h.a,t)},mouseWheelZoom:function(t){this.setActive(c.a,t)},filterStyle:function(){this.setCanvasFilter()}},methods:{setActive:function(t,e){if(this.map){var i=this.map.getInteractions().getArray().find((function(e){return e instanceof t}));i&&i.setActive(e)}},init:function(){var t=this.$props,e=t.center,i=t.projection,r=t.zoom,o=t.minZoom,l=t.maxZoom,d=Object(p.a)(this.adapter);d.__MY_LAYER__=!0;var g=new a.a(Object(n.a)(Object(n.a)({},this.viewOptions||{}),{},{projection:i,center:e,zoom:r,minZoom:o,maxZoom:l}));this.map=new s.a(Object(n.a)(Object(n.a)({},this.mapOptions||{}),{},{layers:[].concat(d),view:g,target:this.$el,controls:[],interactions:[new h.a,new c.a,new u.b({handleEvent:this.handleEvent})]})),this.setActive(h.a,this.dragPan),this.setActive(c.a,this.mouseWheelZoom),this.bindMapEvents(),this.$emit("ready",this.map,this),Object(f.addResizeListener)(this.$el,this.setViewSize),this.setCanvasFilter()},dispose:function(){this.map&&(this.map.disposeInternal(),this.unbindMapEvents(),Object(f.removeResizeListener)(this.$el,this.setViewSize))},getFeatureAtPixel:function(t){return this.map?this.map.forEachFeatureAtPixel(t,(function(t){return t})):null},setCursor:function(t){var e=this.getFeatureVM(t);this.cursor=e&&(e.cursor||e.$listeners.click)},clickTrigger:function(t,e){if(t){var i=this.getFeatureVM(t);i&&i.$emit("click",e,t)}},getLayer:function(){return this.map?this.map.getLayers().getArray().find((function(t){return t.__MY_LAYER__})):null},getFeatureVM:function(t){if(t){var e=(t.get("features")||[])[0]||t;return e.__vm__||e.get("__vm__")}},enterAndLeaveTrigger:function(t,e){if(!this.featureAtPixel&&t){this.$emit("mouseenter",e,t);var i=this.getFeatureVM(t);i&&i.$emit("mouseenter",e,t)}if(this.featureAtPixel&&!t){this.$emit("mouseleave",e,this.featureAtPixel);var r=this.getFeatureVM(this.featureAtPixel);r&&r.$emit("mouseleave",e,this.featureAtPixel)}if(this.featureAtPixel&&t&&this.featureAtPixel!==t){this.$emit("mouseleave",e,this.featureAtPixel),this.$emit("mouseenter",e,t);var n=this.getFeatureVM(this.featureAtPixel);n&&n.$emit("mouseleave",e,this.featureAtPixel);var o=this.getFeatureVM(t);o&&o.$emit("mouseenter",e,t)}this.featureAtPixel=t},handleEvent:function(t){var e=t.type,i=this.getFeatureAtPixel(t.pixel);switch(e){case"pointermove":this.setCursor(i),this.enterAndLeaveTrigger(i,t);break;case"click":this.clickTrigger(i,t)}return!0},bindMapEvents:function(){var t=this;this.map&&(Object.entries(this.$listeners).forEach((function(e){var i=Object(o.a)(e,2),r=i[0],n=i[1];return t.map.on(r,n)})),this.map.on())},unbindMapEvents:function(){var t=this;this.map&&Object.entries(this.$listeners).forEach((function(e){var i=Object(o.a)(e,2),r=i[0],n=i[1];return t.map.un(r,n)}))},resize:function(){this.map.updateSize()},moveTo:function(t){this.map&&this.map.getView().animate({center:t,duration:200})},zoomTo:function(t){this.map&&this.map.getView().animate({zoom:Number.parseInt(t),duration:200})},zoomIn:function(){if(this.map){var t=this.map.getView();this.zoomTo(t.getZoom()+1)}},zoomOut:function(){if(this.map){var t=this.map.getView();this.zoomTo(t.getZoom()-1)}},mapReady:function(t){this.map?t&&t(this.map,this):this.$once("ready",t)},createVectorLayer:function(){if(this.map&&!this.vectorLayer){var t=new d.a;return this.vectorLayer=new l.a({source:t,zIndex:1}),this.map.addLayer(this.vectorLayer),this.vectorLayer}},addFeature:function(t){if(this.map){this.vectorLayer||this.createVectorLayer();var e=this.vectorLayer.getSource(),i=[].concat(t);e.addFeatures(i)}},removeFeature:function(t){if(this.vectorLayer){var e=this.vectorLayer.getSource();[].concat(t).forEach((function(t){return e.removeFeature(t)}))}},getMetersPerUnit:function(){return this.map?this.map.getView().getProjection().getMetersPerUnit():0},setViewSize:function(){var t=this.$el.getBoundingClientRect();this.viewWidth=t.width||0,this.viewHeight=t.height||0,this.map&&this.map.updateSize(),this.$emit("viewSizeChange",t)},setCanvasFilter:function(){if(this.map){var t=this.map.getViewport();t&&(t.style.filter=this.filterStyle)}}},mounted:function(){this.init()},beforeDestroy:function(){this.dispose()}};i(483),i(398),e.a=Object(r.a)(g)},407:function(t,e,i){"use strict";i(91),i(161),i(341),i(165),i(92);var r=i(69),n=i(41),o=i(556),s=i(555),a=function(){function t(t){var e=t||{};this.font_=e.font,this.rotation_=e.rotation,this.rotateWithView_=e.rotateWithView,this.scale_=e.scale,this.text_=e.text,this.textAlign_=e.textAlign,this.textBaseline_=e.textBaseline,this.fill_=void 0!==e.fill?e.fill:new o.a({color:"#333"}),this.maxAngle_=void 0!==e.maxAngle?e.maxAngle:Math.PI/4,this.placement_=void 0!==e.placement?e.placement:s.a.POINT,this.overflow_=!!e.overflow,this.stroke_=void 0!==e.stroke?e.stroke:null,this.offsetX_=void 0!==e.offsetX?e.offsetX:0,this.offsetY_=void 0!==e.offsetY?e.offsetY:0,this.backgroundFill_=e.backgroundFill?e.backgroundFill:null,this.backgroundStroke_=e.backgroundStroke?e.backgroundStroke:null,this.padding_=void 0===e.padding?null:e.padding}return t.prototype.clone=function(){return new t({font:this.getFont(),placement:this.getPlacement(),maxAngle:this.getMaxAngle(),overflow:this.getOverflow(),rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:this.getScale(),text:this.getText(),textAlign:this.getTextAlign(),textBaseline:this.getTextBaseline(),fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,offsetX:this.getOffsetX(),offsetY:this.getOffsetY(),backgroundFill:this.getBackgroundFill()?this.getBackgroundFill().clone():void 0,backgroundStroke:this.getBackgroundStroke()?this.getBackgroundStroke().clone():void 0,padding:this.getPadding()})},t.prototype.getOverflow=function(){return this.overflow_},t.prototype.getFont=function(){return this.font_},t.prototype.getMaxAngle=function(){return this.maxAngle_},t.prototype.getPlacement=function(){return this.placement_},t.prototype.getOffsetX=function(){return this.offsetX_},t.prototype.getOffsetY=function(){return this.offsetY_},t.prototype.getFill=function(){return this.fill_},t.prototype.getRotateWithView=function(){return this.rotateWithView_},t.prototype.getRotation=function(){return this.rotation_},t.prototype.getScale=function(){return this.scale_},t.prototype.getStroke=function(){return this.stroke_},t.prototype.getText=function(){return this.text_},t.prototype.getTextAlign=function(){return this.textAlign_},t.prototype.getTextBaseline=function(){return this.textBaseline_},t.prototype.getBackgroundFill=function(){return this.backgroundFill_},t.prototype.getBackgroundStroke=function(){return this.backgroundStroke_},t.prototype.getPadding=function(){return this.padding_},t.prototype.setOverflow=function(t){this.overflow_=t},t.prototype.setFont=function(t){this.font_=t},t.prototype.setMaxAngle=function(t){this.maxAngle_=t},t.prototype.setOffsetX=function(t){this.offsetX_=t},t.prototype.setOffsetY=function(t){this.offsetY_=t},t.prototype.setPlacement=function(t){this.placement_=t},t.prototype.setRotateWithView=function(t){this.rotateWithView_=t},t.prototype.setFill=function(t){this.fill_=t},t.prototype.setRotation=function(t){this.rotation_=t},t.prototype.setScale=function(t){this.scale_=t},t.prototype.setStroke=function(t){this.stroke_=t},t.prototype.setText=function(t){this.text_=t},t.prototype.setTextAlign=function(t){this.textAlign_=t},t.prototype.setTextBaseline=function(t){this.textBaseline_=t},t.prototype.setBackgroundFill=function(t){this.backgroundFill_=t},t.prototype.setBackgroundStroke=function(t){this.backgroundStroke_=t},t.prototype.setPadding=function(t){this.padding_=t},t}(),h=i(1161),c=i(1162),u=i(1860),l=i(1163),d=i(845),p={fill:o.a,text:a,stroke:h.a,circle:c.a,icon:u.a,regularShape:l.a,backgroundFill:o.a,backgroundStroke:h.a},f=[c.a,u.a,l.a];function g(t){return"object"===Object(n.a)(t)}function _(t,e,i){var r,n;if(null!=i)return t?["fill","backgroundFill"].includes(e)?(n=g(r=i)?r:{color:r},new o.a(n)):"text"===e?g(i)?y(i,t):i:y(i,t):i}function y(t,e){var i={};return Object.entries(t).forEach((function(t){var e=Object(r.a)(t,2),n=e[0],o=e[1],s=p[n];"font"===n&&(o="".concat(o," sans-serif")),i[f.includes(s)?"image":n]=_(s,n,o)})),new(e||d.c)(i)}e.a=y},425:function(t,e,i){"use strict";var r,n=i(428),o=i(433),s=i(406),a=i(440),h=(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),c=function(t){function e(e){var i=t.call(this)||this;if(i.id_=void 0,i.geometryName_="geometry",i.style_=null,i.styleFunction_=void 0,i.geometryChangeKey_=null,i.addEventListener(Object(a.b)(i.geometryName_),i.handleGeometryChanged_),e)if("function"==typeof e.getSimplifiedGeometry){var r=e;i.setGeometry(r)}else{var n=e;i.setProperties(n)}return i}return h(e,t),e.prototype.clone=function(){var t=new e(this.getProperties());t.setGeometryName(this.getGeometryName());var i=this.getGeometry();i&&t.setGeometry(i.clone());var r=this.getStyle();return r&&t.setStyle(r),t},e.prototype.getGeometry=function(){return this.get(this.geometryName_)},e.prototype.getId=function(){return this.id_},e.prototype.getGeometryName=function(){return this.geometryName_},e.prototype.getStyle=function(){return this.style_},e.prototype.getStyleFunction=function(){return this.styleFunction_},e.prototype.handleGeometryChange_=function(){this.changed()},e.prototype.handleGeometryChanged_=function(){this.geometryChangeKey_&&(Object(o.c)(this.geometryChangeKey_),this.geometryChangeKey_=null);var t=this.getGeometry();t&&(this.geometryChangeKey_=Object(o.a)(t,s.a.CHANGE,this.handleGeometryChange_,this)),this.changed()},e.prototype.setGeometry=function(t){this.set(this.geometryName_,t)},e.prototype.setStyle=function(t){this.style_=t,this.styleFunction_=t?function(t){if("function"==typeof t)return t;var e;Array.isArray(t)?e=t:(Object(n.a)("function"==typeof t.getZIndex,41),e=[t]);return function(){return e}}(t):void 0,this.changed()},e.prototype.setId=function(t){this.id_=t,this.changed()},e.prototype.setGeometryName=function(t){this.removeEventListener(Object(a.b)(this.geometryName_),this.handleGeometryChanged_),this.geometryName_=t,this.addEventListener(Object(a.b)(this.geometryName_),this.handleGeometryChanged_),this.handleGeometryChanged_()},e}(a.a);e.a=c},528:function(t,e,i){"use strict";var r,n=i(413),o=i(325),s=i(544),a=i(411),h=i(492),c=i(553),u=i(493),l=i(526),d=i(537),p=i(598),f=i(691),g=i(690),_=i(545),y=(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),m=function(t){function e(e,i){var r=t.call(this)||this;return r.flatMidpoint_=null,r.flatMidpointRevision_=-1,r.maxDelta_=-1,r.maxDeltaRevision_=-1,void 0===i||Array.isArray(e[0])?r.setCoordinates(e,i):r.setFlatCoordinates(i,e),r}return y(e,t),e.prototype.appendCoordinate=function(t){this.flatCoordinates?Object(n.c)(this.flatCoordinates,t):this.flatCoordinates=t.slice(),this.changed()},e.prototype.clone=function(){return new e(this.flatCoordinates.slice(),this.layout)},e.prototype.closestPointXY=function(t,e,i,r){return r<Object(o.e)(this.getExtent(),t,e)?r:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(Object(c.e)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),Object(c.d)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!1,t,e,i,r))},e.prototype.forEachSegment=function(t){return Object(g.a)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)},e.prototype.getCoordinateAtM=function(t,e){if(this.layout!=s.a.XYM&&this.layout!=s.a.XYZM)return null;var i=void 0!==e&&e;return Object(d.b)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,i)},e.prototype.getCoordinates=function(){return Object(l.a)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},e.prototype.getCoordinateAt=function(t,e){return Object(d.a)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,e)},e.prototype.getLength=function(){return Object(f.a)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},e.prototype.getFlatMidpoint=function(){return this.flatMidpointRevision_!=this.getRevision()&&(this.flatMidpoint_=this.getCoordinateAt(.5,this.flatMidpoint_),this.flatMidpointRevision_=this.getRevision()),this.flatMidpoint_},e.prototype.getSimplifiedGeometryInternal=function(t){var i=[];return i.length=Object(_.a)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,i,0),new e(i,s.a.XY)},e.prototype.getType=function(){return a.a.LINE_STRING},e.prototype.intersectsExtent=function(t){return Object(p.a)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)},e.prototype.setCoordinates=function(t,e){this.setLayout(e,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=Object(u.b)(this.flatCoordinates,0,t,this.stride),this.changed()},e}(h.a);e.a=m},537:function(t,e,i){"use strict";i.d(e,"a",(function(){return o})),i.d(e,"b",(function(){return s})),i.d(e,"c",(function(){return a}));var r=i(413),n=i(460);function o(t,e,i,o,s,a){var h=NaN,c=NaN,u=(i-e)/o;if(1===u)h=t[e],c=t[e+1];else if(2==u)h=(1-s)*t[e]+s*t[e+o],c=(1-s)*t[e+1]+s*t[e+o+1];else if(0!==u){for(var l=t[e],d=t[e+1],p=0,f=[0],g=e+o;g<i;g+=o){var _=t[g],y=t[g+1];p+=Math.sqrt((_-l)*(_-l)+(y-d)*(y-d)),f.push(p),l=_,d=y}var m=s*p,v=Object(r.a)(f,m);if(v<0){var b=(m-f[-v-2])/(f[-v-1]-f[-v-2]),O=e+(-v-2)*o;h=Object(n.c)(t[O],t[O+o],b),c=Object(n.c)(t[O+1],t[O+o+1],b)}else h=t[e+v*o],c=t[e+v*o+1]}return a?(a[0]=h,a[1]=c,a):[h,c]}function s(t,e,i,r,o,s){if(i==e)return null;var a;if(o<t[e+r-1])return s?((a=t.slice(e,e+r))[r-1]=o,a):null;if(t[i-1]<o)return s?((a=t.slice(i-r,i))[r-1]=o,a):null;if(o==t[e+r-1])return t.slice(e,e+r);for(var h=e/r,c=i/r;h<c;){var u=h+c>>1;o<t[(u+1)*r-1]?c=u:h=u+1}var l=t[h*r-1];if(o==l)return t.slice((h-1)*r,(h-1)*r+r);var d=(o-l)/(t[(h+1)*r-1]-l);a=[];for(var p=0;p<r-1;++p)a.push(Object(n.c)(t[(h-1)*r+p],t[h*r+p],d));return a.push(o),a}function a(t,e,i,r,n,o,a){if(a)return s(t,e,i[i.length-1],r,n,o);var h;if(n<t[r-1])return o?((h=t.slice(0,r))[r-1]=n,h):null;if(t[t.length-1]<n)return o?((h=t.slice(t.length-r))[r-1]=n,h):null;for(var c=0,u=i.length;c<u;++c){var l=i[c];if(e!=l){if(n<t[e+r-1])return null;if(n<=t[l-1])return s(t,e,l,r,n,!1);e=l}}return null}},655:function(t,e,i){"use strict";var r,n=i(413),o=i(325),s=i(411),a=i(490),h=i(492),c=i(493),u=i(526),l=i(460),d=(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),p=function(t){function e(e,i){var r=t.call(this)||this;return i&&!Array.isArray(e[0])?r.setFlatCoordinates(i,e):r.setCoordinates(e,i),r}return d(e,t),e.prototype.appendPoint=function(t){this.flatCoordinates?Object(n.c)(this.flatCoordinates,t.getFlatCoordinates()):this.flatCoordinates=t.getFlatCoordinates().slice(),this.changed()},e.prototype.clone=function(){return new e(this.flatCoordinates.slice(),this.layout)},e.prototype.closestPointXY=function(t,e,i,r){if(r<Object(o.e)(this.getExtent(),t,e))return r;for(var n=this.flatCoordinates,s=this.stride,a=0,h=n.length;a<h;a+=s){var c=Object(l.f)(t,e,n[a],n[a+1]);if(c<r){r=c;for(var u=0;u<s;++u)i[u]=n[a+u];i.length=s}}return r},e.prototype.getCoordinates=function(){return Object(u.a)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},e.prototype.getPoint=function(t){var e=this.flatCoordinates?this.flatCoordinates.length/this.stride:0;return t<0||e<=t?null:new a.a(this.flatCoordinates.slice(t*this.stride,(t+1)*this.stride),this.layout)},e.prototype.getPoints=function(){for(var t=this.flatCoordinates,e=this.layout,i=this.stride,r=[],n=0,o=t.length;n<o;n+=i){var s=new a.a(t.slice(n,n+i),e);r.push(s)}return r},e.prototype.getType=function(){return s.a.MULTI_POINT},e.prototype.intersectsExtent=function(t){for(var e=this.flatCoordinates,i=this.stride,r=0,n=e.length;r<n;r+=i){var s=e[r],a=e[r+1];if(Object(o.h)(t,s,a))return!0}return!1},e.prototype.setCoordinates=function(t,e){this.setLayout(e,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=Object(c.b)(this.flatCoordinates,0,t,this.stride),this.changed()},e}(h.a);e.a=p},723:function(t,e,i){"use strict";var r,n=i(413),o=i(325),s=i(544),a=i(411),h=i(528),c=i(492),u=i(553),l=i(493),d=i(526),p=i(537),f=i(598),g=i(545),_=(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),y=function(t){function e(e,i,r){var o=t.call(this)||this;if(o.ends_=[],o.maxDelta_=-1,o.maxDeltaRevision_=-1,Array.isArray(e[0]))o.setCoordinates(e,i);else if(void 0!==i&&r)o.setFlatCoordinates(i,e),o.ends_=r;else{for(var s=o.getLayout(),a=e,h=[],c=[],u=0,l=a.length;u<l;++u){var d=a[u];0===u&&(s=d.getLayout()),Object(n.c)(h,d.getFlatCoordinates()),c.push(h.length)}o.setFlatCoordinates(s,h),o.ends_=c}return o}return _(e,t),e.prototype.appendLineString=function(t){this.flatCoordinates?Object(n.c)(this.flatCoordinates,t.getFlatCoordinates().slice()):this.flatCoordinates=t.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()},e.prototype.clone=function(){return new e(this.flatCoordinates.slice(),this.layout,this.ends_.slice())},e.prototype.closestPointXY=function(t,e,i,r){return r<Object(o.e)(this.getExtent(),t,e)?r:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(Object(u.a)(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),Object(u.b)(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!1,t,e,i,r))},e.prototype.getCoordinateAtM=function(t,e,i){if(this.layout!=s.a.XYM&&this.layout!=s.a.XYZM||0===this.flatCoordinates.length)return null;var r=void 0!==e&&e,n=void 0!==i&&i;return Object(p.c)(this.flatCoordinates,0,this.ends_,this.stride,t,r,n)},e.prototype.getCoordinates=function(){return Object(d.b)(this.flatCoordinates,0,this.ends_,this.stride)},e.prototype.getEnds=function(){return this.ends_},e.prototype.getLineString=function(t){return t<0||this.ends_.length<=t?null:new h.a(this.flatCoordinates.slice(0===t?0:this.ends_[t-1],this.ends_[t]),this.layout)},e.prototype.getLineStrings=function(){for(var t=this.flatCoordinates,e=this.ends_,i=this.layout,r=[],n=0,o=0,s=e.length;o<s;++o){var a=e[o],c=new h.a(t.slice(n,a),i);r.push(c),n=a}return r},e.prototype.getFlatMidpoints=function(){for(var t=[],e=this.flatCoordinates,i=0,r=this.ends_,o=this.stride,s=0,a=r.length;s<a;++s){var h=r[s],c=Object(p.a)(e,i,h,o,.5);Object(n.c)(t,c),i=h}return t},e.prototype.getSimplifiedGeometryInternal=function(t){var i=[],r=[];return i.length=Object(g.b)(this.flatCoordinates,0,this.ends_,this.stride,t,i,0,r),new e(i,s.a.XY,r)},e.prototype.getType=function(){return a.a.MULTI_LINE_STRING},e.prototype.intersectsExtent=function(t){return Object(f.b)(this.flatCoordinates,0,this.ends_,this.stride,t)},e.prototype.setCoordinates=function(t,e){this.setLayout(e,t,2),this.flatCoordinates||(this.flatCoordinates=[]);var i=Object(l.c)(this.flatCoordinates,0,t,this.stride,this.ends_);this.flatCoordinates.length=0===i.length?0:i[i.length-1],this.changed()},e}(c.a);e.a=y},724:function(t,e,i){"use strict";var r=i(413),n=i(325),o=i(544),s=i(411),a=i(655),h=i(602),c=i(492),u=i(809);var l,d=i(553),p=i(761),f=i(493),g=i(526),_=i(841),y=i(598),m=i(857),v=i(545),b=(l=function(t,e){return(l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}l(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),O=function(t){function e(e,i,n){var o=t.call(this)||this;if(o.endss_=[],o.flatInteriorPointsRevision_=-1,o.flatInteriorPoints_=null,o.maxDelta_=-1,o.maxDeltaRevision_=-1,o.orientedRevision_=-1,o.orientedFlatCoordinates_=null,!n&&!Array.isArray(e[0])){for(var s=o.getLayout(),a=e,h=[],c=[],u=0,l=a.length;u<l;++u){var d=a[u];0===u&&(s=d.getLayout());for(var p=h.length,f=d.getEnds(),g=0,_=f.length;g<_;++g)f[g]+=p;Object(r.c)(h,d.getFlatCoordinates()),c.push(f)}i=s,e=h,n=c}return void 0!==i&&n?(o.setFlatCoordinates(i,e),o.endss_=n):o.setCoordinates(e,i),o}return b(e,t),e.prototype.appendPolygon=function(t){var e;if(this.flatCoordinates){var i=this.flatCoordinates.length;Object(r.c)(this.flatCoordinates,t.getFlatCoordinates());for(var n=0,o=(e=t.getEnds().slice()).length;n<o;++n)e[n]+=i}else this.flatCoordinates=t.getFlatCoordinates().slice(),e=t.getEnds().slice(),this.endss_.push();this.endss_.push(e),this.changed()},e.prototype.clone=function(){for(var t=this.endss_.length,i=new Array(t),r=0;r<t;++r)i[r]=this.endss_[r].slice();return new e(this.flatCoordinates.slice(),this.layout,i)},e.prototype.closestPointXY=function(t,e,i,r){return r<Object(n.e)(this.getExtent(),t,e)?r:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(Object(d.f)(this.flatCoordinates,0,this.endss_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),Object(d.c)(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,this.maxDelta_,!0,t,e,i,r))},e.prototype.containsXY=function(t,e){return Object(p.d)(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,t,e)},e.prototype.getArea=function(){return Object(u.c)(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride)},e.prototype.getCoordinates=function(t){var e;return void 0!==t?(e=this.getOrientedFlatCoordinates().slice(),Object(m.d)(e,0,this.endss_,this.stride,t)):e=this.flatCoordinates,Object(g.c)(e,0,this.endss_,this.stride)},e.prototype.getEndss=function(){return this.endss_},e.prototype.getFlatInteriorPoints=function(){if(this.flatInteriorPointsRevision_!=this.getRevision()){var t=function(t,e,i,r){for(var o=[],s=Object(n.j)(),a=0,h=i.length;a<h;++a){var c=i[a];s=Object(n.o)(t,e,c[0],r),o.push((s[0]+s[2])/2,(s[1]+s[3])/2),e=c[c.length-1]}return o}(this.flatCoordinates,0,this.endss_,this.stride);this.flatInteriorPoints_=Object(_.b)(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,t),this.flatInteriorPointsRevision_=this.getRevision()}return this.flatInteriorPoints_},e.prototype.getInteriorPoints=function(){return new a.a(this.getFlatInteriorPoints().slice(),o.a.XYM)},e.prototype.getOrientedFlatCoordinates=function(){if(this.orientedRevision_!=this.getRevision()){var t=this.flatCoordinates;Object(m.b)(t,0,this.endss_,this.stride)?this.orientedFlatCoordinates_=t:(this.orientedFlatCoordinates_=t.slice(),this.orientedFlatCoordinates_.length=Object(m.d)(this.orientedFlatCoordinates_,0,this.endss_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_},e.prototype.getSimplifiedGeometryInternal=function(t){var i=[],r=[];return i.length=Object(v.d)(this.flatCoordinates,0,this.endss_,this.stride,Math.sqrt(t),i,0,r),new e(i,o.a.XY,r)},e.prototype.getPolygon=function(t){if(t<0||this.endss_.length<=t)return null;var e;if(0===t)e=0;else{var i=this.endss_[t-1];e=i[i.length-1]}var r=this.endss_[t].slice(),n=r[r.length-1];if(0!==e)for(var o=0,s=r.length;o<s;++o)r[o]-=e;return new h.a(this.flatCoordinates.slice(e,n),this.layout,r)},e.prototype.getPolygons=function(){for(var t=this.layout,e=this.flatCoordinates,i=this.endss_,r=[],n=0,o=0,s=i.length;o<s;++o){var a=i[o].slice(),c=a[a.length-1];if(0!==n)for(var u=0,l=a.length;u<l;++u)a[u]-=n;var d=new h.a(e.slice(n,c),t,a);r.push(d),n=c}return r},e.prototype.getType=function(){return s.a.MULTI_POLYGON},e.prototype.intersectsExtent=function(t){return Object(y.d)(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,t)},e.prototype.setCoordinates=function(t,e){this.setLayout(e,t,3),this.flatCoordinates||(this.flatCoordinates=[]);var i=Object(f.d)(this.flatCoordinates,0,t,this.stride,this.endss_);if(0===i.length)this.flatCoordinates.length=0;else{var r=i[i.length-1];this.flatCoordinates.length=0===r.length?0:r[r.length-1]}this.changed()},e}(c.a);e.a=O},794:function(t,e,i){"use strict";var r,n=i(325),o=i(411),s=i(492),a=i(493),h=i(711),c=(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),u=function(t){function e(e,i,r){var n=t.call(this)||this;if(void 0!==r&&void 0===i)n.setFlatCoordinates(r,e);else{var o=i||0;n.setCenterAndRadius(e,o,r)}return n}return c(e,t),e.prototype.clone=function(){return new e(this.flatCoordinates.slice(),void 0,this.layout)},e.prototype.closestPointXY=function(t,e,i,r){var n=this.flatCoordinates,o=t-n[0],s=e-n[1],a=o*o+s*s;if(a<r){if(0===a)for(var h=0;h<this.stride;++h)i[h]=n[h];else{var c=this.getRadius()/Math.sqrt(a);i[0]=n[0]+c*o,i[1]=n[1]+c*s;for(h=2;h<this.stride;++h)i[h]=n[h]}return i.length=this.stride,a}return r},e.prototype.containsXY=function(t,e){var i=this.flatCoordinates,r=t-i[0],n=e-i[1];return r*r+n*n<=this.getRadiusSquared_()},e.prototype.getCenter=function(){return this.flatCoordinates.slice(0,this.stride)},e.prototype.computeExtent=function(t){var e=this.flatCoordinates,i=e[this.stride]-e[0];return Object(n.k)(e[0]-i,e[1]-i,e[0]+i,e[1]+i,t)},e.prototype.getRadius=function(){return Math.sqrt(this.getRadiusSquared_())},e.prototype.getRadiusSquared_=function(){var t=this.flatCoordinates[this.stride]-this.flatCoordinates[0],e=this.flatCoordinates[this.stride+1]-this.flatCoordinates[1];return t*t+e*e},e.prototype.getType=function(){return o.a.CIRCLE},e.prototype.intersectsExtent=function(t){var e=this.getExtent();if(Object(n.F)(t,e)){var i=this.getCenter();return t[0]<=i[0]&&t[2]>=i[0]||(t[1]<=i[1]&&t[3]>=i[1]||Object(n.t)(t,this.intersectsCoordinate.bind(this)))}return!1},e.prototype.setCenter=function(t){var e=this.stride,i=this.flatCoordinates[e]-this.flatCoordinates[0],r=t.slice();r[e]=r[0]+i;for(var n=1;n<e;++n)r[e+n]=t[n];this.setFlatCoordinates(this.layout,r),this.changed()},e.prototype.setCenterAndRadius=function(t,e,i){this.setLayout(i,t,0),this.flatCoordinates||(this.flatCoordinates=[]);var r=this.flatCoordinates,n=Object(a.a)(r,0,t,this.stride);r[n++]=r[0]+e;for(var o=1,s=this.stride;o<s;++o)r[n++]=r[o];r.length=n,this.changed()},e.prototype.getCoordinates=function(){return null},e.prototype.setCoordinates=function(t,e){},e.prototype.setRadius=function(t){this.flatCoordinates[this.stride]=this.flatCoordinates[0]+t,this.changed()},e.prototype.rotate=function(t,e){var i=this.getCenter(),r=this.getStride();this.setCenter(Object(h.a)(i,0,i.length,r,t,e,i)),this.changed()},e.prototype.translate=function(t,e){var i=this.getCenter(),r=this.getStride();this.setCenter(Object(h.d)(i,0,i.length,r,t,e,i)),this.changed()},e}(s.a);u.prototype.transform,e.a=u},797:function(t,e,i){"use strict";var r=i(428),n=i(425),o=i(489),s=i(443),a=i(346),h=i(640),c=function(){function t(){this.dataProjection=null,this.defaultFeatureProjection=null}return t.prototype.getReadOptions=function(t,e){var i;if(e){var r=e.dataProjection?Object(a.i)(e.dataProjection):this.readProjection(t);e.extent&&r&&r.getUnits()===h.b.TILE_PIXELS&&(r=Object(a.i)(r)).setWorldExtent(e.extent),i={dataProjection:r,featureProjection:e.featureProjection}}return this.adaptOptions(i)},t.prototype.adaptOptions=function(t){return Object(o.a)({dataProjection:this.dataProjection,featureProjection:this.defaultFeatureProjection},t)},t.prototype.getType=function(){return Object(s.b)()},t.prototype.readFeature=function(t,e){return Object(s.b)()},t.prototype.readFeatures=function(t,e){return Object(s.b)()},t.prototype.readGeometry=function(t,e){return Object(s.b)()},t.prototype.readProjection=function(t){return Object(s.b)()},t.prototype.writeFeature=function(t,e){return Object(s.b)()},t.prototype.writeFeatures=function(t,e){return Object(s.b)()},t.prototype.writeGeometry=function(t,e){return Object(s.b)()},t}();function u(t,e,i){var r,n=i?Object(a.i)(i.featureProjection):null,o=i?Object(a.i)(i.dataProjection):null;if(r=n&&o&&!Object(a.f)(n,o)?(e?t.clone():t).transform(e?n:o,e?o:n):t,e&&i&&void 0!==i.decimals){var s=Math.pow(10,i.decimals);r===t&&(r=t.clone()),r.applyTransform((function(t){for(var e=0,i=t.length;e<i;++e)t[e]=Math.round(t[e]*s)/s;return t}))}return r}var l,d=i(843),p=(l=function(t,e){return(l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}l(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});function f(t){if("string"==typeof t){var e=JSON.parse(t);return e||null}return null!==t?t:null}var g=function(t){function e(){return t.call(this)||this}return p(e,t),e.prototype.getType=function(){return d.a.JSON},e.prototype.readFeature=function(t,e){return this.readFeatureFromObject(f(t),this.getReadOptions(t,e))},e.prototype.readFeatures=function(t,e){return this.readFeaturesFromObject(f(t),this.getReadOptions(t,e))},e.prototype.readFeatureFromObject=function(t,e){return Object(s.b)()},e.prototype.readFeaturesFromObject=function(t,e){return Object(s.b)()},e.prototype.readGeometry=function(t,e){return this.readGeometryFromObject(f(t),this.getReadOptions(t,e))},e.prototype.readGeometryFromObject=function(t,e){return Object(s.b)()},e.prototype.readProjection=function(t){return this.readProjectionFromObject(f(t))},e.prototype.readProjectionFromObject=function(t){return Object(s.b)()},e.prototype.writeFeature=function(t,e){return JSON.stringify(this.writeFeatureObject(t,e))},e.prototype.writeFeatureObject=function(t,e){return Object(s.b)()},e.prototype.writeFeatures=function(t,e){return JSON.stringify(this.writeFeaturesObject(t,e))},e.prototype.writeFeaturesObject=function(t,e){return Object(s.b)()},e.prototype.writeGeometry=function(t,e){return JSON.stringify(this.writeGeometryObject(t,e))},e.prototype.writeGeometryObject=function(t,e){return Object(s.b)()},e}(c),_=i(433),y=i(406),m=i(325),v=i(842),b=i(411),O=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function r(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}();function C(t){for(var e=[],i=0,r=t.length;i<r;++i)e.push(t[i].clone());return e}var w=function(t){function e(e){var i=t.call(this)||this;return i.geometries_=e||null,i.changeEventsKeys_=[],i.listenGeometriesChange_(),i}return O(e,t),e.prototype.unlistenGeometriesChange_=function(){this.changeEventsKeys_.forEach(_.c),this.changeEventsKeys_.length=0},e.prototype.listenGeometriesChange_=function(){if(this.geometries_)for(var t=0,e=this.geometries_.length;t<e;++t)this.changeEventsKeys_.push(Object(_.a)(this.geometries_[t],y.a.CHANGE,this.changed,this))},e.prototype.clone=function(){var t=new e(null);return t.setGeometries(this.geometries_),t},e.prototype.closestPointXY=function(t,e,i,r){if(r<Object(m.e)(this.getExtent(),t,e))return r;for(var n=this.geometries_,o=0,s=n.length;o<s;++o)r=n[o].closestPointXY(t,e,i,r);return r},e.prototype.containsXY=function(t,e){for(var i=this.geometries_,r=0,n=i.length;r<n;++r)if(i[r].containsXY(t,e))return!0;return!1},e.prototype.computeExtent=function(t){Object(m.l)(t);for(var e=this.geometries_,i=0,r=e.length;i<r;++i)Object(m.q)(t,e[i].getExtent());return t},e.prototype.getGeometries=function(){return C(this.geometries_)},e.prototype.getGeometriesArray=function(){return this.geometries_},e.prototype.getGeometriesArrayRecursive=function(){for(var t=[],e=this.geometries_,i=0,r=e.length;i<r;++i)e[i].getType()===this.getType()?t=t.concat(e[i].getGeometriesArrayRecursive()):t.push(e[i]);return t},e.prototype.getSimplifiedGeometry=function(t){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),t<0||0!==this.simplifiedGeometryMaxMinSquaredTolerance&&t<this.simplifiedGeometryMaxMinSquaredTolerance)return this;for(var i=[],r=this.geometries_,n=!1,o=0,s=r.length;o<s;++o){var a=r[o],h=a.getSimplifiedGeometry(t);i.push(h),h!==a&&(n=!0)}if(n){var c=new e(null);return c.setGeometriesArray(i),c}return this.simplifiedGeometryMaxMinSquaredTolerance=t,this},e.prototype.getType=function(){return b.a.GEOMETRY_COLLECTION},e.prototype.intersectsExtent=function(t){for(var e=this.geometries_,i=0,r=e.length;i<r;++i)if(e[i].intersectsExtent(t))return!0;return!1},e.prototype.isEmpty=function(){return 0===this.geometries_.length},e.prototype.rotate=function(t,e){for(var i=this.geometries_,r=0,n=i.length;r<n;++r)i[r].rotate(t,e);this.changed()},e.prototype.scale=function(t,e,i){var r=i;r||(r=Object(m.x)(this.getExtent()));for(var n=this.geometries_,o=0,s=n.length;o<s;++o)n[o].scale(t,e,r);this.changed()},e.prototype.setGeometries=function(t){this.setGeometriesArray(C(t))},e.prototype.setGeometriesArray=function(t){this.unlistenGeometriesChange_(),this.geometries_=t,this.listenGeometriesChange_(),this.changed()},e.prototype.applyTransform=function(t){for(var e=this.geometries_,i=0,r=e.length;i<r;++i)e[i].applyTransform(t);this.changed()},e.prototype.translate=function(t,e){for(var i=this.geometries_,r=0,n=i.length;r<n;++r)i[r].translate(t,e);this.changed()},e.prototype.disposeInternal=function(){this.unlistenGeometriesChange_(),t.prototype.disposeInternal.call(this)},e}(v.a),j=i(528),x=i(723),F=i(655),P=i(724),E=i(490),S=i(602),T=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function r(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),G=function(t){function e(e){var i=this,r=e||{};return(i=t.call(this)||this).dataProjection=Object(a.i)(r.dataProjection?r.dataProjection:"EPSG:4326"),r.featureProjection&&(i.defaultFeatureProjection=Object(a.i)(r.featureProjection)),i.geometryName_=r.geometryName,i.extractGeometryName_=r.extractGeometryName,i}return T(e,t),e.prototype.readFeatureFromObject=function(t,e){var i=null,r=I((i="Feature"===t.type?t:{type:"Feature",geometry:t,properties:null}).geometry,e),o=new n.a;return this.geometryName_?o.setGeometryName(this.geometryName_):this.extractGeometryName_&&"geometry_name"in i!==void 0&&o.setGeometryName(i.geometry_name),o.setGeometry(r),"id"in i&&o.setId(i.id),i.properties&&o.setProperties(i.properties,!0),o},e.prototype.readFeaturesFromObject=function(t,e){var i=null;if("FeatureCollection"===t.type){i=[];for(var r=t.features,n=0,o=r.length;n<o;++n)i.push(this.readFeatureFromObject(r[n],e))}else i=[this.readFeatureFromObject(t,e)];return i},e.prototype.readGeometryFromObject=function(t,e){return I(t,e)},e.prototype.readProjectionFromObject=function(t){var e,i=t.crs;return i?"name"==i.type?e=Object(a.i)(i.properties.name):"EPSG"===i.type?e=Object(a.i)("EPSG:"+i.properties.code):Object(r.a)(!1,36):e=this.dataProjection,e},e.prototype.writeFeatureObject=function(t,e){e=this.adaptOptions(e);var i={type:"Feature",geometry:null,properties:null},r=t.getId();void 0!==r&&(i.id=r);var n=t.getGeometry();n&&(i.geometry=k(n,e));var s=t.getProperties();return delete s[t.getGeometryName()],Object(o.d)(s)||(i.properties=s),i},e.prototype.writeFeaturesObject=function(t,e){e=this.adaptOptions(e);for(var i=[],r=0,n=t.length;r<n;++r)i.push(this.writeFeatureObject(t[r],e));return{type:"FeatureCollection",features:i}},e.prototype.writeGeometryObject=function(t,e){return k(t,this.adaptOptions(e))},e}(g);function I(t,e){if(!t)return null;var i;switch(t.type){case b.a.POINT:i=function(t){return new E.a(t.coordinates)}(t);break;case b.a.LINE_STRING:i=function(t){return new j.a(t.coordinates)}(t);break;case b.a.POLYGON:i=function(t){return new S.a(t.coordinates)}(t);break;case b.a.MULTI_POINT:i=function(t){return new F.a(t.coordinates)}(t);break;case b.a.MULTI_LINE_STRING:i=function(t){return new x.a(t.coordinates)}(t);break;case b.a.MULTI_POLYGON:i=function(t){return new P.a(t.coordinates)}(t);break;case b.a.GEOMETRY_COLLECTION:i=function(t,e){var i=t.geometries.map((function(t){return I(t,e)}));return new w(i)}(t);break;default:throw new Error("Unsupported GeoJSON type: "+t.type)}return u(i,!1,e)}function k(t,e){var i,r=(t=u(t,!0,e)).getType();switch(r){case b.a.POINT:i=function(t,e){return{type:"Point",coordinates:t.getCoordinates()}}(t);break;case b.a.LINE_STRING:i=function(t,e){return{type:"LineString",coordinates:t.getCoordinates()}}(t);break;case b.a.POLYGON:i=function(t,e){var i;e&&(i=e.rightHanded);return{type:"Polygon",coordinates:t.getCoordinates(i)}}(t,e);break;case b.a.MULTI_POINT:i=function(t,e){return{type:"MultiPoint",coordinates:t.getCoordinates()}}(t);break;case b.a.MULTI_LINE_STRING:i=function(t,e){return{type:"MultiLineString",coordinates:t.getCoordinates()}}(t);break;case b.a.MULTI_POLYGON:i=function(t,e){var i;e&&(i=e.rightHanded);return{type:"MultiPolygon",coordinates:t.getCoordinates(i)}}(t,e);break;case b.a.GEOMETRY_COLLECTION:i=function(t,e){return{type:"GeometryCollection",geometries:t.getGeometriesArray().map((function(t){var i=Object(o.a)({},e);return delete i.featureProjection,k(t,i)}))}}(t,e);break;case b.a.CIRCLE:i={type:"GeometryCollection",geometries:[]};break;default:throw new Error("Unsupported geometry type: "+r)}return i}e.a=G},944:function(t,e,i){"use strict";var r,n=i(406),o=i(425),s=i(710),a=i(943),h=i(440),c=i(631),u=i(637),l=i(647),d=(i(325),i(552)),p=i(794),f=i(411),g=i(528),_=i(723),y=i(655),m=i(724),v=i(490),b=i(602),O=i(426),C=i(941),w=i(470),j=i(464),x=i(845),F=i(346),P=(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),E="Point",S="LineString",T="Polygon",G="Circle",I="drawstart",k="drawend",M="drawabort",L=function(t){function e(e,i){var r=t.call(this,e)||this;return r.feature=i,r}return P(e,t),e}(u.a),R=function(t){function e(e){var i=this,r=e;r.stopDown||(r.stopDown=d.a),(i=t.call(this,r)||this).shouldHandle_=!1,i.downPx_=null,i.downTimeout_,i.lastDragTime_,i.freehand_=!1,i.source_=e.source?e.source:null,i.features_=e.features?e.features:null,i.snapTolerance_=e.snapTolerance?e.snapTolerance:12,i.type_=e.type,i.mode_=function(t){var e;t===f.a.POINT||t===f.a.MULTI_POINT?e=E:t===f.a.LINE_STRING||t===f.a.MULTI_LINE_STRING?e=S:t===f.a.POLYGON||t===f.a.MULTI_POLYGON?e=T:t===f.a.CIRCLE&&(e=G);return e}(i.type_),i.stopClick_=!!e.stopClick,i.minPoints_=e.minPoints?e.minPoints:i.mode_===T?3:2,i.maxPoints_=e.maxPoints?e.maxPoints:1/0,i.finishCondition_=e.finishCondition?e.finishCondition:d.b;var n,o=e.geometryFunction;if(!o)if(i.type_===f.a.CIRCLE)o=function(t,e,i){var r=e||new p.a([NaN,NaN]),n=Object(F.g)(t[0],i),o=Object(c.h)(n,Object(F.g)(t[1],i));r.setCenterAndRadius(n,Math.sqrt(o));var s=Object(F.m)();return s&&r.transform(i,s),r};else{var s,a=i.mode_;a===E?s=v.a:a===S?s=g.a:a===T&&(s=b.a),o=function(t,e,i){var r=e;return r?a===T?t[0].length?r.setCoordinates([t[0].concat([t[0][0]])]):r.setCoordinates([]):r.setCoordinates(t):r=new s(t),r}}return i.geometryFunction_=o,i.dragVertexDelay_=void 0!==e.dragVertexDelay?e.dragVertexDelay:500,i.finishCoordinate_=null,i.sketchFeature_=null,i.sketchPoint_=null,i.sketchCoords_=null,i.sketchLine_=null,i.sketchLineCoords_=null,i.squaredClickTolerance_=e.clickTolerance?e.clickTolerance*e.clickTolerance:36,i.overlay_=new w.a({source:new j.a({useSpatialIndex:!1,wrapX:!!e.wrapX&&e.wrapX}),style:e.style?e.style:(n=Object(x.b)(),function(t,e){return n[t.getGeometry().getType()]}),updateWhileInteracting:!0}),i.geometryName_=e.geometryName,i.condition_=e.condition?e.condition:l.g,i.freehandCondition_,e.freehand?i.freehandCondition_=l.c:i.freehandCondition_=e.freehandCondition?e.freehandCondition:l.i,i.addEventListener(Object(h.b)(C.a.ACTIVE),i.updateState_),i}return P(e,t),e.prototype.setMap=function(e){t.prototype.setMap.call(this,e),this.updateState_()},e.prototype.getOverlay=function(){return this.overlay_},e.prototype.handleEvent=function(e){e.originalEvent.type===n.a.CONTEXTMENU&&e.preventDefault(),this.freehand_=this.mode_!==E&&this.freehandCondition_(e);var i=e.type===s.a.POINTERMOVE,r=!0;!this.freehand_&&this.lastDragTime_&&e.type===s.a.POINTERDRAG&&(Date.now()-this.lastDragTime_>=this.dragVertexDelay_?(this.downPx_=e.pixel,this.shouldHandle_=!this.freehand_,i=!0):this.lastDragTime_=void 0,this.shouldHandle_&&void 0!==this.downTimeout_&&(clearTimeout(this.downTimeout_),this.downTimeout_=void 0));return this.freehand_&&e.type===s.a.POINTERDRAG&&null!==this.sketchFeature_?(this.addToDrawing_(e.coordinate),r=!1):this.freehand_&&e.type===s.a.POINTERDOWN?r=!1:i?(r=e.type===s.a.POINTERMOVE)&&this.freehand_?r=this.handlePointerMove_(e):("mouse"==e.pointerEvent.pointerType||e.type===s.a.POINTERDRAG&&void 0===this.downTimeout_)&&this.handlePointerMove_(e):e.type===s.a.DBLCLICK&&(r=!1),t.prototype.handleEvent.call(this,e)&&r},e.prototype.handleDownEvent=function(t){return this.shouldHandle_=!this.freehand_,this.freehand_?(this.downPx_=t.pixel,this.finishCoordinate_||this.startDrawing_(t),!0):this.condition_(t)?(this.lastDragTime_=Date.now(),this.downTimeout_=setTimeout(function(){this.handlePointerMove_(new a.a(s.a.POINTERMOVE,t.map,t.pointerEvent,!1,t.frameState))}.bind(this),this.dragVertexDelay_),this.downPx_=t.pixel,!0):(this.lastDragTime_=void 0,!1)},e.prototype.handleUpEvent=function(t){var e=!0;this.downTimeout_&&(clearTimeout(this.downTimeout_),this.downTimeout_=void 0),this.handlePointerMove_(t);var i=this.mode_===G;return this.shouldHandle_?(this.finishCoordinate_?this.freehand_||i?this.finishDrawing():this.atFinish_(t)?this.finishCondition_(t)&&this.finishDrawing():this.addToDrawing_(t.coordinate):(this.startDrawing_(t),this.mode_===E&&this.finishDrawing()),e=!1):this.freehand_&&this.abortDrawing(),!e&&this.stopClick_&&t.stopPropagation(),e},e.prototype.handlePointerMove_=function(t){if(this.downPx_&&(!this.freehand_&&this.shouldHandle_||this.freehand_&&!this.shouldHandle_)){var e=this.downPx_,i=t.pixel,r=e[0]-i[0],n=e[1]-i[1],o=r*r+n*n;if(this.shouldHandle_=this.freehand_?o>this.squaredClickTolerance_:o<=this.squaredClickTolerance_,!this.shouldHandle_)return!0}return this.finishCoordinate_?this.modifyDrawing_(t):this.createOrUpdateSketchPoint_(t),!0},e.prototype.atFinish_=function(t){var e=!1;if(this.sketchFeature_){var i=!1,r=[this.finishCoordinate_];if(this.mode_===S)i=this.sketchCoords_.length>this.minPoints_;else if(this.mode_===T){var n=this.sketchCoords_;i=n[0].length>this.minPoints_,r=[n[0][0],n[0][n[0].length-2]]}if(i)for(var o=t.map,s=0,a=r.length;s<a;s++){var h=r[s],c=o.getPixelFromCoordinate(h),u=t.pixel,l=u[0]-c[0],d=u[1]-c[1],p=this.freehand_?1:this.snapTolerance_;if(e=Math.sqrt(l*l+d*d)<=p){this.finishCoordinate_=h;break}}}return e},e.prototype.createOrUpdateSketchPoint_=function(t){var e=t.coordinate.slice();this.sketchPoint_?this.sketchPoint_.getGeometry().setCoordinates(e):(this.sketchPoint_=new o.a(new v.a(e)),this.updateSketchFeatures_())},e.prototype.startDrawing_=function(t){var e=t.coordinate,i=t.map.getView().getProjection();this.finishCoordinate_=e,this.mode_===E?this.sketchCoords_=e.slice():this.mode_===T?(this.sketchCoords_=[[e.slice(),e.slice()]],this.sketchLineCoords_=this.sketchCoords_[0]):this.sketchCoords_=[e.slice(),e.slice()],this.sketchLineCoords_&&(this.sketchLine_=new o.a(new g.a(this.sketchLineCoords_)));var r=this.geometryFunction_(this.sketchCoords_,void 0,i);this.sketchFeature_=new o.a,this.geometryName_&&this.sketchFeature_.setGeometryName(this.geometryName_),this.sketchFeature_.setGeometry(r),this.updateSketchFeatures_(),this.dispatchEvent(new L(I,this.sketchFeature_))},e.prototype.modifyDrawing_=function(t){var e,i,r,n=t.coordinate,s=this.sketchFeature_.getGeometry(),a=t.map.getView().getProjection();(this.mode_===E?i=this.sketchCoords_:this.mode_===T?(i=(e=this.sketchCoords_[0])[e.length-1],this.atFinish_(t)&&(n=this.finishCoordinate_.slice())):i=(e=this.sketchCoords_)[e.length-1],i[0]=n[0],i[1]=n[1],this.geometryFunction_(this.sketchCoords_,s,a),this.sketchPoint_)&&this.sketchPoint_.getGeometry().setCoordinates(n);if(s.getType()==f.a.POLYGON&&this.mode_!==T){this.sketchLine_||(this.sketchLine_=new o.a);var h=s.getLinearRing(0);(r=this.sketchLine_.getGeometry())?(r.setFlatCoordinates(h.getLayout(),h.getFlatCoordinates()),r.changed()):(r=new g.a(h.getFlatCoordinates(),h.getLayout()),this.sketchLine_.setGeometry(r))}else this.sketchLineCoords_&&(r=this.sketchLine_.getGeometry()).setCoordinates(this.sketchLineCoords_);this.updateSketchFeatures_()},e.prototype.addToDrawing_=function(t){var e,i,r=this.sketchFeature_.getGeometry(),n=this.getMap().getView().getProjection();this.mode_===S?(this.finishCoordinate_=t.slice(),(i=this.sketchCoords_).length>=this.maxPoints_&&(this.freehand_?i.pop():e=!0),i.push(t.slice()),this.geometryFunction_(i,r,n)):this.mode_===T&&((i=this.sketchCoords_[0]).length>=this.maxPoints_&&(this.freehand_?i.pop():e=!0),i.push(t.slice()),e&&(this.finishCoordinate_=i[0]),this.geometryFunction_(this.sketchCoords_,r,n)),this.updateSketchFeatures_(),e&&this.finishDrawing()},e.prototype.removeLastPoint=function(){if(this.sketchFeature_){var t,e=this.sketchFeature_.getGeometry(),i=this.getMap().getView().getProjection();this.mode_===S?((t=this.sketchCoords_).splice(-2,1),this.geometryFunction_(t,e,i),t.length>=2&&(this.finishCoordinate_=t[t.length-2].slice())):this.mode_===T&&((t=this.sketchCoords_[0]).splice(-2,1),this.sketchLine_.getGeometry().setCoordinates(t),this.geometryFunction_(this.sketchCoords_,e,i)),0===t.length&&this.abortDrawing(),this.updateSketchFeatures_()}},e.prototype.finishDrawing=function(){var t=this.abortDrawing_();if(t){var e=this.sketchCoords_,i=t.getGeometry(),r=this.getMap().getView().getProjection();this.mode_===S?(e.pop(),this.geometryFunction_(e,i,r)):this.mode_===T&&(e[0].pop(),this.geometryFunction_(e,i,r),e=i.getCoordinates()),this.type_===f.a.MULTI_POINT?t.setGeometry(new y.a([e])):this.type_===f.a.MULTI_LINE_STRING?t.setGeometry(new _.a([e])):this.type_===f.a.MULTI_POLYGON&&t.setGeometry(new m.a([e])),this.dispatchEvent(new L(k,t)),this.features_&&this.features_.push(t),this.source_&&this.source_.addFeature(t)}},e.prototype.abortDrawing_=function(){this.finishCoordinate_=null;var t=this.sketchFeature_;return this.sketchFeature_=null,this.sketchPoint_=null,this.sketchLine_=null,this.overlay_.getSource().clear(!0),t},e.prototype.abortDrawing=function(){var t=this.abortDrawing_();t&&this.dispatchEvent(new L(M,t))},e.prototype.appendCoordinates=function(t){var e=this.mode_,i=[];e===S?i=this.sketchCoords_:e===T&&(i=this.sketchCoords_&&this.sketchCoords_.length?this.sketchCoords_[0]:[]);for(var r=i.pop(),n=0;n<t.length;n++)this.addToDrawing_(t[n]);this.addToDrawing_(r)},e.prototype.extend=function(t){var e=t.getGeometry();this.sketchFeature_=t,this.sketchCoords_=e.getCoordinates();var i=this.sketchCoords_[this.sketchCoords_.length-1];this.finishCoordinate_=i.slice(),this.sketchCoords_.push(i.slice()),this.updateSketchFeatures_(),this.dispatchEvent(new L(I,this.sketchFeature_))},e.prototype.updateSketchFeatures_=function(){var t=[];this.sketchFeature_&&t.push(this.sketchFeature_),this.sketchLine_&&t.push(this.sketchLine_),this.sketchPoint_&&t.push(this.sketchPoint_);var e=this.overlay_.getSource();e.clear(!0),e.addFeatures(t)},e.prototype.updateState_=function(){var t=this.getMap(),e=this.getActive();t&&e||this.abortDrawing(),this.overlay_.setMap(e?t:null)},e}(O.b);e.a=R},945:function(t,e,i){"use strict";var r,n=i(443),o=i(729),s=i(631),a=i(433),h=i(406),c=i(325),u=i(552),l=i(411),d=i(602),p=i(426),f=i(489),g=i(836),_=i(844),y=i(346),m=(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});function v(t){return t.feature?t.feature:t.element?t.element:void 0}var b=[],O=function(t){function e(e){var i=this,r=e||{},n=r;return n.handleDownEvent||(n.handleDownEvent=u.b),n.stopDown||(n.stopDown=u.a),(i=t.call(this,n)||this).source_=r.source?r.source:null,i.vertex_=void 0===r.vertex||r.vertex,i.edge_=void 0===r.edge||r.edge,i.features_=r.features?r.features:null,i.featuresListenerKeys_=[],i.featureChangeListenerKeys_={},i.indexedFeaturesExtents_={},i.pendingFeatures_={},i.pixelTolerance_=void 0!==r.pixelTolerance?r.pixelTolerance:10,i.rBush_=new _.a,i.SEGMENT_WRITERS_={Point:i.writePointGeometry_.bind(i),LineString:i.writeLineStringGeometry_.bind(i),LinearRing:i.writeLineStringGeometry_.bind(i),Polygon:i.writePolygonGeometry_.bind(i),MultiPoint:i.writeMultiPointGeometry_.bind(i),MultiLineString:i.writeMultiLineStringGeometry_.bind(i),MultiPolygon:i.writeMultiPolygonGeometry_.bind(i),GeometryCollection:i.writeGeometryCollectionGeometry_.bind(i),Circle:i.writeCircleGeometry_.bind(i)},i}return m(e,t),e.prototype.addFeature=function(t,e){var i=void 0===e||e,r=Object(n.c)(t),o=t.getGeometry();if(o){var s=this.SEGMENT_WRITERS_[o.getType()];s&&(this.indexedFeaturesExtents_[r]=o.getExtent(Object(c.j)()),s(t,o))}i&&(this.featureChangeListenerKeys_[r]=Object(a.a)(t,h.a.CHANGE,this.handleFeatureChange_,this))},e.prototype.forEachFeatureAdd_=function(t){this.addFeature(t)},e.prototype.forEachFeatureRemove_=function(t){this.removeFeature(t)},e.prototype.getFeatures_=function(){var t;return this.features_?t=this.features_:this.source_&&(t=this.source_.getFeatures()),t},e.prototype.handleEvent=function(e){var i=this.snapTo(e.pixel,e.coordinate,e.map);return i.snapped&&(e.coordinate=i.vertex.slice(0,2),e.pixel=i.vertexPixel),t.prototype.handleEvent.call(this,e)},e.prototype.handleFeatureAdd_=function(t){var e=v(t);this.addFeature(e)},e.prototype.handleFeatureRemove_=function(t){var e=v(t);this.removeFeature(e)},e.prototype.handleFeatureChange_=function(t){var e=t.target;if(this.handlingDownUpSequence){var i=Object(n.c)(e);i in this.pendingFeatures_||(this.pendingFeatures_[i]=e)}else this.updateFeature_(e)},e.prototype.handleUpEvent=function(t){var e=Object(f.c)(this.pendingFeatures_);return e.length&&(e.forEach(this.updateFeature_.bind(this)),this.pendingFeatures_={}),!1},e.prototype.removeFeature=function(t,e){var i=void 0===e||e,r=Object(n.c)(t),o=this.indexedFeaturesExtents_[r];if(o){var s=this.rBush_,h=[];s.forEachInExtent(o,(function(e){t===e.feature&&h.push(e)}));for(var c=h.length-1;c>=0;--c)s.remove(h[c])}i&&(Object(a.c)(this.featureChangeListenerKeys_[r]),delete this.featureChangeListenerKeys_[r])},e.prototype.setMap=function(e){var i=this.getMap(),r=this.featuresListenerKeys_,n=this.getFeatures_();i&&(r.forEach(a.c),r.length=0,n.forEach(this.forEachFeatureRemove_.bind(this))),t.prototype.setMap.call(this,e),e&&(this.features_?r.push(Object(a.a)(this.features_,o.a.ADD,this.handleFeatureAdd_,this),Object(a.a)(this.features_,o.a.REMOVE,this.handleFeatureRemove_,this)):this.source_&&r.push(Object(a.a)(this.source_,g.a.ADDFEATURE,this.handleFeatureAdd_,this),Object(a.a)(this.source_,g.a.REMOVEFEATURE,this.handleFeatureRemove_,this)),n.forEach(this.forEachFeatureAdd_.bind(this)))},e.prototype.snapTo=function(t,e,i){var r=i.getCoordinateFromPixel([t[0]-this.pixelTolerance_,t[1]+this.pixelTolerance_]),n=i.getCoordinateFromPixel([t[0]+this.pixelTolerance_,t[1]-this.pixelTolerance_]),o=Object(c.b)([r,n]),a=this.rBush_.getInExtent(o);this.vertex_&&!this.edge_&&(a=a.filter((function(t){return t.feature.getGeometry().getType()!==l.a.CIRCLE})));var h=!1,u=null,d=null;if(0===a.length)return{snapped:h,vertex:u,vertexPixel:d};for(var p,f=i.getView().getProjection(),g=Object(y.g)(e,f),_=1/0,m=0;m<a.length;++m){var v=a[m];b[0]=Object(y.g)(v.segment[0],f),b[1]=Object(y.g)(v.segment[1],f);var O=Object(s.i)(g,b);O<_&&(p=v,_=O)}var C=p.segment;if(this.vertex_&&!this.edge_){var w=i.getPixelFromCoordinate(C[0]),j=i.getPixelFromCoordinate(C[1]),x=Object(s.h)(t,w),F=Object(s.h)(t,j);Math.sqrt(Math.min(x,F))<=this.pixelTolerance_&&(h=!0,u=x>F?C[1]:C[0],d=i.getPixelFromCoordinate(u))}else if(this.edge_){var P=p.feature.getGeometry().getType()===l.a.CIRCLE;if(P){var E=p.feature.getGeometry(),S=Object(y.m)();S&&(E=E.clone().transform(S,f)),u=Object(y.n)(Object(s.b)(g,E),f)}else b[0]=Object(y.g)(C[0],f),b[1]=Object(y.g)(C[1],f),u=Object(y.n)(Object(s.c)(g,b),f);if(d=i.getPixelFromCoordinate(u),Object(s.d)(t,d)<=this.pixelTolerance_&&(h=!0,this.vertex_&&!P)){w=i.getPixelFromCoordinate(C[0]),j=i.getPixelFromCoordinate(C[1]),x=Object(s.h)(d,w),F=Object(s.h)(d,j);Math.sqrt(Math.min(x,F))<=this.pixelTolerance_&&(u=x>F?C[1]:C[0],d=i.getPixelFromCoordinate(u))}}return h&&(d=[Math.round(d[0]),Math.round(d[1])]),{snapped:h,vertex:u,vertexPixel:d}},e.prototype.updateFeature_=function(t){this.removeFeature(t,!1),this.addFeature(t,!1)},e.prototype.writeCircleGeometry_=function(t,e){var i=this.getMap().getView().getProjection(),r=e,n=Object(y.m)();n&&(r=r.clone().transform(n,i));var o=Object(d.b)(r);n&&o.transform(i,n);for(var s=o.getCoordinates()[0],a=0,h=s.length-1;a<h;++a){var u=s.slice(a,a+2),l={feature:t,segment:u};this.rBush_.insert(Object(c.b)(u),l)}},e.prototype.writeGeometryCollectionGeometry_=function(t,e){for(var i=e.getGeometriesArray(),r=0;r<i.length;++r){var n=this.SEGMENT_WRITERS_[i[r].getType()];n&&n(t,i[r])}},e.prototype.writeLineStringGeometry_=function(t,e){for(var i=e.getCoordinates(),r=0,n=i.length-1;r<n;++r){var o=i.slice(r,r+2),s={feature:t,segment:o};this.rBush_.insert(Object(c.b)(o),s)}},e.prototype.writeMultiLineStringGeometry_=function(t,e){for(var i=e.getCoordinates(),r=0,n=i.length;r<n;++r)for(var o=i[r],s=0,a=o.length-1;s<a;++s){var h=o.slice(s,s+2),u={feature:t,segment:h};this.rBush_.insert(Object(c.b)(h),u)}},e.prototype.writeMultiPointGeometry_=function(t,e){for(var i=e.getCoordinates(),r=0,n=i.length;r<n;++r){var o=i[r],s={feature:t,segment:[o,o]};this.rBush_.insert(e.getExtent(),s)}},e.prototype.writeMultiPolygonGeometry_=function(t,e){for(var i=e.getCoordinates(),r=0,n=i.length;r<n;++r)for(var o=i[r],s=0,a=o.length;s<a;++s)for(var h=o[s],u=0,l=h.length-1;u<l;++u){var d=h.slice(u,u+2),p={feature:t,segment:d};this.rBush_.insert(Object(c.b)(d),p)}},e.prototype.writePointGeometry_=function(t,e){var i=e.getCoordinates(),r={feature:t,segment:[i,i]};this.rBush_.insert(e.getExtent(),r)},e.prototype.writePolygonGeometry_=function(t,e){for(var i=e.getCoordinates(),r=0,n=i.length;r<n;++r)for(var o=i[r],s=0,a=o.length-1;s<a;++s){var h=o.slice(s,s+2),u={feature:t,segment:h};this.rBush_.insert(Object(c.b)(h),u)}},e}(p.b);e.a=O},946:function(t,e,i){"use strict";var r,n=i(443),o=i(754),s=i(729),a=i(425),h=i(710),c=i(413),u=i(631),l=i(637),d=i(406),p=i(647),f=i(325),g=i(411),_=i(490),y=i(602),m=i(426),v=i(470),b=i(464),O=i(836),C=i(844),w=i(845),j=i(346),x=(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),F=[0,0,0,0],P=[],E="modifystart",S="modifyend",T=function(t){function e(e,i,r){var n=t.call(this,e)||this;return n.features=i,n.mapBrowserEvent=r,n}return x(e,t),e}(l.a),G=function(t){function e(e){var i,r,n=t.call(this,e)||this;if(n.boundHandleFeatureChange_=n.handleFeatureChange_.bind(n),n.condition_=e.condition?e.condition:p.h,n.defaultDeleteCondition_=function(t){return Object(p.a)(t)&&Object(p.j)(t)},n.deleteCondition_=e.deleteCondition?e.deleteCondition:n.defaultDeleteCondition_,n.insertVertexCondition_=e.insertVertexCondition?e.insertVertexCondition:p.c,n.vertexFeature_=null,n.vertexSegments_=null,n.lastPixel_=[0,0],n.ignoreNextSingleClick_=!1,n.modified_=!1,n.rBush_=new C.a,n.pixelTolerance_=void 0!==e.pixelTolerance?e.pixelTolerance:10,n.snappedToVertex_=!1,n.changingFeature_=!1,n.dragSegments_=[],n.overlay_=new v.a({source:new b.a({useSpatialIndex:!1,wrapX:!!e.wrapX}),style:e.style?e.style:(i=Object(w.b)(),function(t,e){return i[g.a.POINT]}),updateWhileAnimating:!0,updateWhileInteracting:!0}),n.SEGMENT_WRITERS_={Point:n.writePointGeometry_.bind(n),LineString:n.writeLineStringGeometry_.bind(n),LinearRing:n.writeLineStringGeometry_.bind(n),Polygon:n.writePolygonGeometry_.bind(n),MultiPoint:n.writeMultiPointGeometry_.bind(n),MultiLineString:n.writeMultiLineStringGeometry_.bind(n),MultiPolygon:n.writeMultiPolygonGeometry_.bind(n),Circle:n.writeCircleGeometry_.bind(n),GeometryCollection:n.writeGeometryCollectionGeometry_.bind(n)},n.source_=null,e.source?(n.source_=e.source,r=new o.a(n.source_.getFeatures()),n.source_.addEventListener(O.a.ADDFEATURE,n.handleSourceAdd_.bind(n)),n.source_.addEventListener(O.a.REMOVEFEATURE,n.handleSourceRemove_.bind(n))):r=e.features,!r)throw new Error("The modify interaction requires features or a source");return n.features_=r,n.features_.forEach(n.addFeature_.bind(n)),n.features_.addEventListener(s.a.ADD,n.handleFeatureAdd_.bind(n)),n.features_.addEventListener(s.a.REMOVE,n.handleFeatureRemove_.bind(n)),n.lastPointerEvent_=null,n}return x(e,t),e.prototype.addFeature_=function(t){var e=t.getGeometry();if(e){var i=this.SEGMENT_WRITERS_[e.getType()];i&&i(t,e)}var r=this.getMap();r&&r.isRendered()&&this.getActive()&&this.handlePointerAtPixel_(this.lastPixel_,r),t.addEventListener(d.a.CHANGE,this.boundHandleFeatureChange_)},e.prototype.willModifyFeatures_=function(t){this.modified_||(this.modified_=!0,this.dispatchEvent(new T(E,this.features_,t)))},e.prototype.removeFeature_=function(t){this.removeFeatureSegmentData_(t),this.vertexFeature_&&0===this.features_.getLength()&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null),t.removeEventListener(d.a.CHANGE,this.boundHandleFeatureChange_)},e.prototype.removeFeatureSegmentData_=function(t){var e=this.rBush_,i=[];e.forEach((function(e){t===e.feature&&i.push(e)}));for(var r=i.length-1;r>=0;--r){for(var n=i[r],o=this.dragSegments_.length-1;o>=0;--o)this.dragSegments_[o][0]===n&&this.dragSegments_.splice(o,1);e.remove(n)}},e.prototype.setActive=function(e){this.vertexFeature_&&!e&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null),t.prototype.setActive.call(this,e)},e.prototype.setMap=function(e){this.overlay_.setMap(e),t.prototype.setMap.call(this,e)},e.prototype.getOverlay=function(){return this.overlay_},e.prototype.handleSourceAdd_=function(t){t.feature&&this.features_.push(t.feature)},e.prototype.handleSourceRemove_=function(t){t.feature&&this.features_.remove(t.feature)},e.prototype.handleFeatureAdd_=function(t){this.addFeature_(t.element)},e.prototype.handleFeatureChange_=function(t){if(!this.changingFeature_){var e=t.target;this.removeFeature_(e),this.addFeature_(e)}},e.prototype.handleFeatureRemove_=function(t){var e=t.element;this.removeFeature_(e)},e.prototype.writePointGeometry_=function(t,e){var i=e.getCoordinates(),r={feature:t,geometry:e,segment:[i,i]};this.rBush_.insert(e.getExtent(),r)},e.prototype.writeMultiPointGeometry_=function(t,e){for(var i=e.getCoordinates(),r=0,n=i.length;r<n;++r){var o=i[r],s={feature:t,geometry:e,depth:[r],index:r,segment:[o,o]};this.rBush_.insert(e.getExtent(),s)}},e.prototype.writeLineStringGeometry_=function(t,e){for(var i=e.getCoordinates(),r=0,n=i.length-1;r<n;++r){var o=i.slice(r,r+2),s={feature:t,geometry:e,index:r,segment:o};this.rBush_.insert(Object(f.b)(o),s)}},e.prototype.writeMultiLineStringGeometry_=function(t,e){for(var i=e.getCoordinates(),r=0,n=i.length;r<n;++r)for(var o=i[r],s=0,a=o.length-1;s<a;++s){var h=o.slice(s,s+2),c={feature:t,geometry:e,depth:[r],index:s,segment:h};this.rBush_.insert(Object(f.b)(h),c)}},e.prototype.writePolygonGeometry_=function(t,e){for(var i=e.getCoordinates(),r=0,n=i.length;r<n;++r)for(var o=i[r],s=0,a=o.length-1;s<a;++s){var h=o.slice(s,s+2),c={feature:t,geometry:e,depth:[r],index:s,segment:h};this.rBush_.insert(Object(f.b)(h),c)}},e.prototype.writeMultiPolygonGeometry_=function(t,e){for(var i=e.getCoordinates(),r=0,n=i.length;r<n;++r)for(var o=i[r],s=0,a=o.length;s<a;++s)for(var h=o[s],c=0,u=h.length-1;c<u;++c){var l=h.slice(c,c+2),d={feature:t,geometry:e,depth:[s,r],index:c,segment:l};this.rBush_.insert(Object(f.b)(l),d)}},e.prototype.writeCircleGeometry_=function(t,e){var i=e.getCenter(),r={feature:t,geometry:e,index:0,segment:[i,i]},n={feature:t,geometry:e,index:1,segment:[i,i]},o=[r,n];r.featureSegments=o,n.featureSegments=o,this.rBush_.insert(Object(f.m)(i),r);var s=e,a=Object(j.m)();if(a&&this.getMap()){var h=this.getMap().getView().getProjection();s=s.clone().transform(a,h),s=Object(y.b)(s).transform(h,a)}this.rBush_.insert(s.getExtent(),n)},e.prototype.writeGeometryCollectionGeometry_=function(t,e){for(var i=e.getGeometriesArray(),r=0;r<i.length;++r){var n=i[r];(0,this.SEGMENT_WRITERS_[n.getType()])(t,n)}},e.prototype.createOrUpdateVertexFeature_=function(t){var e=this.vertexFeature_;e?e.getGeometry().setCoordinates(t):(e=new a.a(new _.a(t)),this.vertexFeature_=e,this.overlay_.getSource().addFeature(e));return e},e.prototype.handleEvent=function(e){return!e.pointerEvent||(this.lastPointerEvent_=e,e.map.getView().getInteracting()||e.type!=h.a.POINTERMOVE||this.handlingDownUpSequence||this.handlePointerMove_(e),this.vertexFeature_&&this.deleteCondition_(e)&&(i=!(e.type!=h.a.SINGLECLICK||!this.ignoreNextSingleClick_)||this.removePoint()),e.type==h.a.SINGLECLICK&&(this.ignoreNextSingleClick_=!1),t.prototype.handleEvent.call(this,e)&&!i);var i},e.prototype.handleDragEvent=function(t){this.ignoreNextSingleClick_=!1,this.willModifyFeatures_(t);for(var e=t.coordinate,i=0,r=this.dragSegments_.length;i<r;++i){for(var n=this.dragSegments_[i],o=n[0],s=o.depth,a=o.geometry,h=void 0,c=o.segment,l=n[1];e.length<a.getStride();)e.push(c[l][e.length]);switch(a.getType()){case g.a.POINT:h=e,c[0]=e,c[1]=e;break;case g.a.MULTI_POINT:(h=a.getCoordinates())[o.index]=e,c[0]=e,c[1]=e;break;case g.a.LINE_STRING:(h=a.getCoordinates())[o.index+l]=e,c[l]=e;break;case g.a.MULTI_LINE_STRING:case g.a.POLYGON:(h=a.getCoordinates())[s[0]][o.index+l]=e,c[l]=e;break;case g.a.MULTI_POLYGON:(h=a.getCoordinates())[s[1]][s[0]][o.index+l]=e,c[l]=e;break;case g.a.CIRCLE:if(c[0]=e,c[1]=e,0===o.index)this.changingFeature_=!0,a.setCenter(e),this.changingFeature_=!1;else{this.changingFeature_=!0;var d=t.map.getView().getProjection(),p=Object(u.d)(Object(j.g)(a.getCenter(),d),Object(j.g)(e,d)),f=Object(j.m)();if(f){var _=a.clone().transform(f,d);_.setRadius(p),p=_.transform(d,f).getRadius()}a.setRadius(p),this.changingFeature_=!1}}h&&this.setGeometryCoordinates_(a,h)}this.createOrUpdateVertexFeature_(e)},e.prototype.handleDownEvent=function(t){if(!this.condition_(t))return!1;var e=t.coordinate;this.handlePointerAtPixel_(t.pixel,t.map,e),this.dragSegments_.length=0,this.modified_=!1;var i=this.vertexFeature_;if(i){var r=t.map.getView().getProjection(),o=[],s=i.getGeometry().getCoordinates(),a=Object(f.b)([s]),h=this.rBush_.getInExtent(a),c={};h.sort(I);for(var l=0,d=h.length;l<d;++l){var p=h[l],_=p.segment,y=Object(n.c)(p.feature),m=p.depth;if(m&&(y+="-"+m.join("-")),c[y]||(c[y]=new Array(2)),p.geometry.getType()!==g.a.CIRCLE||1!==p.index)if(!Object(u.e)(_[0],s)||c[y][0])if(!Object(u.e)(_[1],s)||c[y][1])Object(n.c)(_)in this.vertexSegments_&&!c[y][0]&&!c[y][1]&&this.insertVertexCondition_(t)&&o.push([p,s]);else{if((p.geometry.getType()===g.a.LINE_STRING||p.geometry.getType()===g.a.MULTI_LINE_STRING)&&c[y][0]&&0===c[y][0].index)continue;this.dragSegments_.push([p,1]),c[y][1]=p}else this.dragSegments_.push([p,0]),c[y][0]=p;else{var v=M(e,p,r);Object(u.e)(v,s)&&!c[y][0]&&(this.dragSegments_.push([p,0]),c[y][0]=p)}}o.length&&this.willModifyFeatures_(t);for(var b=o.length-1;b>=0;--b)this.insertVertex_.apply(this,o[b])}return!!this.vertexFeature_},e.prototype.handleUpEvent=function(t){for(var e=this.dragSegments_.length-1;e>=0;--e){var i=this.dragSegments_[e][0],r=i.geometry;if(r.getType()===g.a.CIRCLE){var n=r.getCenter(),o=i.featureSegments[0],s=i.featureSegments[1];o.segment[0]=n,o.segment[1]=n,s.segment[0]=n,s.segment[1]=n,this.rBush_.update(Object(f.m)(n),o);var a=r,h=Object(j.m)();if(h){var c=t.map.getView().getProjection();a=a.clone().transform(h,c),a=Object(y.b)(a).transform(c,h)}this.rBush_.update(a.getExtent(),s)}else this.rBush_.update(Object(f.b)(i.segment),i)}return this.modified_&&(this.dispatchEvent(new T(S,this.features_,t)),this.modified_=!1),!1},e.prototype.handlePointerMove_=function(t){this.lastPixel_=t.pixel,this.handlePointerAtPixel_(t.pixel,t.map,t.coordinate)},e.prototype.handlePointerAtPixel_=function(t,e,i){var r=i||e.getCoordinateFromPixel(t),o=e.getView().getProjection(),s=Object(j.h)(Object(f.m)(r,F),o),a=e.getView().getResolution()*this.pixelTolerance_,h=Object(j.o)(Object(f.c)(s,a,F),o),c=this.rBush_.getInExtent(h);if(c.length>0){c.sort((function(t,e){return k(r,t,o)-k(r,e,o)}));var l=c[0],d=l.segment,p=M(r,l,o),_=e.getPixelFromCoordinate(p),y=Object(u.d)(t,_);if(y<=this.pixelTolerance_){var m={};if(l.geometry.getType()===g.a.CIRCLE&&1===l.index)this.snappedToVertex_=!0,this.createOrUpdateVertexFeature_(p);else{var v=e.getPixelFromCoordinate(d[0]),b=e.getPixelFromCoordinate(d[1]),O=Object(u.h)(_,v),C=Object(u.h)(_,b);y=Math.sqrt(Math.min(O,C)),this.snappedToVertex_=y<=this.pixelTolerance_,this.snappedToVertex_&&(p=O>C?d[1]:d[0]),this.createOrUpdateVertexFeature_(p);for(var w=1,x=c.length;w<x;++w){var P=c[w].segment;if(!(Object(u.e)(d[0],P[0])&&Object(u.e)(d[1],P[1])||Object(u.e)(d[0],P[1])&&Object(u.e)(d[1],P[0])))break;m[Object(n.c)(P)]=!0}}return m[Object(n.c)(d)]=!0,void(this.vertexSegments_=m)}}this.vertexFeature_&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null)},e.prototype.insertVertex_=function(t,e){for(var i,r=t.segment,n=t.feature,o=t.geometry,s=t.depth,a=t.index;e.length<o.getStride();)e.push(0);switch(o.getType()){case g.a.MULTI_LINE_STRING:case g.a.POLYGON:(i=o.getCoordinates())[s[0]].splice(a+1,0,e);break;case g.a.MULTI_POLYGON:(i=o.getCoordinates())[s[1]][s[0]].splice(a+1,0,e);break;case g.a.LINE_STRING:(i=o.getCoordinates()).splice(a+1,0,e);break;default:return}this.setGeometryCoordinates_(o,i);var h=this.rBush_;h.remove(t),this.updateSegmentIndices_(o,a,s,1);var c={segment:[r[0],e],feature:n,geometry:o,depth:s,index:a};h.insert(Object(f.b)(c.segment),c),this.dragSegments_.push([c,1]);var u={segment:[e,r[1]],feature:n,geometry:o,depth:s,index:a+1};h.insert(Object(f.b)(u.segment),u),this.dragSegments_.push([u,0]),this.ignoreNextSingleClick_=!0},e.prototype.removePoint=function(){if(this.lastPointerEvent_&&this.lastPointerEvent_.type!=h.a.POINTERDRAG){var t=this.lastPointerEvent_;this.willModifyFeatures_(t);var e=this.removeVertex_();return this.dispatchEvent(new T(S,this.features_,t)),this.modified_=!1,e}return!1},e.prototype.removeVertex_=function(){var t,e,i,r,o,s,a,h,c,u,l,d=this.dragSegments_,p={},_=!1;for(o=d.length-1;o>=0;--o)u=(i=d[o])[0],l=Object(n.c)(u.feature),u.depth&&(l+="-"+u.depth.join("-")),l in p||(p[l]={}),0===i[1]?(p[l].right=u,p[l].index=u.index):1==i[1]&&(p[l].left=u,p[l].index=u.index+1);for(l in p){switch(c=p[l].right,a=p[l].left,(h=(s=p[l].index)-1)<0&&(h=0),t=e=(r=(u=void 0!==a?a:c).geometry).getCoordinates(),_=!1,r.getType()){case g.a.MULTI_LINE_STRING:e[u.depth[0]].length>2&&(e[u.depth[0]].splice(s,1),_=!0);break;case g.a.LINE_STRING:e.length>2&&(e.splice(s,1),_=!0);break;case g.a.MULTI_POLYGON:t=t[u.depth[1]];case g.a.POLYGON:(t=t[u.depth[0]]).length>4&&(s==t.length-1&&(s=0),t.splice(s,1),_=!0,0===s&&(t.pop(),t.push(t[0]),h=t.length-1))}if(_){this.setGeometryCoordinates_(r,e);var y=[];if(void 0!==a&&(this.rBush_.remove(a),y.push(a.segment[0])),void 0!==c&&(this.rBush_.remove(c),y.push(c.segment[1])),void 0!==a&&void 0!==c){var m={depth:u.depth,feature:u.feature,geometry:u.geometry,index:h,segment:y};this.rBush_.insert(Object(f.b)(m.segment),m)}this.updateSegmentIndices_(r,s,u.depth,-1),this.vertexFeature_&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null),d.length=0}}return _},e.prototype.setGeometryCoordinates_=function(t,e){this.changingFeature_=!0,t.setCoordinates(e),this.changingFeature_=!1},e.prototype.updateSegmentIndices_=function(t,e,i,r){this.rBush_.forEachInExtent(t.getExtent(),(function(n){n.geometry===t&&(void 0===i||void 0===n.depth||Object(c.b)(n.depth,i))&&n.index>e&&(n.index+=r)}))},e}(m.b);function I(t,e){return t.index-e.index}function k(t,e,i){var r=e.geometry;if(r.getType()===g.a.CIRCLE){var n=r;if(1===e.index){var o=Object(j.m)();o&&(n=n.clone().transform(o,i));var s=Object(u.h)(n.getCenter(),Object(j.g)(t,i)),a=Math.sqrt(s)-n.getRadius();return a*a}}var h=Object(j.g)(t,i);return P[0]=Object(j.g)(e.segment[0],i),P[1]=Object(j.g)(e.segment[1],i),Object(u.i)(h,P)}function M(t,e,i){var r=e.geometry;if(r.getType()===g.a.CIRCLE&&1===e.index){var n=r,o=Object(j.m)();return o&&(n=n.clone().transform(o,i)),Object(j.n)(n.getClosestPoint(Object(j.g)(t,i)),i)}var s=Object(j.g)(t,i);return P[0]=Object(j.g)(e.segment[0],i),P[1]=Object(j.g)(e.segment[1],i),Object(j.n)(Object(u.c)(s,P),i)}e.a=G},983:function(t,e,i){"use strict";var r=i(296),n=(i(162),i(161),i(67),i(295)),o=i(470),s=i(464),a=i(944),h=i(945),c=i(946),u=i(797),l=i(407),d={fill:"rgba(255, 255, 255, 0.5)",stroke:{color:"#409eff",width:2},circle:{radius:6,fill:"#409eff",stroke:{width:1,color:"#fff"}}},p={name:"MyMapDraw",inject:["myMap"],render:function(){return this.$slots.default},props:{type:{type:String,default:"LineString",validator:function(t){return["Point","LineString","Polygon","Circle"].includes(t)}},brush:{type:[Object,Function]},effect:{type:[Object,Function],default:function(){return d}},manual:Boolean,options:Object},watch:{type:function(){this.manual||(this.finish(),this.draw(),this.modify())}},methods:{getStyle:function(t){return t?"function"==typeof t?t():Object(l.a)(t):null},init:function(t){if(!this.layer){var e=new s.a,i=this.getStyle(this.effect);this.layer=new o.a({source:e,style:i}),t.addLayer(this.layer),this.manual||(this.draw(),this.modify()),this.$emit("ready",this)}},draw:function(t){var e=this;if(this.layer){var i=this.layer.getSource(),r=this.getStyle(this.brush),o=this.type,s=this.myMap.map,c=new a.a(Object(n.a)(Object(n.a)({},this.options),{},{type:o,source:i,style:r}));this.drawStartHandler=function(t){e.$emit("drawstart",t)},this.drawEndHandler=function(i){t&&t(i),e.$emit("drawend",i)},c.on("drawstart",this.drawStartHandler),c.on("drawend",this.drawEndHandler),this.drawInstance=c,this.snapInstance=new h.a({source:i}),s.addInteraction(c),s.addInteraction(this.snapInstance)}},modify:function(t){var e=this;if(this.layer){var i=this.myMap.map,r=this.layer.getSource(),o=this.getStyle(this.brush),s=new c.a(Object(n.a)(Object(n.a)({},this.options),{},{source:r,style:o}));this.modifyStartHandler=function(t){e.$emit("modifystart",t)},this.modifyEndHandler=function(i){t&&t(i),e.$emit("modifyend",i)},s.on("modifystart",this.modifyStartHandler),s.on("modifyend",this.modifyEndHandler),this.modifyInstance=s,i.addInteraction(this.modifyInstance)}},finish:function(){var t=this.myMap.map;if(t){var e=this.drawInstance,i=this.modifyInstance;e&&(e.un("drawstart",this.drawStartHandler),e.un("drawend",this.drawEndHandler),e.dispose(),t.removeInteraction(e),t.removeInteraction(this.snapInstance),this.drawInstance=null),i&&(i.un("modifystart",this.modifyStartHandler),i.un("modifyend",this.modifyEndHandler),i.dispose(),t.removeInteraction(i),this.modifyInstance=null)}},dispose:function(){this.finish(),this.myMap.map&&this.layer&&this.myMap.map.removeLayer(this.layer)},getFeatures:function(){return this.layer?this.layer.getSource().getFeatures():[]},clear:function(){this.layer&&this.layer.getSource().clear()},removeFeature:function(t){this.layer.getSource().removeFeature(t)},addFeature:function(t){var e=[].concat(t);this.layer.getSource().addFeatures(e)},toJSON:function(){var t=this.getFeatures();return(new u.a).writeFeatures(t)},fromJSON:function(t){var e=(new u.a).readFeatures(t);this.addFeature(e)},writeFeature:function(t){return(new u.a).writeFeature(t)},readFeature:function(t){return(new u.a).writeFeature(t)}},created:function(){this.myMap.mapReady(this.init)},beforeDestroy:function(){this.dispose()}};e.a=Object(r.a)(p)}}]);