(window.webpackJsonp=window.webpackJsonp||[]).push([[903,21],{1538:function(t,e,a){},2290:function(t,e,a){"use strict";var n=a(1538);a.n(n).a},2449:function(t,e,a){"use strict";a.r(e);var n={};a.r(n),a.d(n,"panel",(function(){return K})),a.d(n,"horPanel",(function(){return P})),a.d(n,"spotPanel",(function(){return _})),a.d(n,"verPanel",(function(){return G})),a.d(n,"binding",(function(){return tt})),a.d(n,"iconfont",(function(){return z})),a.d(n,"shape",(function(){return Q})),a.d(n,"node",(function(){return $})),a.d(n,"group",(function(){return W})),a.d(n,"link",(function(){return rt})),a.d(n,"textBlock",(function(){return Y})),a.d(n,"picture",(function(){return H})),a.d(n,"imageSet",(function(){return X})),a.d(n,"animationTrigger",(function(){return V})),a.d(n,"tooltip",(function(){return Z})),a.d(n,"tag",(function(){return nt})),a.d(n,"switcher",(function(){return it})),a.d(n,"mark",(function(){return ot})),a.d(n,"makePort",(function(){return U})),a.d(n,"setGray",(function(){return B})),a.d(n,"removeGray",(function(){return E}));var i=a(296),o=(a(91),a(92),a(362)),r=a.n(o),d=a(0);function s(t,e,a,n){var i=t.diagram,o=i.viewportBounds,r=i.model,d=i.skipsUndoManager;i.skipsUndoManager=!0;for(var s=new a.Rect,c=e.nodeDataArray,u=0;u<c.length;u++){var f=c[u];if(f.bounds)if(f.bounds.intersectsRect(o)&&r.addNodeData(f),r instanceof a.TreeModel){var p=e.getParentKeyForNodeData(f),h=e.findNodeDataForKey(p);if(null!==h)if(f.bounds.intersectsRect(o)){r.addNodeData(h);var g=i.findNodeForData(f);if(null!==g){var m=g.findTreeParentLink();null!==m&&(m.fromNode.ensureBounds(),m.toNode.ensureBounds(),m.updateRoute())}}else if(s.set(f.bounds),s.unionRect(h.bounds),s.intersectsRect(o)){r.addNodeData(f);var y=i.findNodeForData(f);if(null!==y){var v=y.findTreeParentLink();null!==v&&(v.fromNode.ensureBounds(),v.toNode.ensureBounds(),v.updateRoute())}}}}if(r instanceof a.GraphLinksModel)for(var k=e.linkDataArray,b=0;b<k.length;b++){var N=k[b],L=e.getFromKeyForLinkData(N);if(void 0!==L){var D=e.findNodeDataForKey(L);if(null!==D&&D.bounds){var w=e.getToKeyForLinkData(N);if(void 0!==w){var F=e.findNodeDataForKey(w);if(null!==F&&F.bounds&&(s.set(D.bounds),s.unionRect(F.bounds),s.intersectsRect(o))){r.addNodeData(D),r.addNodeData(F),r.addLinkData(N);var T=i.findLinkForData(N);null!==T&&(T.fromNode.ensureBounds(),T.toNode.ensureBounds(),T.updateRoute())}}}}}i.skipsUndoManager=d,null===l&&(l=setTimeout((function(){!function(t,e,a){l=null;var n=t.viewportBounds,i=t.model,o=[],r=new e.Set,d=t.nodes;for(;d.next();){var s=d.value,c=s.data;null!==c&&(s.actualBounds.intersectsRect(n)||s.isSelected||s.linksConnected.any((function(t){return t.actualBounds.intersectsRect(n)}))||(o.push(c),i instanceof e.GraphLinksModel&&r.addAll(s.linksConnected)))}if(o.length>0){var u=t.skipsUndoManager;t.skipsUndoManager=!0,i.removeNodeDataCollection(o),i instanceof e.GraphLinksModel&&r.each((function(t){t.isSelected||i.removeLinkData(t.data)})),t.skipsUndoManager=u}a(t,t.layout.model)}(i,a,n)}),3e3)),n(i,i.layout.model)}var l=null;var c=function(t){function e(){t.LayeredDigraphLayout.call(this),this.isOngoing=!1,this.model=null}function a(e){t.LayeredDigraphNetwork.call(this,e)}return t.Diagram.inherit(e,t.CircularLayout),e.prototype.createNetwork=function(){return new a(this)},e.prototype.makeNetwork=function(t){var e=this.createNetwork();return e.addData(this.model),e},e.prototype.commitLayout=function(){t.LayeredDigraphLayout.prototype.commitLayout.call(this),this.diagram.fixedBounds=function(t,e){for(var a=new e.Rect,n=t.nodeDataArray,i=0;i<n.length;i++){var o=n[i];if(o.bounds){var r=o.bounds;0===i?a.set(r):a.unionRect(r)}}return a}(this.model,t),this.diagram.nodes.each((function(t){t.updateTargetBindings()}))},t.Diagram.inherit(a,t.LayeredDigraphNetwork),a.prototype.addData=function(e){if(!(e instanceof t.GraphLinksModel))throw new Error("can only handle GraphLinksModel data");for(var a=new t.Map,n=e.nodeDataArray,i=0;i<n.length;i++){var o=n[i],r=this.createVertex();r.data=o,a.set(e.getKeyForNodeData(o),r),this.addVertex(r)}for(var d=e.linkDataArray,s=0;s<d.length;s++){var l=d[s],c=a.get(e.getFromKeyForLinkData(l)),u=a.get(e.getToKeyForLinkData(l));if(null!==c&&null!==u){var f=this.createEdge();f.data=l,f.fromVertex=c,f.toVertex=u,this.addEdge(f)}}},a.prototype.deleteArtificialVertexes=function(){},e};function u(t,e,a,n){var i=t.diagram,o=i.viewportBounds,r=i.model,d=i.skipsUndoManager;i.skipsUndoManager=!0;for(var s=new a.Rect,l=e.nodeDataArray,c=0;c<l.length;c++){var u=l[c];if(u.bounds)if(u.bounds.intersectsRect(o)&&r.addNodeData(u),r instanceof a.TreeModel){var p=e.getParentKeyForNodeData(u),h=e.findNodeDataForKey(p);if(null!==h)if(u.bounds.intersectsRect(o)){r.addNodeData(h);var g=i.findNodeForData(u);if(null!==g)null!==(L=g.findTreeParentLink())&&(L.fromNode.ensureBounds(),L.toNode.ensureBounds(),L.updateRoute())}else if(s.set(u.bounds),s.unionRect(h.bounds),s.intersectsRect(o)){r.addNodeData(u);var m=i.findNodeForData(u);if(null!==m)null!==(L=m.findTreeParentLink())&&(L.fromNode.ensureBounds(),L.toNode.ensureBounds(),L.updateRoute())}}}if(r instanceof a.GraphLinksModel){var y=e.linkDataArray;for(c=0;c<y.length;c++){var v=y[c],k=e.getFromKeyForLinkData(v);if(void 0!==k){var b=e.findNodeDataForKey(k);if(null!==b&&b.bounds){var N=e.getToKeyForLinkData(v);if(void 0!==N){var L,D=e.findNodeDataForKey(N);if(null!==D&&D.bounds)if(s.set(b.bounds),s.unionRect(D.bounds),s.intersectsRect(o))r.addNodeData(b),r.addNodeData(D),r.addLinkData(v),null!==(L=i.findLinkForData(v))&&(L.fromNode.ensureBounds(),L.toNode.ensureBounds(),L.updateRoute())}}}}}i.skipsUndoManager=d,null===f&&(f=setTimeout((function(){!function(t,e,a){f=null;var n=t.viewportBounds,i=t.model,o=[],r=new e.Set,d=t.nodes;for(;d.next();){var s=d.value,l=s.data;null!==l&&(s.actualBounds.intersectsRect(n)||s.isSelected||s.linksConnected.any((function(t){return t.actualBounds.intersectsRect(n)}))||(o.push(l),i instanceof e.GraphLinksModel&&r.addAll(s.linksConnected)))}if(o.length>0){var c=t.skipsUndoManager;t.skipsUndoManager=!0,i.removeNodeDataCollection(o),i instanceof e.GraphLinksModel&&r.each((function(t){t.isSelected||i.removeLinkData(t.data)})),t.skipsUndoManager=c}a(t,t.layout.model)}(i,a,n)}),3e3)),n(i,i.layout.model)}var f=null;var p=function(t){function e(){t.ForceDirectedLayout.call(this),this.isOngoing=!1,this.model=null}function a(e){t.ForceDirectedNetwork.call(this,e)}return t.Diagram.inherit(e,t.ForceDirectedLayout),e.prototype.createNetwork=function(){return new a(this)},e.prototype.makeNetwork=function(t){var e=this.createNetwork();return e.addData(this.model),e},e.prototype.commitLayout=function(){t.ForceDirectedLayout.prototype.commitLayout.call(this),this.diagram.fixedBounds=function(t,e){for(var a=new e.Rect,n=t.nodeDataArray,i=0;i<n.length;i++){var o=n[i];if(o.bounds){var r=o.bounds;0===i?a.set(r):a.unionRect(r)}}return a}(this.model,t),this.diagram.nodes.each((function(t){t.updateTargetBindings()}))},t.Diagram.inherit(a,t.ForceDirectedNetwork),a.prototype.addData=function(e){if(!(e instanceof t.GraphLinksModel))throw new Error("can only handle GraphLinksModel data");for(var a=new t.Map,n=e.nodeDataArray,i=0;i<n.length;i++){var o=n[i],r=this.createVertex();r.data=o,a.set(e.getKeyForNodeData(o),r),this.addVertex(r)}var d=e.linkDataArray;for(i=0;i<d.length;i++){o=d[i];var s=a.get(e.getFromKeyForLinkData(o)),l=a.get(e.getToKeyForLinkData(o));if(null!==s&&null!==l){var c=this.createEdge();c.data=o,c.fromVertex=s,c.toVertex=l,this.addEdge(c)}}},a.prototype.deleteArtificialVertexes=function(){},e};function h(t,e,a,n){var i=t.diagram,o=i.viewportBounds,r=i.model,d=i.skipsUndoManager;i.skipsUndoManager=!0;for(var s=new a.Rect,l=e.nodeDataArray,c=0;c<l.length;c++){var u=l[c];if(u.bounds&&(u.bounds.intersectsRect(o)&&r.addNodeData(u),r instanceof a.TreeModel)){var f=e.getParentKeyForNodeData(u),p=e.findNodeDataForKey(f);if(null!==p)if(u.bounds.intersectsRect(o)){r.addNodeData(p);var h=i.findNodeForData(u);if(null!==h){var m=h.findTreeParentLink();null!==m&&(m.fromNode.ensureBounds(),m.toNode.ensureBounds(),m.updateRoute())}}else if(s.set(u.bounds),s.unionRect(p.bounds),s.intersectsRect(o)){r.addNodeData(u);var y=i.findNodeForData(u);if(null!==y){var v=y.findTreeParentLink();null!==v&&(v.fromNode.ensureBounds(),v.toNode.ensureBounds(),v.updateRoute())}}}}if(r instanceof a.GraphLinksModel)for(var k=e.linkDataArray,b=0;b<k.length;b++){var N=k[b],L=e.getFromKeyForLinkData(N);if(void 0!==L){var D=e.findNodeDataForKey(L);if(null!==D&&D.bounds){var w=e.getToKeyForLinkData(N);if(void 0!==w){var F=e.findNodeDataForKey(w);if(null!==F&&F.bounds&&(s.set(D.bounds),s.unionRect(F.bounds),s.intersectsRect(o))){r.addNodeData(D),r.addNodeData(F),r.addLinkData(N);var T=i.findLinkForData(N);null!==T&&(T.fromNode.ensureBounds(),T.toNode.ensureBounds(),T.updateRoute())}}}}}i.skipsUndoManager=d,null===g&&(g=setTimeout((function(){!function(t,e,a){g=null;var n=t.viewportBounds,i=t.model,o=[],r=new e.Set,d=t.nodes;for(;d.next();){var s=d.value,l=s.data;null!==l&&(s.actualBounds.intersectsRect(n)||s.isSelected||s.linksConnected.any((function(t){return t.actualBounds.intersectsRect(n)}))||(o.push(l),i instanceof e.GraphLinksModel&&r.addAll(s.linksConnected)))}if(o.length>0){var c=t.skipsUndoManager;t.skipsUndoManager=!0,i.removeNodeDataCollection(o),i instanceof e.GraphLinksModel&&r.each((function(t){t.isSelected||i.removeLinkData(t.data)})),t.skipsUndoManager=c}a(t,t.layout.model)}(i,a,n)}),3e3)),n(i,i.layout.model)}var g=null;var m=function(t){function e(){t.TreeLayout.call(this),this.isOngoing=!1,this.model=null}function a(e){t.TreeNetwork.call(this,e)}return t.Diagram.inherit(e,t.TreeLayout),e.prototype.createNetwork=function(){return new a(this)},e.prototype.makeNetwork=function(t){var e=this.createNetwork();return e.addData(this.model),e},e.prototype.commitLayout=function(){t.TreeLayout.prototype.commitLayout.call(this),this.diagram.fixedBounds=function(t,e){for(var a=new e.Rect,n=t.nodeDataArray,i=0;i<n.length;i++){var o=n[i];o.bounds&&(0===i?a.set(o.bounds):a.unionRect(o.bounds))}return a}(this.model,t),this.diagram.nodes.each((function(t){t.updateTargetBindings()}))},t.Diagram.inherit(a,t.TreeNetwork),a.prototype.addData=function(e){if(!(e instanceof t.TreeModel))throw new Error("can only handle TreeModel data");for(var a=new t.Map,n=e.nodeDataArray,i=0;i<n.length;i++){var o=n[i],r=this.createVertex();r.data=o,a.set(o,r),this.addVertex(r)}for(var d=0;d<n.length;d++){var s=n[d],l=e.getParentKeyForNodeData(s),c=e.findNodeDataForKey(l);if(null!==c){var u=a.get(c),f=a.get(s);if(null===u||null===f)continue;var p=this.createEdge();p.data=s,p.fromVertex=u,p.toVertex=f,this.addEdge(p)}}},e};var y={};var v={GridLayout:function(t,e){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=Object.assign({},y,{wrappingColumn:10,sorting:e.GridLayout.Forward,spacing:new e.Size(50,50)},a);return t(e.GridLayout,n)},CircularLayout:function(t,e){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=Object.assign({},y,{arrangement:e.CircularLayout.Packed,spacing:10},a);return t(e.CircularLayout,n)},LayeredDigraphLayout:function(t,e){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=Object.assign({},y,{setsPortSpots:!1,layerSpacing:0,layeringOption:e.LayeredDigraphLayout.LayerLongestPathSource},a);return t(e.LayeredDigraphLayout,n)},ForceDirectedLayout:function(t,e){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=Object.assign({},y,{arrangementSpacing:new e.Size(100,100),defaultElectricalCharge:50,defaultSpringLength:10,defaultSpringStiffness:.01},a);return t(e.ForceDirectedLayout,n)},TreeLayout:function(t,e){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=Object.assign({},y,a);return t(e.TreeLayout,n)},VirtualizedForceDirectedLayout:function(t,e){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return e.VirtualizedForceDirectedLayout||(e.VirtualizedForceDirectedLayout=p(e)),t(e.VirtualizedForceDirectedLayout,a)},handlerVirtualForce:function(t,e,a){var n=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],i=arguments.length>4?arguments[4]:void 0,o=arguments.length>5?arguments[5]:void 0;e.isVirtualized=!0,n&&(e.layout.model=a,e.addDiagramListener("ViewportBoundsChanged",(function(a){u(a,e.layout.model,t,i)})),e.addDiagramListener("InitialLayoutCompleted",(function(t){var a=e.layout.model.findNodeDataForKey("1");null!==a&&e.centerRect(a.bounds)})),e.addDiagramListener("SelectionDeleted",(function(a){var n=a.subject,i=[],o=[];n.each((function(e){e instanceof t.Node?i.push(e.data):e instanceof t.Link&&o.push(e.data)})),e.layout.model.removeNodeDataCollection(i),e.layout.model.removeLinkDataCollection(o)}))),o&&e.delayInitialization((function(){o()}))},VirtualizedTreeLayout:function(t,e){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return e.VirtualizedTreeLayout||(e.VirtualizedTreeLayout=m(e)),t(e.VirtualizedTreeLayout,a)},handlerVirtualTree:function(t,e,a){var n=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],i=arguments.length>4?arguments[4]:void 0,o=arguments.length>5?arguments[5]:void 0;e.isVirtualized=!0,n&&(e.layout.model=a,e.addDiagramListener("ViewportBoundsChanged",(function(a){h(a,e.layout.model,t,i)})),e.addDiagramListener("InitialLayoutCompleted",(function(t){var a=e.layout.model.findNodeDataForKey("1");null!==a&&e.centerRect(a.bounds)})),e.addDiagramListener("SelectionDeleted",(function(a){var n=a.subject,i=[];n.each((function(e){e instanceof t.Node&&i.push(e.data)})),e.layout.model.removeNodeDataCollection(i)}))),o&&e.delayInitialization((function(){o()}))},VirtualizedLayeredDigraphLayout:function(t,e){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return e.VirtualizedLayeredDigraphLayout||(e.VirtualizedLayeredDigraphLayout=c(e)),t(e.VirtualizedLayeredDigraphLayout,a)},handlerVirtualLayeredDigraph:function(t,e,a){var n=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],i=arguments.length>4?arguments[4]:void 0,o=arguments.length>5?arguments[5]:void 0;e.isVirtualized=!0,n&&(e.layout.model=a,e.addDiagramListener("ViewportBoundsChanged",(function(a){s(a,e.layout.model,t,i)})),e.addDiagramListener("InitialLayoutCompleted",(function(t){var a=e.layout.model.findNodeDataForKey("1");null!==a&&e.centerRect(a.bounds)})),e.addDiagramListener("SelectionDeleted",(function(a){var n=a.subject,i=[],o=[];n.each((function(e){e instanceof t.Node?i.push(e.data):e instanceof t.Link&&o.push(e.data)})),e.layout.model.removeNodeDataCollection(i),e.layout.model.removeLinkDataCollection(o)}))),o&&e.delayInitialization((function(){o()}))}},k=a(722),b=a.n(k),N=a(672),L=b.a.GraphObject.make,D={name:"MyGoLayout",props:{diagramName:{type:String,default:"dig"},lock:{type:Boolean,default:!1},customClass:{type:String,default:""},customStyle:{type:Object,default:function(){return{}}}},data:function(){return{currLayout:"LayeredDigraphLayout",lockState:!1,currOption:{}}},watch:{lock:{immediate:!0,handler:function(t){this.lockState=t}},lockState:function(t){this.$emit("update:lock",t)},diagram:{handler:function(t){var e=this;t&&(this.unbindEvents(),setTimeout((function(){e.bindEvents()}),100))}}},computed:{},methods:{toggleLock:function(){if(this.lockState=!this.lockState,this.lockState){var t=L(b.a.Layout);N.a[this.diagramName].layout=t,N.a[this.diagramName].layoutDiagram(!0)}else{var e=this.currLayout,a=this.currOption;if("GridLayout"===e){var n=N.a[this.diagramName].model.nodeDataArray.length,i=Math.floor(Math.sqrt(n))+1;a.wrappingColumn=i}var o=this.getAllNodesAndLinks();this.setNodesFixed(o,!1);var r=v[e](L,b.a,a);r.isOngoing=!0,N.a[this.diagramName].layout=r,N.a[this.diagramName].layoutDiagram(!0)}},changeLayout:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this.$emit("on-change",t),this.currOption=e,this.currLayout=t,this.lockState)if(N.a[this.diagramName].layout=L(b.a.Layout),N.a[this.diagramName].layoutDiagram(!0),0!==N.a[this.diagramName].selection.count){var a,n,i=new b.a.Set;N.a[this.diagramName].selection.each((function(t){i.add(t),(!a||t.position.x<a)&&(a=t.position.x),(!n||t.position.y<n)&&(n=t.position.y)}));var o=new b.a.Point(a,n);this.layoutNodes(L,b.a,t,i,o,e)}else{var r=this.getAllNodesAndLinks();this.setNodesFixed(r,!0),this.layoutNodes(L,b.a,t,r,void 0,e)}else{var d;if(0!==N.a[this.diagramName].selection.count?(d=new b.a.Set,N.a[this.diagramName].nodes.each((function(t){t.isLayoutPositioned=!1})),N.a[this.diagramName].selection.each((function(t){d.add(t)}))):d=this.getAllNodesAndLinks(),this.setNodesFixed(d,!1),"GridLayout"===t){var s=N.a[this.diagramName].model.nodeDataArray.length,l=Math.floor(Math.sqrt(s))+1;e.wrappingColumn=l}var c=v[t](L,b.a,e);c.isOngoing=!0,N.a[this.diagramName].layout=c,N.a[this.diagramName].layoutDiagram(!0)}},getAllNodesAndLinks:function(){var t=new b.a.Set;return N.a[this.diagramName].nodes.each((function(e){t.add(e)})),N.a[this.diagramName].links.each((function(e){t.add(e)})),t},layoutNodes:function(t,e,a,n,i){var o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};if("GridLayout"===a){var r=N.a[this.diagramName].model.nodeDataArray.length,d=Math.floor(Math.sqrt(r))+1;o.wrappingColumn=d}var s=v[a](t,e,o);N.a[this.diagramName].layout.isOngoing=!1,this.setNodesFixed(n,!1),s.doLayout(n),this.setNodesFixed(n,!0),N.a[this.diagramName].layout.isOngoing=!0,i&&"ForceDirectedLayout"!==a&&N.a[this.diagramName].moveParts(n,i)},setNodesFixed:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];t.each((function(t){t.isLayoutPositioned=!e}))},layoutAfterAdd:function(t,e){var a=this;if(!t||0!==t.length){var n={},i="data";t[0].diagram&&(i="node"),t.forEach((function(t){n[t.key]=t}));var o=null;if(t.forEach((function(t){var e;(e="node"===i?t:N.a[a.diagramName].findNodeForData(t))&&e.findNodesConnected().each((function(t){n[t.key]||(o=t)}))})),!o)("node"===i?t[0]:N.a[this.diagramName].findNodeForData(t[0])).findNodesConnected().each((function(t){o=t}));var r=new b.a.Set,d=o.findTreeChildrenNodes(),s=o.findTreeChildrenLinks(),l=o.position.x,c=o.position.y;r.add(o),d&&d.each((function(t){r.add(t),0!==t.position.x&&0!==t.position.y&&((!l||t.position.x<l)&&(l=t.position.x),(!c||t.position.y<c)&&(c=t.position.y))}));var u=new b.a.Point(l,c);t.forEach((function(t){var e;(e="node"===i?t:N.a[a.diagramName].findNodeForData(t)).position=u,r.add(e)})),e&&0!==e.length&&e.forEach((function(t){var e;e="node"===i?t:N.a[a.diagramName].findLinkForData(t),r.add(e)})),s&&s.each((function(t){r.add(t)})),this.layoutNodes(L,b.a,this.currLayout,r,u,this.currOption)}},bindEvents:function(){},unbindEvents:function(){}},created:function(){}};d.default.use(r.a);var w=D,F=a(39),T=Object(F.a)(w,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{class:"my-go-layout__menu "+t.customClass,style:t.customStyle},[t._t("default",[a("ul",[a("li",{on:{click:function(e){return t.toggleLock()}}},[a("el-tooltip",{attrs:{content:"固定布局切换",placement:"left",effect:"light"}},[t.lock?a("i",{staticClass:"iconfont icon-pin icon"}):t._e(),t._v(" "),t.lock?t._e():a("i",{staticClass:"iconfont icon-map-thumbtack icon"})])],1),t._v(" "),a("li",[a("el-tooltip",{attrs:{content:"分层",placement:"left",effect:"light","popper-class":"invest-graph"}},[a("i",{staticClass:"iconfont icon-Tandem icon"})]),t._v(" "),a("ul",[a("li",{on:{click:function(e){return t.changeLayout("LayeredDigraphLayout",{direction:270})}}},[a("i",{staticClass:"iconfont icon-arrow-up icon"})]),t._v(" "),a("li",{on:{click:function(e){return t.changeLayout("LayeredDigraphLayout",{direction:90})}}},[a("i",{staticClass:"iconfont icon-arrow-down icon"})]),t._v(" "),a("li",{on:{click:function(e){return t.changeLayout("LayeredDigraphLayout",{direction:180})}}},[a("i",{staticClass:"iconfont icon-arrow-left icon"})]),t._v(" "),a("li",{on:{click:function(e){return t.changeLayout("LayeredDigraphLayout",{direction:0})}}},[a("i",{staticClass:"iconfont icon-arrow-right icon"})])])],1),t._v(" "),a("li",{on:{click:function(e){return t.changeLayout("ForceDirectedLayout")}}},[a("el-tooltip",{attrs:{content:"力导向",placement:"left",effect:"light","popper-class":"invest-graph"}},[a("i",{staticClass:"iconfont icon-relation icon"})])],1),t._v(" "),a("li",{on:{click:function(e){return t.changeLayout("GridLayout")}}},[a("el-tooltip",{attrs:{content:"网格",placement:"left",effect:"light","popper-class":"invest-graph"}},[a("i",{staticClass:"iconfont icon-nine-squares icon"})])],1),t._v(" "),a("li",{on:{click:function(e){return t.changeLayout("CircularLayout")}}},[a("el-tooltip",{attrs:{content:"圆形",placement:"left",effect:"light","popper-class":"invest-graph"}},[a("i",{staticClass:"iconfont icon-collaboration-system icon"})])],1),t._v(" "),a("li",[a("el-tooltip",{attrs:{content:"树形",placement:"left",effect:"light","popper-class":"invest-graph"}},[a("i",{staticClass:"iconfont icon-map-site icon"})]),t._v(" "),a("ul",{staticClass:"bottom"},[a("li",{on:{click:function(e){return t.changeLayout("TreeLayout",{angle:270})}}},[a("i",{staticClass:"iconfont icon-arrow-up icon"})]),t._v(" "),a("li",{on:{click:function(e){return t.changeLayout("TreeLayout",{angle:90})}}},[a("i",{staticClass:"iconfont icon-arrow-down icon"})]),t._v(" "),a("li",{on:{click:function(e){return t.changeLayout("TreeLayout",{angle:180})}}},[a("i",{staticClass:"iconfont icon-arrow-left icon"})]),t._v(" "),a("li",{on:{click:function(e){return t.changeLayout("TreeLayout",{angle:0})}}},[a("i",{staticClass:"iconfont icon-arrow-right icon"})])])],1)])],{toggleLock:t.toggleLock,changeLayout:t.changeLayout})],2)}),[],!1,null,null,null).exports,x=Object(i.a)(T),O=a(719),C=a(307),j=a.n(C),A=(a(162),a(30)),M=(a(193),a(41));function S(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=Object.assign({props:{},parts:[],events:{},binding:[]},e);for(var n in t)a.props[n]=void 0===a.props[n]?t[n]:a.props[n];return a}function B(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e={diagram:null,nodes:[],links:[],mode:"select"},a=Object.assign({},e,t);if(a.diagram){var n=a.diagram.model;a.diagram.nodes.each((function(t){if(a.nodes.indexOf(t)>-1)switch(a.mode){case"select":t.isSelected=!0;break;case"highlight":t.isHighlighted=!0}else n.set(t.data,"isGray",!0)})),a.diagram.links.each((function(t){if(a.links.indexOf(t)>-1)switch(a.mode){case"select":t.isSelected=!0;break;case"highlight":t.isHighlighted=!0}else n.set(t.data,"isGray",!0)}))}}function E(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e={diagram:null,reset:!0},a=Object.assign({},e,t);if(a.diagram){var n=a.diagram.model;a.diagram.nodes.each((function(t){n.set(t.data,"isGray",!1),t.isSelected=!1,t.isHighlighted=!1})),a.diagram.links.each((function(t){n.set(t.data,"isGray",!1),t.isSelected=!1,t.isHighlighted=!1}))}}var R={spot:"Spot",hor:"Horizontal",ver:"Vertical",table:"Table",pos:"Position",auto:"Auto",vbox:"Viewbox",link:"Link",grid:"Grid",grad:"Graduated"},K=function(t,e,a){var n=S({},a),i=R[n.type]||n.type||"Auto";return t.apply(void 0,[e.Panel,i,n.props].concat(Object(A.a)(n.parts),[n.events],Object(A.a)(n.binding)))},P=function(t,e,a){var n=S({background:"rgba(0, 0, 0, 0)",alignment:e.Spot.Center},a);return t.apply(void 0,[e.Panel,e.Panel.Horizontal,n.props].concat(Object(A.a)(n.parts),[n.events],Object(A.a)(n.binding)))},_=function(t,e,a){var n=S({background:"rgba(0, 0, 0, 0)",alignment:e.Spot.Center},a);return t.apply(void 0,[e.Panel,"Spot",n.props].concat(Object(A.a)(n.parts),[n.events],Object(A.a)(n.binding)))},G=function(t,e,a){var n=S({background:"rgba(0, 0, 0, 0)",alignment:e.Spot.Center},a);return t.apply(void 0,[e.Panel,e.Panel.Vertical,n.props].concat(Object(A.a)(n.parts),[n.events],Object(A.a)(n.binding)))},z=function(t,e){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n={font:'30px "iconfont"',stroke:"#000",wrap:e.TextBlock.OverflowEllipsis,editable:!1,textAlign:"center",alignment:e.Spot.Center,verticalAlignment:e.Spot.Top,scale:1},i=Object.assign({icon:"",props:{},parts:[],binding:[],events:{}},a);return i.props=Object.assign({},n,a.props),t.apply(void 0,[e.TextBlock,"".concat(i.icon),i.props].concat(Object(A.a)(i.binding)))},V=function(t,e,a){if(a instanceof Array){var n=[];return a.forEach((function(t){n.push(new e.AnimationTrigger(t))})),n}return[]};function U(t,e){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=a.spot||new e.Spot(.5,.5),i={fill:null,stroke:null,desiredSize:new e.Size(7,7),alignment:n,alignmentFocus:n,fromSpot:n,toSpot:n,fromLinkable:!0,toLinkable:!0,cursor:"pointer"},o=Object.assign({props:{},parts:[],events:{},binding:[]},a);return o.props=Object.assign({},i,a.props),o.type=o.type||"Circle",t.apply(void 0,[e.Shape,o.type,o.props,o.events].concat(Object(A.a)(o.parts),Object(A.a)(o.binding)))}var $=function(t,e,a){var n=S({background:"rgba(0, 0, 0, 0)",cursor:"pointer",selectionAdorned:!1},a),i=R[n.type]||n.type||"Auto";return t.apply(void 0,[e.Node,i,n.props,n.events].concat(Object(A.a)(n.parts),Object(A.a)(n.binding)))},W=function(t,e,a){var n=S({background:"rgba(0, 0, 0, 0)",cursor:"pointer",selectionAdorned:!1},a),i=R[n.type]||n.type||"Auto";return t.apply(void 0,[e.Group,i,n.props,n.events].concat(Object(A.a)(n.parts),Object(A.a)(n.binding)))},I=a(295),H=function(t,e,a){var n=Object.assign({props:{},parts:[],events:{},binding:[],clip:{props:{},binding:[]},panel:{type:"Spot",props:{},binding:[]}},a);n.props=Object.assign({},{sourceCrossOrigin:function(){return"use-credentials"},width:60,height:60},a.props);n.clip=n.clip||{props:{},binding:[]};var i=Object.assign({},{figure:"Circle"},(a.clip||{}).props||{});n.clip.props=i,n.clip.props.width=n.clip.props.width||n.props.width,n.clip.props.height=n.clip.props.height||n.props.height,n.clip.binding=(a.clip||{}).binding||[],!1!==a.clip&&null!==a.clip||(n.clip.props.visible=!1);var o=t.apply(void 0,[e.Shape,Object(I.a)({},n.clip.props)].concat(Object(A.a)(n.clip.binding)));return n.panel.props=Object.assign({},{name:"image",isClipping:!0,scale:1,visible:!0},(a.panel||{}).props||{}),n.panel.type=(a.panel||{}).type||"Spot",n.panel.binding=(a.panel||{}).binding||[],t.apply(void 0,[e.Panel,e.Panel[n.panel.type],Object(I.a)({},n.panel.props),o,t.apply(void 0,[e.Picture,n.props].concat(Object(A.a)(n.binding)))].concat(Object(A.a)(n.panel.binding)))},J=(a(65),a(925));function q(t,e,a,n,i){var o,r;o=null!==a.shape,r="number"==typeof a.padding?a.padding:a.padding instanceof Array?Object(J.a)(e.Margin,Object(A.a)(a.padding)):n.padding;var d={name:a.name||n.name,isClipping:o,scale:a.scale||n.scale,padding:r};return void 0!==a.position&&("Spot"===i?d.alignment=Object(J.a)(e.Spot,Object(A.a)(a.position)):"Position"===i&&(d.position=Object(J.a)(e.Point,Object(A.a)(a.position)))),H(t,e,{props:{width:a.width||n.width,height:a.height||n.height,source:a.src||n.src},binding:[new e.Binding("source","source")],clip:{props:{figure:a.shape||n.shape,width:a.width||n.width,height:a.height||n.height}},panel:{type:e.PanelLayout[a.layout||"Spot"],props:d}})}var X=function(t,e){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n={name:"",src:"",scale:1,width:60,height:60,padding:2,shape:"Circle"},i={width:80,height:80,figure:"Circle"},o=Object.assign({layout:"Spot",isClipping:!1,clip:{},props:{},binding:[],images:[]},a),r=[];return o.images.forEach((function(a){r.push(q(t,e,a,n,o.layout))})),o.clips=Object.assign({},i,o.clips),K(t,e,{type:o.layout,props:{isClipping:o.isClipping},parts:[t(e.Shape,"Circle",{width:o.clip.width,height:o.clip.height,fill:"red",stroke:null,alignment:e.Spot.Center,visible:o.isClipping,figure:o.clip.figure||"Circle"}),t(e.Shape,"Circle",{width:2,height:2,name:"imageSetLoc",fill:"transparent",stroke:null,alignment:e.Spot.Center})].concat(r),binding:o.binding})},Y=function(t,e){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n={stroke:"#000",text:"default Text",textAlign:"center",verticalAlignment:e.Spot.Center,scale:1},i=Object.assign({props:{},parts:[],binding:[],events:{}},a);return i.props=Object.assign({},n,a.props),t.apply(void 0,[e.TextBlock,i.props].concat(Object(A.a)(i.binding)))},Z=function(t,e){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=S({margin:8,stroke:"#fff",font:"bold 16px sans-serif"},a),i={fill:"rgba(0,0,0,0.6)",strokeWidth:1};return n.shape=n.shape||{},n.shape.props=Object.assign({},i,(a.shape||{}).props||{}),n.shape.binding=(a.shape||{}).binding||[],n.adornment=n.adornment||{},n.adornment.props=Object.assign({},(a.adornment||{}).props||{}),n.adornment.binding=(a.adornment||{}).binding||[],n.adornment.type=(a.adornment||{}).type||"Auto",t.apply(void 0,[e.Adornment,n.adornment.type,n.adornment.props,t.apply(void 0,[e.Shape,n.shape.props].concat(Object(A.a)(n.shape.binding))),t.apply(void 0,[e.TextBlock,n.props].concat(Object(A.a)(n.binding)))].concat(Object(A.a)(n.adornment.binding)))},Q=function(t,e){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=S({},a);return t.apply(void 0,[e.Shape,n.props].concat(Object(A.a)(n.binding),[n.events]))},tt=(a(161),a(165),a(341),function(t,e,a){var n=[];return Object.entries(a).forEach((function(t){var a=[];if("string"==typeof t[1])a.push(t[0],t[1]),n.push(Object(J.a)(e.Binding,a));else{a.push(t[0],t[1].key),t[1].handler&&a.push(t[1].handler);var i=Object(J.a)(e.Binding,a);if(t[1].type&&"string"==typeof t[1].type)n.push(i[t[1].type]());else if(t[1].type&&t[1].type instanceof Array){var o=[];t[1].type[1]&&(t[1].type[1]instanceof Array?t[1].type[1]instanceof Array&&o.push.apply(o,Object(A.a)(t[1].type[1])):o.push(t[1].type[1])),n.push(i[t[1].type[0]].apply(i,o))}else n.push(i)}})),n});function et(t,e,a,n){return{key:"",handler:function(t){var i,o=a.dataKey;return t[o]&&void 0!==t[o][n]?i=t[o][n]:void 0!==a[n]&&(i=a[n]),"margin"===n&&i instanceof Array&&(i=Object(J.a)(e.Margin,Object(A.a)(i))),i}}}function at(t,e,a,n){return{key:"",handler:function(t,e){var i,o=a.dataKey,r=e.data;return t&&void 0!==t[n]?i=t[n]:r[o]&&void 0!==r[o][n]?i=r[o][n]:void 0!==a[n]&&(i=a[n]),i}}}var nt=function(t,e){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=Object.assign({name:"",figure:"RoundedRectangle",background:"#40a9ff",stroke:"#003a8c",strokeWidth:1,strokeDashArray:null,color:"#000",dataKey:"tagData",font:'14px "Microsoft Yahei"',margin:5,show:!0,text:"",placement:"top-right",props:{},events:{}},a);return K(t,e,{type:"auto",props:Object(I.a)(Object(I.a)({},n.props),{},{name:n.name,alignment:new e.Spot(1,0)}),parts:[Q(t,e,{props:{figure:n.figure,fill:n.background,stroke:n.stroke,strokeWidth:n.strokeWidth,strokeDashArray:n.strokeDashArray},binding:tt(t,e,{figure:et(0,e,n,"figure"),fill:et(0,e,n,"background"),stroke:et(0,e,n,"stroke"),strokeWidth:et(0,e,n,"strokeWidth"),strokeDashArray:et(0,e,n,"strokeDashArray")})}),Y(t,e,{props:{text:n.text,margin:n.margin,stroke:n.color,font:n.font},binding:tt(t,e,{margin:{key:"",handler:{key:"",handler:function(t){var a;return"number"==typeof(a=t[n.dataKey]&&void 0!==t[n.dataKey].margin?t[n.dataKey].margin:n.margin)?a:a instanceof Array?Object(J.a)(e.Margin,Object(A.a)(a)):void 0}}},stroke:et(0,e,n,"color"),font:et(0,e,n,"font"),text:{key:"",handler:function(t){var e=n.dataKey,a="";return t[e]&&"string"==typeof t[e].text?a=t[e].text:"string"==typeof n.text&&(a=n.text),a}},visible:{key:"",handler:function(t){var e=n.dataKey;return"string"==typeof(t[e]&&"string"==typeof t[e].text?t[e].text:n.text)}}})}),K(t,e,{type:"ver",props:{itemTemplate:t(e.Panel,"Auto",{margin:2},t.apply(void 0,[e.TextBlock,{margin:2,stroke:n.color,font:n.font}].concat(Object(A.a)(tt(t,e,{margin:at(0,0,n,"margin"),stroke:at(0,0,n,"color"),font:at(0,0,n,"font"),background:at(0,0,n,"background"),text:{key:"",handler:function(t){return t.text?t.text:n.text||""}}})))))},binding:tt(t,e,{itemArray:{key:"",handler:function(t){var e=n.dataKey;return t[e]&&t[e].text instanceof Array?t[e].text:[]}},visible:{key:"",handler:function(t){var e,a=n.dataKey;return t[a]&&t[a].text instanceof Array?e=t[a].text:t[a]&&void 0===t[a].text&&n.text&&n.text instanceof Array&&(e=n.text),!!e}}})})],binding:tt(t,e,{name:et(0,e,n,"name"),visible:{key:"",handler:function(t){var e=n.dataKey,a=!0;return(t[e]&&!1===t[e].show||void 0===t[e]&&!1===n.show)&&(a=!1),!(!(t[e]&&"string"==typeof t[e].text||t[e]&&t[e].text instanceof Array||void 0===t[e]&&n.text)||!1===a)}},alignment:{key:"",handler:function(t){var a,i=n.dataKey,o=.5,r=.5;return"string"==typeof(a=t[i]&&t[i].placement?t[i].placement:n.placement)?(a.includes("top")?r=0:a.includes("bottom")&&(r=1),a.includes("left")?o=0:a.includes("right")&&(o=1)):a instanceof Array&&(o=a[0],r=a[1]),new e.Spot(o,r)}}}),events:n.events})},it=(a(405),function(t,e){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=Object.assign({name:"",figure:"Circle",fill:"#faad14",stroke:"#d48806",strokeWidth:1,strokeDashArray:null,color:"#fff",stateKey:"active",size:15,activeText:{text:"",font:'14px "iconfont"'},inactiveText:{text:"",font:'14px "iconfont"'},placement:"top-right",stateCompute:null,props:{},binding:[],events:{}},a);return n.activeText=Object.assign({text:"",font:'14px "iconfont"'},n.activeText),n.inactiveText=Object.assign({text:"",font:'14px "iconfont"'},n.inactiveText),n.events=Object.assign({click:function(){}},n.events),K(t,e,{type:"Auto",parts:[Q(t,e,{props:Object(I.a)({figure:n.figure,fill:n.fill,width:n.size,height:n.size,stroke:n.stroke,strokeWidth:n.strokeWidth},n.props)}),Y(t,e,{props:{stroke:n.color},binding:tt(t,e,{text:{type:"ofObject",key:"",handler:function(t){return(n.stateCompute&&"function"==typeof n.stateCompute?n.stateCompute(t):!!t.data[n.stateKey])?n.activeText.text:n.inactiveText.text}},font:{key:"",handler:function(t){return t[n.stateKey]?n.activeText.font:n.inactiveText.font}}})})],binding:[].concat(Object(A.a)(n.binding),Object(A.a)(tt(t,e,{alignment:{key:"",handler:function(){var t=n.placement,a=.5,i=.5;return"string"==typeof t?(t.includes("top")?i=0:t.includes("bottom")&&(i=1),t.includes("left")?a=0:t.includes("right")&&(a=1)):t instanceof Array&&(a=t[0],i=t[1]),new e.Spot(a,i)}}}))),events:{click:function(t,e){var a;n.stateCompute&&"function"==typeof n.stateCompute?(a=n.stateCompute(e.part),n.events.click(a,e)):(a=e.part.data[n.stateKey],e.part.data[n.stateKey]=!a,n.events.click(a,e))}}})}),ot=function(t,e){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=Object.assign({figure:"Circle",size:80,fillType:"Radial",fill:{0:"rgba(0,0,0,0)",.67:"rgba(255,242,0,0.1)",.8:"rgba(255,242,0,0.5)",1:"rgba(255,242,0,1)"},visibleKey:"mark",colorKey:"markFill"},a);return Q(t,e,{props:{figure:n.figure,width:n.size,height:n.size,stroke:null,fill:t(e.Brush,n.fillType,n.fill)},binding:tt(t,e,{visible:{key:"",handler:function(t){return!!t[n.visibleKey]}},fill:{key:"",handler:function(a){return a[n.colorKey]?t(e.Brush,n.fillType,a[n.colorKey]):t(e.Brush,n.fillType,a[n.fill])}}})})},rt=function(t,e){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=S({selectionAdorned:!1},a),i=0===n.parts.length?[t(e.Shape)]:n.parts;return t.apply(void 0,[e.Link,n.props,n.events].concat(Object(A.a)(i),Object(A.a)(n.binding)))},dt=(a(344),a(187),a(475),Math.pow,Math.sqrt,Math.sin,Math.cos,Math.PI,window.requestAnimationFrame,{spot:["alignment","alignmentFocus","fromSpot","toSpot","verticalAlignment","imageAlignment","locationSpot","rotationSpot"],number:["angle","fromShortLength","height","opacity","scale","segmentFraction","toEndSegmentLength","toShortLength","width","shadowBlur","corner","curviness","smoothness"],size:["desiredSize","maxSize","minSize"],margin:["margin","padding","avoidableMargin"],rect:["sourceRect"],point:["position","segmentOffset","location","maxLocation","minLocation","shadowOffset"],rgba:["areaBackground","background","fill","stroke","shadowColor"]});!function(){var t={},e=function(e){dt[e].forEach((function(a){t[a]=e}))};for(var a in dt)e(a)}();a(19);var st=a(23),lt=a(47);new go.Spot(0,0),new go.Spot(1,1);var ct=function(){function t(e,a,n){Object(st.a)(this,t),this.diagram=e,this.go=a,this.nodeExist={},this.linkExist={},this.nodeConverter={},this.linkConverter={},this.nodeMergeFun={},this.linkMergeFun={},this.updateNodeFun={},this.updateLinkFun={}}return Object(lt.a)(t,[{key:"getNode",value:function(t){var e,a,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if("string"==typeof t||"number"==typeof t?e=t:(t instanceof this.go.Node||"object"===Object(M.a)(t)&&void 0!==t.key)&&(e=t.key),"object"===Object(M.a)(t)&&i){var o=this.diagram.findNodesByExample(t),r=[];return o.each((function(t){n?r.push(t):r.push(t.data)})),r}if(a=this.diagram.findNodeForKey(e))return n?a:a.data}},{key:"getLink",value:function(t,e){var a,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if("string"==typeof t||"number"==typeof t){var i=this.diagram.model.linkDataArray.find((function(e){return e.key===t}));i&&(a=this.diagram.findLinkForData(i))}else if(t instanceof this.go.Link)a=t;else if("object"===Object(M.a)(t)&&void 0!==t.key&&!n){var o=this.diagram.model.linkDataArray.find((function(e){return e===t}));o&&(a=this.diagram.findLinkForData(o))}if(a)return e?a:a.data;if("object"===Object(M.a)(t)&&n){var r=this.diagram.findLinksByExample(t),d=[];return r.each((function(t){e?d.push(t):d.push(t.data)})),d}}},{key:"setNodeConverter",value:function(t,e){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(t){return t};this.nodeConverter[t]=e,this.nodeMergeFun[t]=a}},{key:"setLinkConverter",value:function(t,e){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(t){return t};this.linkConverter[t]=e,this.linkMergeFun[t]=a}},{key:"addNode",value:function(t,e){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=Object.assign({distinct:!0,duplicate:"replace",mergeFun:""},a),i=this.nodeConverter[e](t,n);if(i._originData=t,void 0===i.key)throw new Error("节点数据必须定义key");var o=this.nodeExist[i.key];if(o)if(n.distinct){if("replace"===n.duplicate){var r=this.diagram.model.findNodeDataForKey(i.key);for(var d in i)"key"!==d&&this.diagram.model.set(r,d,i[d])}else if("merge"===n.duplicate){var s;if(!(s=n.mergeFun?this.nodeMergeFun[n.mergeFun]:this.nodeMergeFun[e]))throw new Error("mergeFun数据合并方法未定义");var l=s(this.nodeExist[i.key],i,this.go,this.diagram);if(l){var c=this.diagram.model.findNodeDataForKey(l.key);for(var u in l)"key"!==u&&this.diagram.model.set(c,u,l[u])}}}else this.diagram.model.addNodeData(i);else this.diagram.model.addNodeData(i),this.nodeExist[i.key]=i}},{key:"addLink",value:function(t,e){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=Object.assign({distinct:!0,duplicate:"replace",mergeFun:""},a),i=this.linkConverter[e](t,n);i._originData=t;var o,r=i.key||i.from+"_"+i.to,d=!1;for(var s in i.key&&this.linkExist[r]&&(d=!0),this.linkExist){var l=this.linkExist[s];if(l.from===i.from&&l.to===i.to){o=l,d=!0;break}}if(d)if(n.distinct){if("replace"===n.duplicate)for(var c in i)"key"!==c&&this.diagram.model.set(o,c,i[c]);else if("merge"===n.duplicate){var u;if(!(u=n.mergeFun?this.linkMergeFun[n.mergeFun]:this.linkMergeFun[e]))throw new Error("mergeFun数据合并方法未定义");var f=u(o,i,this.go,this.diagram);if(f)for(var p in f)"key"!==p&&this.diagram.model.set(o,p,f[p])}}else this.diagram.model.addLinkData(i);else this.diagram.model.addLinkData(i),this.linkExist[r]=i}},{key:"removeNode",value:function(t){var e=this,a=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this.getNode(t,!0,a);n instanceof Array?n.forEach((function(t){e.diagram.remove(t)})):this.diagram.remove(n)}},{key:"removeLink",value:function(t){var e=this,a=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this.getLink(t,!0,a);n instanceof Array?n.forEach((function(t){e.diagram.remove(t)})):this.diagram.remove(n)}},{key:"setNodeUpdater",value:function(t,e){this.updateNodeFun[t]=e}},{key:"setLinkUpdater",value:function(t,e){this.updateLinkFun[t]=e}},{key:"updateNode",value:function(t,e,a){var n=this,i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=arguments.length>4&&void 0!==arguments[4]&&arguments[4],r=this.getNode(t,!1,o);r instanceof Array?i?r.forEach((function(t){t._originData[e]=a,n.updateNodeFun[e](t,a,n.diagram.model,n.diagram)})):r.forEach((function(t){n.diagram.model.set(t,e,a)})):i?(r._originData[e]=a,this.updateNodeFun[e](r,a,this.diagram.model,this.diagram)):this.diagram.model.set(r,e,a)}},{key:"updateLink",value:function(t,e,a){var n=this,i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=arguments.length>4&&void 0!==arguments[4]&&arguments[4],r=this.getLink(t,!1,o);r instanceof Array?i?r.forEach((function(t){t._originData[e]=a,n.updateLinkFun[e](t,a,n.diagram.model,n.diagram)})):r.forEach((function(t){n.diagram.model.set(t,e,a)})):i?(r._originData[e]=a,this.updateLinkFun[e](r,a,this.diagram.model,this.diagram)):this.diagram.model.set(r,e,a)}},{key:"clear",value:function(){this.nodeExist={},this.linkExist={},this.diagram.clear()}}]),t}();a(160),a(67),a(7),a(94);b.a;var ut={DataManager:ct,diagramManager:N.a},ft=ut.diagramManager,pt={props:{},data:function(){return{diagram:null,lock:!1,model:"GraphLinksModel",nodes:[{key:"A",category:"a"},{key:"B",category:"b"},{key:"C",category:"c"},{key:"D",category:"a"},{key:"E",category:"b"},{key:"F",category:"c"}],links:[{from:"A",to:"B"},{from:"A",to:"C"},{from:"C",to:"D"},{from:"B",to:"E"},{from:"E",to:"F"}],timeout:null}},computed:{},methods:{addNode:function(){var t=this;this.timeout&&clearTimeout(this.timeout),this.timeout=setTimeout((function(){var e=["A","B","C"][Math.floor(1e3*Math.random())%3]+Math.floor(1e3*Math.random()),a={key:e,category:["a","b","c"][Math.floor(1e3*Math.random())%3]},n=ft.dig1.nodes.count,i=Math.floor(Math.random()*(n-2)),o={from:ft.dig1.model.nodeDataArray[i].key,to:e};t.$refs.diagram.addNode(a),t.$refs.diagram.addLink(o),t.lock&&t.$refs.layout.layoutAfterAdd([a],[o])}),300)},diagramReady:function(t,e,a){},config:function(t,e){return{initialContentAlignment:e.Spot.Center,"toolManager.mouseWheelBehavior":e.ToolManager.WheelZoom}},nodeTemplate:function(t,e,a){return t(e.Node,"Auto",t(e.Shape,"Rectangle",{portId:"",stroke:a,fill:a}),t(e.TextBlock,"Default Text",{margin:12,stroke:"#ffffff"},new e.Binding("text","key")),new e.Binding("location").makeTwoWay(e.Point.stringify))},linkTemplate:function(t,e){return t(e.Link,{curve:e.Link.Bezier},t(e.Shape,{strokeWidth:3,stroke:"#555"}),t(e.Shape,{toArrow:"Standard"}))},nodeTemplateMap:function(t,e,a){var n=this.nodeTemplate(t,e,"red",a),i=this.nodeTemplate(t,e,"blue",a),o=this.nodeTemplate(t,e,"green",a),r=new e.Map;return r.add("a",n),r.add("b",i),r.add("c",o),r},layout:function(t,e){return t(e.LayeredDigraphLayout,{})}},created:function(){}};d.default.use(j.a),d.default.use(O.a),d.default.use(x);var ht=pt,gt=(a(2290),Object(F.a)(ht,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticStyle:{position:"relative"}},[a("my-go-layout",{ref:"layout",attrs:{"diagram-name":"dig1",lock:t.lock,"custom-class":"my-layout"},on:{"update:lock":function(e){t.lock=e}}}),t._v(" "),a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(e){return t.addNode()}}},[t._v("添加节点")]),t._v(" "),a("my-go",{ref:"diagram",attrs:{"diagram-name":"dig1",nodes:t.nodes,links:t.links,type:t.model,"node-template-map":t.nodeTemplateMap,"link-template":t.linkTemplate,config:t.config,layout:t.layout,height:"600px"},on:{"on-ready":t.diagramReady}})],1)}),[],!1,null,"6c7cce75",null));e.default=gt.exports},296:function(t,e,a){"use strict";a.d(e,"a",(function(){return n}));a(65),"My".toLowerCase();function n(t){return t.install=function(e){return"undefined"!=typeof window&&a(301).default(t),e.component(t.name,t)},t}},297:function(t,e,a){"use strict";a(306);var n={version:"4.0.0-99",debug:!1,appName:null,routePrefix:null,router:{mode:"hash",base:"/"},autoRoutes:!0,vuex:{strict:!1},keys:{code:"code",data:"data",message:"msg",total:"total",list:"list",page:"page",limit:"limit",pages:"pages"},statusCode:{success:0,notLogin:401,authorize:403,error:500},axios:{headers:{"Content-Type":"application/json;charset=UTF-8"},timeout:0,withCredentials:!0,responseType:"json",maxContentLength:-1},svg:{viewBox:"0 0 1024 1024",width:"1em",height:"1em",fill:"currentColor"},access:{},mock:{timeout:"50-200"},scale:{width:1920,height:1080,disabled:!0,lock:!0},analysis:!1,microApp:{prefetch:!1,singular:!0,sandbox:!0}};e.a=n},301:function(t,e,a){"use strict";a.r(e);a(160),a(65);var n=a(297),i=!1,o=[],r=null;n.a.analysis&&function(){if(!i){var t="c4e5f73318b5cb0c389e3d9a05f831cc",e=window._hmt;if(!e||e&&e.id!==t){var a=document.createElement("script");a.src="https://hm.baidu.com/hm.js?".concat(t);var n=document.getElementsByTagName("script")[0];n&&n.parentNode.insertBefore(a,n)}i=!0}}(),e.default=function(t){var e;n.a.analysis&&(e=t.name,o.push(e),clearTimeout(r),r=setTimeout((function(){if(window._hmt&&e){var t=window.location.host,a=window.location.href;window._hmt.push(["_trackEvent",t,o.join(","),n.a.version,a]),o=[]}}),3e3))}},672:function(t,e,a){"use strict";var n={register:function(t,e){if(n[t])throw new Error("diagram "+t+" is exisit");n[t]=e}};e.a=n},719:function(t,e,a){"use strict";var n=a(296),i=(a(19),a(344),a(91),a(161),a(67),a(65),a(92),a(41)),o=a(722),r=a.n(o),d=a(672),s=r.a.GraphObject.make,l=["nodeTemplate","linkTemplate","nodeTemplateMap","linkTemplateMap","groupTemplate","groupTemplateMap"],c={name:"MyGo",provide:function(){return{diagramName:this.diagramName}},props:{diagramName:{type:String,default:function(){return"diagram"+(new Date).getTime()+Math.floor(1e3*Math.random())}},goRegister:{type:Function},width:{type:String,default:"100%"},height:{type:String,default:"100%"},nodeTemplate:{type:Function},linkTemplate:{type:Function},nodeTemplateMap:{type:Function},linkTemplateMap:{type:Function},groupTemplate:{type:Function},groupTemplateMap:{type:Function},type:{type:String,default:"Model",validator:function(t){return["Model","GraphLinksModel","TreeModel"].includes(t)}},nodes:{type:Array},links:{type:Array},config:{type:[Object,Function]},layout:{type:Function},events:{type:Object,default:function(){return Object.create(null)}},modelConfig:{type:[Object,Function]},palette:{type:Boolean,default:!1},loadDataFunc:{type:[Function,Object],default:null}},data:function(){return{htmlInfo:{},timeout:null}},computed:{styles:function(){return{width:this.width,height:this.height}}},watch:{nodes:function(t){var e=this;this.timeout&&clearTimeout(this.timeout),this.timeout=setTimeout((function(){e.loadData(t,e.links)}),50)},links:function(t){var e=this;this.timeout&&clearTimeout(this.timeout),this.timeout=setTimeout((function(){e.loadData(e.nodes,t)}),50)}},methods:{loadData:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(d.a[this.diagramName]){var a=d.a[this.diagramName].model;a.nodeDataArray=t,"GraphLinksModel"===this.type&&(a.linkDataArray=e),d.a[this.diagramName].updateAllRelationshipsFromData(),this.$emit("on-load-data",d.a[this.diagramName],s,r.a)}},loadTemplate:function(){var t=this;l.forEach((function(e){t.setTemplate(e,t[e])}))},setTemplate:function(t,e){if(!l.includes(t))throw new Error("setTemplate不支持模板类型".concat(t));"function"==typeof e&&(d.a[this.diagramName][t]=e(s,r.a,this))},loadLayout:function(t){t&&(d.a[this.diagramName].layout=t(s,r.a,this))},bindEvents:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(d.a[this.diagramName])for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e)){var a=this.listeners[e]=t[e].bind(this);d.a[this.diagramName].addDiagramListener(e,a)}},unbindEvents:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(d.a[this.diagramName])for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e)){var a=this.listeners[e]||t[e];d.a[this.diagramName].removeDiagramListener(e,a),delete this.listeners[e]}},findNode:function(t,e){if(!d.a[this.diagramName])return null;var a=d.a[this.diagramName].model,n=a.nodeDataArray||[],i="function"==typeof t?n.find(t):a.findNodeDataForKey(t);return e?d.a[this.diagramName].findNodeForData(i):i},findNodes:function(t,e){var a=this;if(!d.a[this.diagramName])return[];if(!("function"==typeof t))throw new Error("findNodes的filter参数必须要是函数");var n=(d.a[this.diagramName].model.nodeDataArray||[]).filter(t);return e?n.map((function(t){return d.a[a.diagramName].findNodeForData(t)})):n},findLink:function(t,e){if(!d.a[this.diagramName])return null;var a=d.a[this.diagramName].model,n=a.linkDataArray||[],i="function"==typeof t?n.find(t):a.findLinkDataForKey(t);return e?d.a[this.diagramName].findLinkForData(i):i},findLinks:function(t,e){var a=this;if(!d.a[this.diagramName])return[];if(!("function"==typeof t))throw new Error("findLinks的filter参数必须要是函数");var n=(d.a[this.diagramName].model.linkDataArray||[]).filter(t);return e?n.map((function(t){return d.a[a.diagramName].findLinkForData(t)})):n},findChildLinks:function(t){if(!t||!d.a[this.diagramName])return[];var e=d.a[this.diagramName].model.linkDataArray||[],a=[];return function t(n){e.filter((function(t){return t.from===n})).forEach((function(e){a.push(e),t(e.to)}))}(t),a},findChildNodes:function(t){var e=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"parent",n=[];if("GraphLinksModel"===this.type){var i=this.findChildLinks(t);i.forEach((function(t){n.push(e.findNode(t.to))}))}else if("TreeModel"===this.type){var o=d.a[this.diagramName].model,r=o.nodeDataArray||[],s=function t(e){r.filter((function(t){return t[a]===e})).forEach((function(e){n.push(e),t(e.key)}))};s(t)}return n},update:function(t,e,a){if(d.a[this.diagramName]){var n=Object(i.a)(e);if(!["string","object"].includes(n))throw new Error("update的参数 props 必须事string 或 object类型");var o=d.a[this.diagramName].model;if(d.a[this.diagramName].startTransaction("update"),"string"===n)o.set(t,e,a);else for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&o.set(t,r,e[r]);d.a[this.diagramName].commitTransaction("update")}},addNode:function(t){if(d.a[this.diagramName]){var e=d.a[this.diagramName].model;d.a[this.diagramName].startTransaction("addNode"),Array.isArray(t)?e.addNodeDataCollection(t):e.addNodeData(t),d.a[this.diagramName].commitTransaction("addNode")}},addLink:function(t){if(d.a[this.diagramName]){var e=d.a[this.diagramName].model;d.a[this.diagramName].startTransaction("addLink"),Array.isArray(t)?e.addLinkDataCollection(t):e.addLinkData(t),d.a[this.diagramName].commitTransaction("addLink")}},removeNode:function(t){if(d.a[this.diagramName]&&("string"==typeof t&&(t=this.findNode(t)),t)){var e=d.a[this.diagramName].model;d.a[this.diagramName].startTransaction("removeNode"),Array.isArray(t)?e.removeNodeDataCollection(t):e.removeNodeData(t),d.a[this.diagramName].commitTransaction("removeNode")}},removeLink:function(t){if(d.a[this.diagramName]&&"GraphLinksModel"===this.type&&("string"==typeof t&&(t=this.findLink(t)),t)){var e=d.a[this.diagramName].model;d.a[this.diagramName].startTransaction("removeLink"),Array.isArray(t)?e.removeLinkDataCollection(t):e.removeLinkData(t),d.a[this.diagramName].commitTransaction("removeLink")}},removeChild:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"parent",a=this.findChildNodes(t,e),n=this.findChildLinks(t,e);d.a[this.diagramName].startTransaction("removeChild"),this.removeNode(a),this.removeLink(n),d.a[this.diagramName].commitTransaction("removeChild")},clear:function(){if(d.a[this.diagramName]){var t=d.a[this.diagramName].model;d.a[this.diagramName].startTransaction("clear"),t.clear(),d.a[this.diagramName].commitTransaction("clear")}},toJson:function(){return d.a[this.diagramName]?d.a[this.diagramName].model.toJson():JSON.stringify({})},fromJson:function(t){d.a[this.diagramName]&&(d.a[this.diagramName].model=r.a.Model.fromJson("string"==typeof t?t:JSON.stringify(t)))},resize:function(){d.a[this.diagramName]&&d.a[this.diagramName].requestUpdate()},getHtmlInfo:function(){var t=this;this.$children.forEach((function(e){"XdhGoHtml"===e.name&&(t.htmlInfo[e.menuName]=e.bindMenu(),e.appendToBody&&t.$el.parentNode.appendChild(e.$el))}))}},mounted:function(){d.a.register(this.diagramName,s(this.palette?r.a.Palette:r.a.Diagram,this.$el,"function"==typeof this.config?this.config(s,r.a):this.config||{})),this.getHtmlInfo(),this.loadTemplate(),d.a[this.diagramName].model=s(r.a[this.type],"function"==typeof this.modelConfig?this.modelConfig(s,r.a):this.modelConfig||{}),this.loadLayout(this.layout),this.loadDataFunc&&"function"==typeof this.loadDataFunc?this.loadDataFunc(d.a[this.diagramName],s,r.a,this.nodes,this.links):this.loadData(this.nodes,this.links),this.bindEvents(this.events),this.$emit("on-ready",d.a[this.diagramName],s,r.a)},beforeDestroy:function(){this.unbindEvents(this.events),d.a[this.diagramName].div=null,delete d.a[this.diagramName]},created:function(){this.goRegister&&"function"==typeof this.goRegister&&this.goRegister(s,r.a),this.listeners={}}},u=a(39),f=Object(u.a)(c,(function(){var t=this.$createElement;return(this._self._c||t)("div",{staticClass:"my-go",style:this.styles},[this._t("default")],2)}),[],!1,null,null,null).exports;e.a=Object(n.a)(f)}}]);