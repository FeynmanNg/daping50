(window.webpackJsonp=window.webpackJsonp||[]).push([[784,21],{1026:function(t,e,a){},1350:function(t,e,a){"use strict";var i=a(1026);a.n(i).a},1351:function(t,e,a){},1666:function(t,e,a){"use strict";var i=a(296),n=(a(19),a(65),a(568)),o=a.n(n),r=a(567),s=a.n(r),d=a(569),m=a.n(d),c=a(0),l=a(722),u=a.n(l),f=a(672),h=[{name:"隐藏",icon:"iconfont icon-magic",subMenu:[{name:"隐藏节点"},{name:"隐藏子节点"},{name:"隐藏关系label"},{name:"隐藏关系连线"}]},{name:"显示",icon:"iconfont icon-enlarge",subMenu:[{name:"显示子节点"},{name:"显示关系label"},{name:"显示关系连线"}]},{name:"查看全部",icon:"iconfont icon-bullseye"},{name:"缩小",icon:"iconfont icon-zoomout"},{name:"放大",icon:"iconfont icon-enlarge"}],p={name:"MyGoView",components:{},props:{diagramName:{type:String,default:"dig"},customClass:{type:String,default:""},customStyle:{type:Object,default:function(){return{}}},menus:{type:Array,default:function(){return[]}},handlers:{type:Object,default:function(){return{}}}},data:function(){var t=this;return{menuOption:0!==t.menus.length?t.menus.filter((function(t){return!1!==t.visible})):JSON.parse(JSON.stringify(h)),disabledAll:!1}},computed:{},methods:{toggleDisabledAll:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.disabledAll=t},menuClick:function(t){var e=t.name;if(this.$emit("item-click",t),this.handlers[e])this.handlers[e](f.a[this.diagramName],u.a.GraphObject.make,u.a,t);else{var a=new u.a.Set,i=f.a[this.diagramName],n=i.model;switch(e){case"隐藏节点":i.selection.each((function(t){t instanceof u.a.Node&&a.add(t)})),a.each((function(t){t.visible=!1}));break;case"隐藏关系label":n.setDataProperty(f.a[this.diagramName].model.modelData,"showLinkLabels",!1);break;case"隐藏关系连线":n.setDataProperty(f.a[this.diagramName].model.modelData,"showLinks",!1);break;case"隐藏子节点":i.selection.each((function(t){t instanceof u.a.Node&&a.add(t)})),a.each((function(t){t.collapseTree(1)}));break;case"显示子节点":i.selection.each((function(t){t instanceof u.a.Node&&a.add(t)})),a.each((function(t){t.expandTree(1),t.findTreeChildrenNodes().each((function(t){t.visible=!0}))}));break;case"显示关系label":n.setDataProperty(n.modelData,"showLinkLabels",!0);break;case"显示关系连线":n.setDataProperty(n.modelData,"showLinks",!0);break;case"查看全部":i.zoomToFit();break;case"缩小":i.scale=i.scale-.2;break;case"放大":i.scale=i.scale+.2}}}},created:function(){}};c.default.use(m.a),c.default.use(s.a),c.default.use(o.a);var g=p,y=(a(1350),a(39)),v=Object(y.a)(g,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{class:"my-go__view "+t.customClass,style:t.customStyle},[t._t("default",[a("div",{staticClass:"my-go__menu"},t._l(t.menuOption,(function(e,i){return a("div",{key:i,class:{"my-go__box":!0,disabled:e.disabled||t.disabledAll}},[e.subMenu?t._e():a("div",{on:{click:function(a){return t.menuClick(e)}}},[a("div",{staticClass:"icon-con"},[a("i",{class:e.icon})]),t._v(" "),a("div",{staticClass:"box"},[t._v(t._s(e.name))])]),t._v(" "),e.subMenu?a("div",[a("div",{staticClass:"icon-con"},[a("i",{class:e.icon})]),t._v(" "),a("el-dropdown",{staticClass:"submenu",attrs:{trigger:"click"},on:{command:function(e){return t.menuClick(e)}}},[a("span",{class:{"el-dropdwon-link":!0,disabled:e.disabled||t.disabledAll}},[t._v("\n              "+t._s(e.name)+"\n              "),a("i",{staticClass:"iconfont icon-bold-arrow-down",staticStyle:{"margin-left":"5px"}})]),t._v(" "),a("el-dropdown-menu",{staticClass:"my-go__dropdown",attrs:{slot:"dropdown"},slot:"dropdown"},t._l(e.subMenu,(function(e,i){return a("el-dropdown-item",{key:i,attrs:{command:e,disabled:e.disabled}},[t._v(t._s(e.name))])})),1)],1)],1):t._e()])})),0)],{menus:t.menuOption,menuClick:t.menuClick})],2)}),[],!1,null,"b4af4a9a",null).exports;e.a=Object(i.a)(v)},2267:function(t,e,a){"use strict";var i=a(1351);a.n(i).a},2640:function(t,e,a){"use strict";a.r(e);var i=a(1666),n=a(719),o=a(0);o.default.use(n.a),o.default.use(i.a);var r={props:{},data:function(){return{model:"GraphLinksModel",diagram:null,lock:!1,nodes:[{key:"A",category:"a"},{key:"B",category:"b"},{key:"C",category:"c"},{key:"D",category:"a"},{key:"E",category:"b"},{key:"F",category:"c"}],links:[{from:"A",to:"B"},{from:"A",to:"C"},{from:"C",to:"D"},{from:"B",to:"E"},{from:"E",to:"F"}],timeout:null}},computed:{},methods:{diagramReady:function(t,e,a){},config:function(t,e){return{initialContentAlignment:e.Spot.Center}},nodeTemplate:function(t,e,a){return t(e.Node,"Auto",t(e.Shape,"Rectangle",{portId:"",stroke:a,fill:a}),t(e.TextBlock,"Default Text",{margin:12,stroke:"#ffffff"},new e.Binding("text","key")),new e.Binding("location").makeTwoWay(e.Point.stringify))},linkTemplate:function(t,e){return t(e.Link,{curve:e.Link.Bezier},t(e.Shape,{strokeWidth:3,stroke:"#555"}),t(e.Shape,{toArrow:"Standard"}))},nodeTemplateMap:function(t,e,a){var i=this.nodeTemplate(t,e,"red",a),n=this.nodeTemplate(t,e,"blue",a),o=this.nodeTemplate(t,e,"green",a),r=new e.Map;return r.add("a",i),r.add("b",n),r.add("c",o),r},layout:function(t,e){return t(e.LayeredDigraphLayout,{})}},created:function(){}},s=(a(2267),a(39)),d=Object(s.a)(r,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticStyle:{position:"relative"}},[a("my-go-view",{ref:"view",attrs:{"diagram-name":"dig1","custom-class":"my-view"}}),t._v(" "),a("my-go",{ref:"diagram",attrs:{"diagram-name":"dig1",nodes:t.nodes,links:t.links,type:t.model,"node-template-map":t.nodeTemplateMap,"link-template":t.linkTemplate,config:t.config,layout:t.layout,height:"400px"},on:{"on-ready":t.diagramReady}})],1)}),[],!1,null,"01a323ce",null);e.default=d.exports},296:function(t,e,a){"use strict";a.d(e,"a",(function(){return i}));a(65),"My".toLowerCase();function i(t){return t.install=function(e){return"undefined"!=typeof window&&a(301).default(t),e.component(t.name,t)},t}},297:function(t,e,a){"use strict";a(306);var i={version:"4.0.0-99",debug:!1,appName:null,routePrefix:null,router:{mode:"hash",base:"/"},autoRoutes:!0,vuex:{strict:!1},keys:{code:"code",data:"data",message:"msg",total:"total",list:"list",page:"page",limit:"limit",pages:"pages"},statusCode:{success:0,notLogin:401,authorize:403,error:500},axios:{headers:{"Content-Type":"application/json;charset=UTF-8"},timeout:0,withCredentials:!0,responseType:"json",maxContentLength:-1},svg:{viewBox:"0 0 1024 1024",width:"1em",height:"1em",fill:"currentColor"},access:{},mock:{timeout:"50-200"},scale:{width:1920,height:1080,disabled:!0,lock:!0},analysis:!1,microApp:{prefetch:!1,singular:!0,sandbox:!0}};e.a=i},301:function(t,e,a){"use strict";a.r(e);a(160),a(65);var i=a(297),n=!1,o=[],r=null;i.a.analysis&&function(){if(!n){var t="c4e5f73318b5cb0c389e3d9a05f831cc",e=window._hmt;if(!e||e&&e.id!==t){var a=document.createElement("script");a.src="https://hm.baidu.com/hm.js?".concat(t);var i=document.getElementsByTagName("script")[0];i&&i.parentNode.insertBefore(a,i)}n=!0}}(),e.default=function(t){var e;i.a.analysis&&(e=t.name,o.push(e),clearTimeout(r),r=setTimeout((function(){if(window._hmt&&e){var t=window.location.host,a=window.location.href;window._hmt.push(["_trackEvent",t,o.join(","),i.a.version,a]),o=[]}}),3e3))}},319:function(t,e,a){"use strict";function i(t,e,a){this.$children.forEach((function(n){n.$options.componentName===t?n.$emit.apply(n,[e].concat(a)):i.apply(n,[t,e].concat([a]))}))}e.__esModule=!0,e.default={methods:{dispatch:function(t,e,a){for(var i=this.$parent||this.$root,n=i.$options.componentName;i&&(!n||n!==t);)(i=i.$parent)&&(n=i.$options.componentName);i&&i.$emit.apply(i,[e].concat(a))},broadcast:function(t,e,a){i.call(this,t,e,a)}}}},351:function(t,e,a){"use strict";e.__esModule=!0;var i,n=a(0),o=(i=n)&&i.__esModule?i:{default:i},r=a(308);var s=[],d="@@clickoutsideContext",m=void 0,c=0;function l(t,e,a){return function(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};!(a&&a.context&&i.target&&n.target)||t.contains(i.target)||t.contains(n.target)||t===i.target||a.context.popperElm&&(a.context.popperElm.contains(i.target)||a.context.popperElm.contains(n.target))||(e.expression&&t[d].methodName&&a.context[t[d].methodName]?a.context[t[d].methodName]():t[d].bindingFn&&t[d].bindingFn())}}!o.default.prototype.$isServer&&(0,r.on)(document,"mousedown",(function(t){return m=t})),!o.default.prototype.$isServer&&(0,r.on)(document,"mouseup",(function(t){s.forEach((function(e){return e[d].documentHandler(t,m)}))})),e.default={bind:function(t,e,a){s.push(t);var i=c++;t[d]={id:i,documentHandler:l(t,e,a),methodName:e.expression,bindingFn:e.value}},update:function(t,e,a){t[d].documentHandler=l(t,e,a),t[d].methodName=e.expression,t[d].bindingFn=e.value},unbind:function(t){for(var e=s.length,a=0;a<e;a++)if(s[a][d].id===t[d].id){s.splice(a,1);break}delete t[d]}}},435:function(t,e,a){"use strict";e.__esModule=!0;a(310);e.default={mounted:function(){},methods:{getMigratingConfig:function(){return{props:{},events:{}}}}}},672:function(t,e,a){"use strict";var i={register:function(t,e){if(i[t])throw new Error("diagram "+t+" is exisit");i[t]=e}};e.a=i},719:function(t,e,a){"use strict";var i=a(296),n=(a(19),a(344),a(91),a(161),a(67),a(65),a(92),a(41)),o=a(722),r=a.n(o),s=a(672),d=r.a.GraphObject.make,m=["nodeTemplate","linkTemplate","nodeTemplateMap","linkTemplateMap","groupTemplate","groupTemplateMap"],c={name:"MyGo",provide:function(){return{diagramName:this.diagramName}},props:{diagramName:{type:String,default:function(){return"diagram"+(new Date).getTime()+Math.floor(1e3*Math.random())}},goRegister:{type:Function},width:{type:String,default:"100%"},height:{type:String,default:"100%"},nodeTemplate:{type:Function},linkTemplate:{type:Function},nodeTemplateMap:{type:Function},linkTemplateMap:{type:Function},groupTemplate:{type:Function},groupTemplateMap:{type:Function},type:{type:String,default:"Model",validator:function(t){return["Model","GraphLinksModel","TreeModel"].includes(t)}},nodes:{type:Array},links:{type:Array},config:{type:[Object,Function]},layout:{type:Function},events:{type:Object,default:function(){return Object.create(null)}},modelConfig:{type:[Object,Function]},palette:{type:Boolean,default:!1},loadDataFunc:{type:[Function,Object],default:null}},data:function(){return{htmlInfo:{},timeout:null}},computed:{styles:function(){return{width:this.width,height:this.height}}},watch:{nodes:function(t){var e=this;this.timeout&&clearTimeout(this.timeout),this.timeout=setTimeout((function(){e.loadData(t,e.links)}),50)},links:function(t){var e=this;this.timeout&&clearTimeout(this.timeout),this.timeout=setTimeout((function(){e.loadData(e.nodes,t)}),50)}},methods:{loadData:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(s.a[this.diagramName]){var a=s.a[this.diagramName].model;a.nodeDataArray=t,"GraphLinksModel"===this.type&&(a.linkDataArray=e),s.a[this.diagramName].updateAllRelationshipsFromData(),this.$emit("on-load-data",s.a[this.diagramName],d,r.a)}},loadTemplate:function(){var t=this;m.forEach((function(e){t.setTemplate(e,t[e])}))},setTemplate:function(t,e){if(!m.includes(t))throw new Error("setTemplate不支持模板类型".concat(t));"function"==typeof e&&(s.a[this.diagramName][t]=e(d,r.a,this))},loadLayout:function(t){t&&(s.a[this.diagramName].layout=t(d,r.a,this))},bindEvents:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(s.a[this.diagramName])for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e)){var a=this.listeners[e]=t[e].bind(this);s.a[this.diagramName].addDiagramListener(e,a)}},unbindEvents:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(s.a[this.diagramName])for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e)){var a=this.listeners[e]||t[e];s.a[this.diagramName].removeDiagramListener(e,a),delete this.listeners[e]}},findNode:function(t,e){if(!s.a[this.diagramName])return null;var a=s.a[this.diagramName].model,i=a.nodeDataArray||[],n="function"==typeof t?i.find(t):a.findNodeDataForKey(t);return e?s.a[this.diagramName].findNodeForData(n):n},findNodes:function(t,e){var a=this;if(!s.a[this.diagramName])return[];if(!("function"==typeof t))throw new Error("findNodes的filter参数必须要是函数");var i=(s.a[this.diagramName].model.nodeDataArray||[]).filter(t);return e?i.map((function(t){return s.a[a.diagramName].findNodeForData(t)})):i},findLink:function(t,e){if(!s.a[this.diagramName])return null;var a=s.a[this.diagramName].model,i=a.linkDataArray||[],n="function"==typeof t?i.find(t):a.findLinkDataForKey(t);return e?s.a[this.diagramName].findLinkForData(n):n},findLinks:function(t,e){var a=this;if(!s.a[this.diagramName])return[];if(!("function"==typeof t))throw new Error("findLinks的filter参数必须要是函数");var i=(s.a[this.diagramName].model.linkDataArray||[]).filter(t);return e?i.map((function(t){return s.a[a.diagramName].findLinkForData(t)})):i},findChildLinks:function(t){if(!t||!s.a[this.diagramName])return[];var e=s.a[this.diagramName].model.linkDataArray||[],a=[];return function t(i){e.filter((function(t){return t.from===i})).forEach((function(e){a.push(e),t(e.to)}))}(t),a},findChildNodes:function(t){var e=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"parent",i=[];if("GraphLinksModel"===this.type){var n=this.findChildLinks(t);n.forEach((function(t){i.push(e.findNode(t.to))}))}else if("TreeModel"===this.type){var o=s.a[this.diagramName].model,r=o.nodeDataArray||[],d=function t(e){r.filter((function(t){return t[a]===e})).forEach((function(e){i.push(e),t(e.key)}))};d(t)}return i},update:function(t,e,a){if(s.a[this.diagramName]){var i=Object(n.a)(e);if(!["string","object"].includes(i))throw new Error("update的参数 props 必须事string 或 object类型");var o=s.a[this.diagramName].model;if(s.a[this.diagramName].startTransaction("update"),"string"===i)o.set(t,e,a);else for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&o.set(t,r,e[r]);s.a[this.diagramName].commitTransaction("update")}},addNode:function(t){if(s.a[this.diagramName]){var e=s.a[this.diagramName].model;s.a[this.diagramName].startTransaction("addNode"),Array.isArray(t)?e.addNodeDataCollection(t):e.addNodeData(t),s.a[this.diagramName].commitTransaction("addNode")}},addLink:function(t){if(s.a[this.diagramName]){var e=s.a[this.diagramName].model;s.a[this.diagramName].startTransaction("addLink"),Array.isArray(t)?e.addLinkDataCollection(t):e.addLinkData(t),s.a[this.diagramName].commitTransaction("addLink")}},removeNode:function(t){if(s.a[this.diagramName]&&("string"==typeof t&&(t=this.findNode(t)),t)){var e=s.a[this.diagramName].model;s.a[this.diagramName].startTransaction("removeNode"),Array.isArray(t)?e.removeNodeDataCollection(t):e.removeNodeData(t),s.a[this.diagramName].commitTransaction("removeNode")}},removeLink:function(t){if(s.a[this.diagramName]&&"GraphLinksModel"===this.type&&("string"==typeof t&&(t=this.findLink(t)),t)){var e=s.a[this.diagramName].model;s.a[this.diagramName].startTransaction("removeLink"),Array.isArray(t)?e.removeLinkDataCollection(t):e.removeLinkData(t),s.a[this.diagramName].commitTransaction("removeLink")}},removeChild:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"parent",a=this.findChildNodes(t,e),i=this.findChildLinks(t,e);s.a[this.diagramName].startTransaction("removeChild"),this.removeNode(a),this.removeLink(i),s.a[this.diagramName].commitTransaction("removeChild")},clear:function(){if(s.a[this.diagramName]){var t=s.a[this.diagramName].model;s.a[this.diagramName].startTransaction("clear"),t.clear(),s.a[this.diagramName].commitTransaction("clear")}},toJson:function(){return s.a[this.diagramName]?s.a[this.diagramName].model.toJson():JSON.stringify({})},fromJson:function(t){s.a[this.diagramName]&&(s.a[this.diagramName].model=r.a.Model.fromJson("string"==typeof t?t:JSON.stringify(t)))},resize:function(){s.a[this.diagramName]&&s.a[this.diagramName].requestUpdate()},getHtmlInfo:function(){var t=this;this.$children.forEach((function(e){"XdhGoHtml"===e.name&&(t.htmlInfo[e.menuName]=e.bindMenu(),e.appendToBody&&t.$el.parentNode.appendChild(e.$el))}))}},mounted:function(){s.a.register(this.diagramName,d(this.palette?r.a.Palette:r.a.Diagram,this.$el,"function"==typeof this.config?this.config(d,r.a):this.config||{})),this.getHtmlInfo(),this.loadTemplate(),s.a[this.diagramName].model=d(r.a[this.type],"function"==typeof this.modelConfig?this.modelConfig(d,r.a):this.modelConfig||{}),this.loadLayout(this.layout),this.loadDataFunc&&"function"==typeof this.loadDataFunc?this.loadDataFunc(s.a[this.diagramName],d,r.a,this.nodes,this.links):this.loadData(this.nodes,this.links),this.bindEvents(this.events),this.$emit("on-ready",s.a[this.diagramName],d,r.a)},beforeDestroy:function(){this.unbindEvents(this.events),s.a[this.diagramName].div=null,delete s.a[this.diagramName]},created:function(){this.goRegister&&"function"==typeof this.goRegister&&this.goRegister(d,r.a),this.listeners={}}},l=a(39),u=Object(l.a)(c,(function(){var t=this.$createElement;return(this._self._c||t)("div",{staticClass:"my-go",style:this.styles},[this._t("default")],2)}),[],!1,null,null,null).exports;e.a=Object(i.a)(u)}}]);