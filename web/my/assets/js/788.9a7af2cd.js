(window.webpackJsonp=window.webpackJsonp||[]).push([[788,21],{1026:function(e,t,a){},1350:function(e,t,a){"use strict";var n=a(1026);a.n(n).a},1615:function(e,t,a){},1666:function(e,t,a){"use strict";var n=a(296),i=(a(19),a(65),a(568)),o=a.n(i),r=a(567),s=a.n(r),d=a(569),c=a.n(d),m=a(0),l=a(722),u=a.n(l),f=a(672),h=[{name:"隐藏",icon:"iconfont icon-magic",subMenu:[{name:"隐藏节点"},{name:"隐藏子节点"},{name:"隐藏关系label"},{name:"隐藏关系连线"}]},{name:"显示",icon:"iconfont icon-enlarge",subMenu:[{name:"显示子节点"},{name:"显示关系label"},{name:"显示关系连线"}]},{name:"查看全部",icon:"iconfont icon-bullseye"},{name:"缩小",icon:"iconfont icon-zoomout"},{name:"放大",icon:"iconfont icon-enlarge"}],p={name:"MyGoView",components:{},props:{diagramName:{type:String,default:"dig"},customClass:{type:String,default:""},customStyle:{type:Object,default:function(){return{}}},menus:{type:Array,default:function(){return[]}},handlers:{type:Object,default:function(){return{}}}},data:function(){var e=this;return{menuOption:0!==e.menus.length?e.menus.filter((function(e){return!1!==e.visible})):JSON.parse(JSON.stringify(h)),disabledAll:!1}},computed:{},methods:{toggleDisabledAll:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.disabledAll=e},menuClick:function(e){var t=e.name;if(this.$emit("item-click",e),this.handlers[t])this.handlers[t](f.a[this.diagramName],u.a.GraphObject.make,u.a,e);else{var a=new u.a.Set,n=f.a[this.diagramName],i=n.model;switch(t){case"隐藏节点":n.selection.each((function(e){e instanceof u.a.Node&&a.add(e)})),a.each((function(e){e.visible=!1}));break;case"隐藏关系label":i.setDataProperty(f.a[this.diagramName].model.modelData,"showLinkLabels",!1);break;case"隐藏关系连线":i.setDataProperty(f.a[this.diagramName].model.modelData,"showLinks",!1);break;case"隐藏子节点":n.selection.each((function(e){e instanceof u.a.Node&&a.add(e)})),a.each((function(e){e.collapseTree(1)}));break;case"显示子节点":n.selection.each((function(e){e instanceof u.a.Node&&a.add(e)})),a.each((function(e){e.expandTree(1),e.findTreeChildrenNodes().each((function(e){e.visible=!0}))}));break;case"显示关系label":i.setDataProperty(i.modelData,"showLinkLabels",!0);break;case"显示关系连线":i.setDataProperty(i.modelData,"showLinks",!0);break;case"查看全部":n.zoomToFit();break;case"缩小":n.scale=n.scale-.2;break;case"放大":n.scale=n.scale+.2}}}},created:function(){}};m.default.use(c.a),m.default.use(s.a),m.default.use(o.a);var g=p,y=(a(1350),a(39)),v=Object(y.a)(g,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{class:"my-go__view "+e.customClass,style:e.customStyle},[e._t("default",[a("div",{staticClass:"my-go__menu"},e._l(e.menuOption,(function(t,n){return a("div",{key:n,class:{"my-go__box":!0,disabled:t.disabled||e.disabledAll}},[t.subMenu?e._e():a("div",{on:{click:function(a){return e.menuClick(t)}}},[a("div",{staticClass:"icon-con"},[a("i",{class:t.icon})]),e._v(" "),a("div",{staticClass:"box"},[e._v(e._s(t.name))])]),e._v(" "),t.subMenu?a("div",[a("div",{staticClass:"icon-con"},[a("i",{class:t.icon})]),e._v(" "),a("el-dropdown",{staticClass:"submenu",attrs:{trigger:"click"},on:{command:function(t){return e.menuClick(t)}}},[a("span",{class:{"el-dropdwon-link":!0,disabled:t.disabled||e.disabledAll}},[e._v("\n              "+e._s(t.name)+"\n              "),a("i",{staticClass:"iconfont icon-bold-arrow-down",staticStyle:{"margin-left":"5px"}})]),e._v(" "),a("el-dropdown-menu",{staticClass:"my-go__dropdown",attrs:{slot:"dropdown"},slot:"dropdown"},e._l(t.subMenu,(function(t,n){return a("el-dropdown-item",{key:n,attrs:{command:t,disabled:t.disabled}},[e._v(e._s(t.name))])})),1)],1)],1):e._e()])})),0)],{menus:e.menuOption,menuClick:e.menuClick})],2)}),[],!1,null,"b4af4a9a",null).exports;t.a=Object(n.a)(v)},2398:function(e,t,a){"use strict";var n=a(1615);a.n(n).a},296:function(e,t,a){"use strict";a.d(t,"a",(function(){return n}));a(65),"My".toLowerCase();function n(e){return e.install=function(t){return"undefined"!=typeof window&&a(301).default(e),t.component(e.name,e)},e}},297:function(e,t,a){"use strict";a(306);var n={version:"4.0.0-99",debug:!1,appName:null,routePrefix:null,router:{mode:"hash",base:"/"},autoRoutes:!0,vuex:{strict:!1},keys:{code:"code",data:"data",message:"msg",total:"total",list:"list",page:"page",limit:"limit",pages:"pages"},statusCode:{success:0,notLogin:401,authorize:403,error:500},axios:{headers:{"Content-Type":"application/json;charset=UTF-8"},timeout:0,withCredentials:!0,responseType:"json",maxContentLength:-1},svg:{viewBox:"0 0 1024 1024",width:"1em",height:"1em",fill:"currentColor"},access:{},mock:{timeout:"50-200"},scale:{width:1920,height:1080,disabled:!0,lock:!0},analysis:!1,microApp:{prefetch:!1,singular:!0,sandbox:!0}};t.a=n},301:function(e,t,a){"use strict";a.r(t);a(160),a(65);var n=a(297),i=!1,o=[],r=null;n.a.analysis&&function(){if(!i){var e="c4e5f73318b5cb0c389e3d9a05f831cc",t=window._hmt;if(!t||t&&t.id!==e){var a=document.createElement("script");a.src="https://hm.baidu.com/hm.js?".concat(e);var n=document.getElementsByTagName("script")[0];n&&n.parentNode.insertBefore(a,n)}i=!0}}(),t.default=function(e){var t;n.a.analysis&&(t=e.name,o.push(t),clearTimeout(r),r=setTimeout((function(){if(window._hmt&&t){var e=window.location.host,a=window.location.href;window._hmt.push(["_trackEvent",e,o.join(","),n.a.version,a]),o=[]}}),3e3))}},3058:function(e,t,a){"use strict";a.r(t);a(162),a(65);var n=a(1666),i=a(719),o=a(0),r={props:{},data:function(){var e=this;return{model:"GraphLinksModel",diagram:null,lock:!1,nodes:[{key:"A",category:"a"},{key:"B",category:"b"},{key:"C",category:"c"},{key:"D",category:"a"},{key:"E",category:"b"},{key:"F",category:"c"}],links:[{from:"A",to:"B"},{from:"A",to:"C"},{from:"C",to:"D"},{from:"B",to:"E"},{from:"E",to:"F"}],timeout:null,customMenu:[{name:"放大",icon:"iconfont icon-enlarge"},{name:"缩小",icon:"iconfont icon-zoomout"},{name:"查看全部",icon:"iconfont icon-bullseye"},{name:"自定义按钮1",icon:"el-icon-s-tools"}],menuHandler:{"自定义按钮1":function(t,a,n,i){e.customHandler1(t,a,n,i)}}}},computed:{},methods:{customHandler1:function(e,t,a,n){this.$message({type:"info",message:"点击了".concat(n.name,", 当前节点数据").concat(JSON.stringify(e.model.nodeDataArray))})},diagramReady:function(e,t,a){},config:function(e,t){return{initialContentAlignment:t.Spot.Center}},nodeTemplate:function(e,t,a){return e(t.Node,"Auto",e(t.Shape,"Rectangle",{portId:"",stroke:a,fill:a}),e(t.TextBlock,"Default Text",{margin:12,stroke:"#ffffff"},new t.Binding("text","key")),new t.Binding("location").makeTwoWay(t.Point.stringify))},linkTemplate:function(e,t){return e(t.Link,{curve:t.Link.Bezier},e(t.Shape,{strokeWidth:3,stroke:"#555"}),e(t.Shape,{toArrow:"Standard"}))},nodeTemplateMap:function(e,t,a){var n=this.nodeTemplate(e,t,"red",a),i=this.nodeTemplate(e,t,"blue",a),o=this.nodeTemplate(e,t,"green",a),r=new t.Map;return r.add("a",n),r.add("b",i),r.add("c",o),r},layout:function(e,t){return e(t.LayeredDigraphLayout,{})}},created:function(){}};o.default.use(i.a),o.default.use(n.a);var s=r,d=(a(2398),a(39)),c=Object(d.a)(s,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticStyle:{position:"relative"}},[a("my-go-view",{ref:"view",attrs:{"diagram-name":"dig2","custom-class":"my-view",menus:e.customMenu,handlers:e.menuHandler}}),e._v(" "),a("my-go",{ref:"diagram",attrs:{"diagram-name":"dig2",nodes:e.nodes,links:e.links,type:e.model,"node-template-map":e.nodeTemplateMap,"link-template":e.linkTemplate,config:e.config,layout:e.layout,height:"400px"},on:{"on-ready":e.diagramReady}})],1)}),[],!1,null,"0ff18c37",null);t.default=c.exports},319:function(e,t,a){"use strict";function n(e,t,a){this.$children.forEach((function(i){i.$options.componentName===e?i.$emit.apply(i,[t].concat(a)):n.apply(i,[e,t].concat([a]))}))}t.__esModule=!0,t.default={methods:{dispatch:function(e,t,a){for(var n=this.$parent||this.$root,i=n.$options.componentName;n&&(!i||i!==e);)(n=n.$parent)&&(i=n.$options.componentName);n&&n.$emit.apply(n,[t].concat(a))},broadcast:function(e,t,a){n.call(this,e,t,a)}}}},351:function(e,t,a){"use strict";t.__esModule=!0;var n,i=a(0),o=(n=i)&&n.__esModule?n:{default:n},r=a(308);var s=[],d="@@clickoutsideContext",c=void 0,m=0;function l(e,t,a){return function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};!(a&&a.context&&n.target&&i.target)||e.contains(n.target)||e.contains(i.target)||e===n.target||a.context.popperElm&&(a.context.popperElm.contains(n.target)||a.context.popperElm.contains(i.target))||(t.expression&&e[d].methodName&&a.context[e[d].methodName]?a.context[e[d].methodName]():e[d].bindingFn&&e[d].bindingFn())}}!o.default.prototype.$isServer&&(0,r.on)(document,"mousedown",(function(e){return c=e})),!o.default.prototype.$isServer&&(0,r.on)(document,"mouseup",(function(e){s.forEach((function(t){return t[d].documentHandler(e,c)}))})),t.default={bind:function(e,t,a){s.push(e);var n=m++;e[d]={id:n,documentHandler:l(e,t,a),methodName:t.expression,bindingFn:t.value}},update:function(e,t,a){e[d].documentHandler=l(e,t,a),e[d].methodName=t.expression,e[d].bindingFn=t.value},unbind:function(e){for(var t=s.length,a=0;a<t;a++)if(s[a][d].id===e[d].id){s.splice(a,1);break}delete e[d]}}},435:function(e,t,a){"use strict";t.__esModule=!0;a(310);t.default={mounted:function(){},methods:{getMigratingConfig:function(){return{props:{},events:{}}}}}},672:function(e,t,a){"use strict";var n={register:function(e,t){if(n[e])throw new Error("diagram "+e+" is exisit");n[e]=t}};t.a=n},719:function(e,t,a){"use strict";var n=a(296),i=(a(19),a(344),a(91),a(161),a(67),a(65),a(92),a(41)),o=a(722),r=a.n(o),s=a(672),d=r.a.GraphObject.make,c=["nodeTemplate","linkTemplate","nodeTemplateMap","linkTemplateMap","groupTemplate","groupTemplateMap"],m={name:"MyGo",provide:function(){return{diagramName:this.diagramName}},props:{diagramName:{type:String,default:function(){return"diagram"+(new Date).getTime()+Math.floor(1e3*Math.random())}},goRegister:{type:Function},width:{type:String,default:"100%"},height:{type:String,default:"100%"},nodeTemplate:{type:Function},linkTemplate:{type:Function},nodeTemplateMap:{type:Function},linkTemplateMap:{type:Function},groupTemplate:{type:Function},groupTemplateMap:{type:Function},type:{type:String,default:"Model",validator:function(e){return["Model","GraphLinksModel","TreeModel"].includes(e)}},nodes:{type:Array},links:{type:Array},config:{type:[Object,Function]},layout:{type:Function},events:{type:Object,default:function(){return Object.create(null)}},modelConfig:{type:[Object,Function]},palette:{type:Boolean,default:!1},loadDataFunc:{type:[Function,Object],default:null}},data:function(){return{htmlInfo:{},timeout:null}},computed:{styles:function(){return{width:this.width,height:this.height}}},watch:{nodes:function(e){var t=this;this.timeout&&clearTimeout(this.timeout),this.timeout=setTimeout((function(){t.loadData(e,t.links)}),50)},links:function(e){var t=this;this.timeout&&clearTimeout(this.timeout),this.timeout=setTimeout((function(){t.loadData(t.nodes,e)}),50)}},methods:{loadData:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(s.a[this.diagramName]){var a=s.a[this.diagramName].model;a.nodeDataArray=e,"GraphLinksModel"===this.type&&(a.linkDataArray=t),s.a[this.diagramName].updateAllRelationshipsFromData(),this.$emit("on-load-data",s.a[this.diagramName],d,r.a)}},loadTemplate:function(){var e=this;c.forEach((function(t){e.setTemplate(t,e[t])}))},setTemplate:function(e,t){if(!c.includes(e))throw new Error("setTemplate不支持模板类型".concat(e));"function"==typeof t&&(s.a[this.diagramName][e]=t(d,r.a,this))},loadLayout:function(e){e&&(s.a[this.diagramName].layout=e(d,r.a,this))},bindEvents:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(s.a[this.diagramName])for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t)){var a=this.listeners[t]=e[t].bind(this);s.a[this.diagramName].addDiagramListener(t,a)}},unbindEvents:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(s.a[this.diagramName])for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t)){var a=this.listeners[t]||e[t];s.a[this.diagramName].removeDiagramListener(t,a),delete this.listeners[t]}},findNode:function(e,t){if(!s.a[this.diagramName])return null;var a=s.a[this.diagramName].model,n=a.nodeDataArray||[],i="function"==typeof e?n.find(e):a.findNodeDataForKey(e);return t?s.a[this.diagramName].findNodeForData(i):i},findNodes:function(e,t){var a=this;if(!s.a[this.diagramName])return[];if(!("function"==typeof e))throw new Error("findNodes的filter参数必须要是函数");var n=(s.a[this.diagramName].model.nodeDataArray||[]).filter(e);return t?n.map((function(e){return s.a[a.diagramName].findNodeForData(e)})):n},findLink:function(e,t){if(!s.a[this.diagramName])return null;var a=s.a[this.diagramName].model,n=a.linkDataArray||[],i="function"==typeof e?n.find(e):a.findLinkDataForKey(e);return t?s.a[this.diagramName].findLinkForData(i):i},findLinks:function(e,t){var a=this;if(!s.a[this.diagramName])return[];if(!("function"==typeof e))throw new Error("findLinks的filter参数必须要是函数");var n=(s.a[this.diagramName].model.linkDataArray||[]).filter(e);return t?n.map((function(e){return s.a[a.diagramName].findLinkForData(e)})):n},findChildLinks:function(e){if(!e||!s.a[this.diagramName])return[];var t=s.a[this.diagramName].model.linkDataArray||[],a=[];return function e(n){t.filter((function(e){return e.from===n})).forEach((function(t){a.push(t),e(t.to)}))}(e),a},findChildNodes:function(e){var t=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"parent",n=[];if("GraphLinksModel"===this.type){var i=this.findChildLinks(e);i.forEach((function(e){n.push(t.findNode(e.to))}))}else if("TreeModel"===this.type){var o=s.a[this.diagramName].model,r=o.nodeDataArray||[],d=function e(t){r.filter((function(e){return e[a]===t})).forEach((function(t){n.push(t),e(t.key)}))};d(e)}return n},update:function(e,t,a){if(s.a[this.diagramName]){var n=Object(i.a)(t);if(!["string","object"].includes(n))throw new Error("update的参数 props 必须事string 或 object类型");var o=s.a[this.diagramName].model;if(s.a[this.diagramName].startTransaction("update"),"string"===n)o.set(e,t,a);else for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&o.set(e,r,t[r]);s.a[this.diagramName].commitTransaction("update")}},addNode:function(e){if(s.a[this.diagramName]){var t=s.a[this.diagramName].model;s.a[this.diagramName].startTransaction("addNode"),Array.isArray(e)?t.addNodeDataCollection(e):t.addNodeData(e),s.a[this.diagramName].commitTransaction("addNode")}},addLink:function(e){if(s.a[this.diagramName]){var t=s.a[this.diagramName].model;s.a[this.diagramName].startTransaction("addLink"),Array.isArray(e)?t.addLinkDataCollection(e):t.addLinkData(e),s.a[this.diagramName].commitTransaction("addLink")}},removeNode:function(e){if(s.a[this.diagramName]&&("string"==typeof e&&(e=this.findNode(e)),e)){var t=s.a[this.diagramName].model;s.a[this.diagramName].startTransaction("removeNode"),Array.isArray(e)?t.removeNodeDataCollection(e):t.removeNodeData(e),s.a[this.diagramName].commitTransaction("removeNode")}},removeLink:function(e){if(s.a[this.diagramName]&&"GraphLinksModel"===this.type&&("string"==typeof e&&(e=this.findLink(e)),e)){var t=s.a[this.diagramName].model;s.a[this.diagramName].startTransaction("removeLink"),Array.isArray(e)?t.removeLinkDataCollection(e):t.removeLinkData(e),s.a[this.diagramName].commitTransaction("removeLink")}},removeChild:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"parent",a=this.findChildNodes(e,t),n=this.findChildLinks(e,t);s.a[this.diagramName].startTransaction("removeChild"),this.removeNode(a),this.removeLink(n),s.a[this.diagramName].commitTransaction("removeChild")},clear:function(){if(s.a[this.diagramName]){var e=s.a[this.diagramName].model;s.a[this.diagramName].startTransaction("clear"),e.clear(),s.a[this.diagramName].commitTransaction("clear")}},toJson:function(){return s.a[this.diagramName]?s.a[this.diagramName].model.toJson():JSON.stringify({})},fromJson:function(e){s.a[this.diagramName]&&(s.a[this.diagramName].model=r.a.Model.fromJson("string"==typeof e?e:JSON.stringify(e)))},resize:function(){s.a[this.diagramName]&&s.a[this.diagramName].requestUpdate()},getHtmlInfo:function(){var e=this;this.$children.forEach((function(t){"XdhGoHtml"===t.name&&(e.htmlInfo[t.menuName]=t.bindMenu(),t.appendToBody&&e.$el.parentNode.appendChild(t.$el))}))}},mounted:function(){s.a.register(this.diagramName,d(this.palette?r.a.Palette:r.a.Diagram,this.$el,"function"==typeof this.config?this.config(d,r.a):this.config||{})),this.getHtmlInfo(),this.loadTemplate(),s.a[this.diagramName].model=d(r.a[this.type],"function"==typeof this.modelConfig?this.modelConfig(d,r.a):this.modelConfig||{}),this.loadLayout(this.layout),this.loadDataFunc&&"function"==typeof this.loadDataFunc?this.loadDataFunc(s.a[this.diagramName],d,r.a,this.nodes,this.links):this.loadData(this.nodes,this.links),this.bindEvents(this.events),this.$emit("on-ready",s.a[this.diagramName],d,r.a)},beforeDestroy:function(){this.unbindEvents(this.events),s.a[this.diagramName].div=null,delete s.a[this.diagramName]},created:function(){this.goRegister&&"function"==typeof this.goRegister&&this.goRegister(d,r.a),this.listeners={}}},l=a(39),u=Object(l.a)(m,(function(){var e=this.$createElement;return(this._self._c||e)("div",{staticClass:"my-go",style:this.styles},[this._t("default")],2)}),[],!1,null,null,null).exports;t.a=Object(n.a)(u)}}]);