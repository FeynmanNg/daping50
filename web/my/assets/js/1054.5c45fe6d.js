(window.webpackJsonp=window.webpackJsonp||[]).push([[1054],{1052:function(e,n,t){"use strict";t.d(n,"a",(function(){return c})),t.d(n,"b",(function(){return l})),t.d(n,"d",(function(){return f})),t.d(n,"c",(function(){return h}));t(65),t(91),t(475),t(96),t(7),t(92);var i=t(295),r=t(23),a=t(47),o=t(835),u="__MY_WEB_MESSAGER__",d=function(){function e(n){var t=this;Object(r.a)(this,e);var a=this.options=Object(i.a)({target:window,bridge:null,origin:null,ready:null},n);this.target=a.target,this.handlers={},this.proxyBridgeHandler=this.bridgeHandler.bind(this),window.addEventListener("storage",this.proxyBridgeHandler),a.bridge?this.buildBridge().then((function(e){t.target=e.contentWindow,t.el=e,a.ready&&a.ready(t)})):a.ready&&a.ready(this)}return Object(a.a)(e,[{key:"on",value:function(e,n){var t=function(t){var i=t.data||{};i&&i.type===u&&i.data.type===e&&n(i.data.data,i.data.bridge)};this.handlers[e]||(this.handlers[e]=[]),this.handlers[e].push(t),window.addEventListener("message",t)}},{key:"off",value:function(e,n){var t=this;if(e&&n){var i=this.handlers[e]||[];i.forEach((function(e,t){n===e&&(i.splice(t,1),window.removeEventListener("message",e))}))}else if(e){(this.handlers[e]||[]).forEach((function(e){window.removeEventListener("message",e)})),delete this.handlers[e]}else Object.keys(this.handlers).forEach((function(e){t.off(e)}))}},{key:"fire",value:function(e,n){if(this.target){var t={type:u,data:{type:e,data:n,bridge:this.options.origin}};if(this.options.bridge){var i={type:u,data:t};this.target.postMessage(i,"*")}else this.target.postMessage(t,"*")}}},{key:"once",value:function(e,n){var t=arguments,i=this;this.on(e,(function(){n.apply(i,t),i.off(e,n)}))}},{key:"buildBridge",value:function(){var e=this;return new Promise((function(n,t){var i=document.createElement("iframe");i.style.display="none",i.setAttribute("src",e.options.bridge+"?t="+(new Date).getTime()),i.onload=function(){n(i)},i.onerror=function(e){t(e)},document.body.appendChild(i)}))}},{key:"pass",value:function(e){Object(o.d)(u,{message:e,__t__:(new Date).getTime()},o.a)}},{key:"bridgeHandler",value:function(e){if(e.key===u){var n=JSON.parse(e.newValue);if(n&&n.message){var t=n.message;(this.handlers[t.type]||[]).forEach((function(e){e({data:{type:u,data:t}})}))}}}},{key:"destroy",value:function(){this.off(),this.proxyBridgeHandler&&window.removeEventListener("storage",this.proxyBridgeHandler),this.el&&this.el.parentNode.removeChild(this.el)}}]),e}(),s=t(322);function c(e){var n=e.bridge,t=e.channel,i=e.data,r=e.origin;return new d({bridge:n,origin:r,ready:function(e){e.fire(t,i),setTimeout((function(){e.destroy()}),0)}})}function l(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=new d(t);return i.on(e,n),i}function f(e){var n,t,i=e.name,r=e.bridge,a=e.data,o=e.origin,u=e.callback,d=Object(s.h)(),f={uid:d,data:a};u&&(n=function(e){e.uid===d&&u(e.data)},t=l(i+d,(function(e){n(e),t.destroy()})));c({bridge:r,data:f,origin:o,channel:i})}function h(e){var n=e.name,t=e.origin,i=e.handler;return l(n,(function(e,r){var a=n+e.uid;i(e.data,(function(n){c({bridge:r,data:{uid:e.uid,data:n},origin:t,channel:a})}))}))}},2990:function(e,n,t){"use strict";t.r(n);var i=t(307),r=t.n(i),a=t(0),o=t(1052),u={data:function(){return{results:[]}},methods:{callService:function(){var e=this;window.open("pages/provider.html").onload=function(){Object(o.d)({name:"ServiceName",bridge:"/my/bridge/index.html",origin:"/my/bridge/index.html",data:{id:(new Date).getTime()},callback:function(n){e.results.push(n)}})}}}};a.default.use(r.a);var d=u,s=t(39),c=Object(s.a)(d,(function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("div",[t("el-button",{on:{click:e.callService}},[e._v("调用服务")]),e._v(" "),t("h3",[e._v("结果：")]),e._v(" "),e._l(e.results,(function(n,i){return t("p",{key:i},[e._v(e._s(n))])}))],2)}),[],!1,null,null,null);n.default=c.exports},322:function(e,n,t){"use strict";t.d(n,"f",(function(){return o})),t.d(n,"a",(function(){return u})),t.d(n,"e",(function(){return d})),t.d(n,"c",(function(){return s})),t.d(n,"g",(function(){return c})),t.d(n,"d",(function(){return l})),t.d(n,"h",(function(){return f})),t.d(n,"b",(function(){return h}));t(91),t(160),t(42),t(7),t(40),t(94),t(68),t(92);var i=t(349),r=(t(169),t(338),t(350)),a=window.requestAnimationFrame||window.webkitRequestAnimationFrame||function(e){return window.setTimeout(e,1e3/60)},o=a,u=window.cancelAnimationFrame||window.webkitRequestAnimationFrame||function(e){window.clearTimeout(e)};function d(e,n){return i(e,n)}function s(e){var n,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:20,i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:this;return function(){var a=[].slice.call(arguments);clearTimeout(n);var o=function(){n=null,i||e.apply(r,a)},u=!n&&i;n=setTimeout(o,t),u&&e.apply(r,a)}}function c(e){var n,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this,i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return function(){var r=arguments;n||(n=!0,a((function(){n=!1,e.apply(t,r)})),i&&e.apply(t,r))}}function l(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var n=16*Math.random()|0;return("x"===e?n:3&n|8).toString(16)})).toUpperCase()}function f(){var e=Math.floor(1e3*Math.random());return[(new Date).getTime(),e].join("")}function h(e){return r(e)}},835:function(e,n,t){"use strict";t.d(n,"b",(function(){return r})),t.d(n,"a",(function(){return a})),t.d(n,"d",(function(){return o})),t.d(n,"c",(function(){return u}));var i=t(41),r=window.sessionStorage||{},a=window.localStorage||{};function o(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:r,a="object"===Object(i.a)(n)?JSON.stringify(n):n;t.setItem(e,a)}function u(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:r,t=n.getItem(e);if(t){if("object"===Object(i.a)(t))return t;var a=/^({[\W\w]*})|(\[[\W\w]*])$/;return a.test(t)?JSON.parse(t):t}return null}}}]);